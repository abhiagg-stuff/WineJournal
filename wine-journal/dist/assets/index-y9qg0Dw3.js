(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function GE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var kd={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function QA(){if(B_)return _l;B_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return _l.Fragment=t,_l.jsx=n,_l.jsxs=n,_l}var q_;function XA(){return q_||(q_=1,kd.exports=QA()),kd.exports}var V=XA(),Pd={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function $A(){if(H_)return Et;H_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),I=Symbol.iterator;function k(M){return M===null||typeof M!="object"?null:(M=I&&M[I]||M["@@iterator"],typeof M=="function"?M:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,tt={};function gt(M,z,Z){this.props=M,this.context=z,this.refs=tt,this.updater=Z||$}gt.prototype.isReactComponent={},gt.prototype.setState=function(M,z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,z,"setState")},gt.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function _t(){}_t.prototype=gt.prototype;function dt(M,z,Z){this.props=M,this.context=z,this.refs=tt,this.updater=Z||$}var Pt=dt.prototype=new _t;Pt.constructor=dt,W(Pt,gt.prototype),Pt.isPureReactComponent=!0;var zt=Array.isArray;function Rt(){}var N={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function C(M,z,Z){var nt=Z.ref;return{$$typeof:s,type:M,key:z,ref:nt!==void 0?nt:null,props:Z}}function x(M,z){return C(M.type,z,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function L(M){var z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return z[Z]})}var w=/\/+/g;function Lt(M,z){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):z.toString(36)}function de(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Rt,Rt):(M.status="pending",M.then(function(z){M.status==="pending"&&(M.status="fulfilled",M.value=z)},function(z){M.status==="pending"&&(M.status="rejected",M.reason=z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,z,Z,nt,lt){var st=typeof M;(st==="undefined"||st==="boolean")&&(M=null);var wt=!1;if(M===null)wt=!0;else switch(st){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(M.$$typeof){case s:case t:wt=!0;break;case S:return wt=M._init,F(wt(M._payload),z,Z,nt,lt)}}if(wt)return lt=lt(M),wt=nt===""?"."+Lt(M,0):nt,zt(lt)?(Z="",wt!=null&&(Z=wt.replace(w,"$&/")+"/"),F(lt,z,Z,"",function(mn){return mn})):lt!=null&&(D(lt)&&(lt=x(lt,Z+(lt.key==null||M&&M.key===lt.key?"":(""+lt.key).replace(w,"$&/")+"/")+wt)),z.push(lt)),1;wt=0;var Kt=nt===""?".":nt+":";if(zt(M))for(var Yt=0;Yt<M.length;Yt++)nt=M[Yt],st=Kt+Lt(nt,Yt),wt+=F(nt,z,Z,st,lt);else if(Yt=k(M),typeof Yt=="function")for(M=Yt.call(M),Yt=0;!(nt=M.next()).done;)nt=nt.value,st=Kt+Lt(nt,Yt++),wt+=F(nt,z,Z,st,lt);else if(st==="object"){if(typeof M.then=="function")return F(de(M),z,Z,nt,lt);throw z=String(M),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return wt}function it(M,z,Z){if(M==null)return M;var nt=[],lt=0;return F(M,nt,"","",function(st){return z.call(Z,st,lt++)}),nt}function ct(M){if(M._status===-1){var z=M._result;z=z(),z.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=z)}if(M._status===1)return M._result.default;throw M._result}var Ct=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},qt={map:it,forEach:function(M,z,Z){it(M,function(){z.apply(this,arguments)},Z)},count:function(M){var z=0;return it(M,function(){z++}),z},toArray:function(M){return it(M,function(z){return z})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Et.Activity=A,Et.Children=qt,Et.Component=gt,Et.Fragment=n,Et.Profiler=o,Et.PureComponent=dt,Et.StrictMode=r,Et.Suspense=p,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Et.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Et.cache=function(M){return function(){return M.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(M,z,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var nt=W({},M.props),lt=M.key;if(z!=null)for(st in z.key!==void 0&&(lt=""+z.key),z)!b.call(z,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&z.ref===void 0||(nt[st]=z[st]);var st=arguments.length-2;if(st===1)nt.children=Z;else if(1<st){for(var wt=Array(st),Kt=0;Kt<st;Kt++)wt[Kt]=arguments[Kt+2];nt.children=wt}return C(M.type,lt,nt)},Et.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Et.createElement=function(M,z,Z){var nt,lt={},st=null;if(z!=null)for(nt in z.key!==void 0&&(st=""+z.key),z)b.call(z,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(lt[nt]=z[nt]);var wt=arguments.length-2;if(wt===1)lt.children=Z;else if(1<wt){for(var Kt=Array(wt),Yt=0;Yt<wt;Yt++)Kt[Yt]=arguments[Yt+2];lt.children=Kt}if(M&&M.defaultProps)for(nt in wt=M.defaultProps,wt)lt[nt]===void 0&&(lt[nt]=wt[nt]);return C(M,st,lt)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(M){return{$$typeof:g,render:M}},Et.isValidElement=D,Et.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:ct}},Et.memo=function(M,z){return{$$typeof:_,type:M,compare:z===void 0?null:z}},Et.startTransition=function(M){var z=N.T,Z={};N.T=Z;try{var nt=M(),lt=N.S;lt!==null&&lt(Z,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(Rt,Ct)}catch(st){Ct(st)}finally{z!==null&&Z.types!==null&&(z.types=Z.types),N.T=z}},Et.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Et.use=function(M){return N.H.use(M)},Et.useActionState=function(M,z,Z){return N.H.useActionState(M,z,Z)},Et.useCallback=function(M,z){return N.H.useCallback(M,z)},Et.useContext=function(M){return N.H.useContext(M)},Et.useDebugValue=function(){},Et.useDeferredValue=function(M,z){return N.H.useDeferredValue(M,z)},Et.useEffect=function(M,z){return N.H.useEffect(M,z)},Et.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Et.useId=function(){return N.H.useId()},Et.useImperativeHandle=function(M,z,Z){return N.H.useImperativeHandle(M,z,Z)},Et.useInsertionEffect=function(M,z){return N.H.useInsertionEffect(M,z)},Et.useLayoutEffect=function(M,z){return N.H.useLayoutEffect(M,z)},Et.useMemo=function(M,z){return N.H.useMemo(M,z)},Et.useOptimistic=function(M,z){return N.H.useOptimistic(M,z)},Et.useReducer=function(M,z,Z){return N.H.useReducer(M,z,Z)},Et.useRef=function(M){return N.H.useRef(M)},Et.useState=function(M){return N.H.useState(M)},Et.useSyncExternalStore=function(M,z,Z){return N.H.useSyncExternalStore(M,z,Z)},Et.useTransition=function(){return N.H.useTransition()},Et.version="19.2.0",Et}var G_;function Im(){return G_||(G_=1,Pd.exports=$A()),Pd.exports}var se=Im();const JA=GE(se);var zd={exports:{}},vl={},jd={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function ZA(){return F_||(F_=1,(function(s){function t(F,it){var ct=F.length;F.push(it);t:for(;0<ct;){var Ct=ct-1>>>1,qt=F[Ct];if(0<o(qt,it))F[Ct]=it,F[ct]=qt,ct=Ct;else break t}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var it=F[0],ct=F.pop();if(ct!==it){F[0]=ct;t:for(var Ct=0,qt=F.length,M=qt>>>1;Ct<M;){var z=2*(Ct+1)-1,Z=F[z],nt=z+1,lt=F[nt];if(0>o(Z,ct))nt<qt&&0>o(lt,Z)?(F[Ct]=lt,F[nt]=ct,Ct=nt):(F[Ct]=Z,F[z]=ct,Ct=z);else if(nt<qt&&0>o(lt,ct))F[Ct]=lt,F[nt]=ct,Ct=nt;else break t}}return it}function o(F,it){var ct=F.sortIndex-it.sortIndex;return ct!==0?ct:F.id-it.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var p=[],_=[],S=1,A=null,I=3,k=!1,$=!1,W=!1,tt=!1,gt=typeof setTimeout=="function"?setTimeout:null,_t=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;function Pt(F){for(var it=n(_);it!==null;){if(it.callback===null)r(_);else if(it.startTime<=F)r(_),it.sortIndex=it.expirationTime,t(p,it);else break;it=n(_)}}function zt(F){if(W=!1,Pt(F),!$)if(n(p)!==null)$=!0,Rt||(Rt=!0,L());else{var it=n(_);it!==null&&de(zt,it.startTime-F)}}var Rt=!1,N=-1,b=5,C=-1;function x(){return tt?!0:!(s.unstable_now()-C<b)}function D(){if(tt=!1,Rt){var F=s.unstable_now();C=F;var it=!0;try{t:{$=!1,W&&(W=!1,_t(N),N=-1),k=!0;var ct=I;try{e:{for(Pt(F),A=n(p);A!==null&&!(A.expirationTime>F&&x());){var Ct=A.callback;if(typeof Ct=="function"){A.callback=null,I=A.priorityLevel;var qt=Ct(A.expirationTime<=F);if(F=s.unstable_now(),typeof qt=="function"){A.callback=qt,Pt(F),it=!0;break e}A===n(p)&&r(p),Pt(F)}else r(p);A=n(p)}if(A!==null)it=!0;else{var M=n(_);M!==null&&de(zt,M.startTime-F),it=!1}}break t}finally{A=null,I=ct,k=!1}it=void 0}}finally{it?L():Rt=!1}}}var L;if(typeof dt=="function")L=function(){dt(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Lt=w.port2;w.port1.onmessage=D,L=function(){Lt.postMessage(null)}}else L=function(){gt(D,0)};function de(F,it){N=gt(function(){F(s.unstable_now())},it)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(F){switch(I){case 1:case 2:case 3:var it=3;break;default:it=I}var ct=I;I=it;try{return F()}finally{I=ct}},s.unstable_requestPaint=function(){tt=!0},s.unstable_runWithPriority=function(F,it){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ct=I;I=F;try{return it()}finally{I=ct}},s.unstable_scheduleCallback=function(F,it,ct){var Ct=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Ct+ct:Ct):ct=Ct,F){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=ct+qt,F={id:S++,callback:it,priorityLevel:F,startTime:ct,expirationTime:qt,sortIndex:-1},ct>Ct?(F.sortIndex=ct,t(_,F),n(p)===null&&F===n(_)&&(W?(_t(N),N=-1):W=!0,de(zt,ct-Ct))):(F.sortIndex=qt,t(p,F),$||k||($=!0,Rt||(Rt=!0,L()))),F},s.unstable_shouldYield=x,s.unstable_wrapCallback=function(F){var it=I;return function(){var ct=I;I=it;try{return F.apply(this,arguments)}finally{I=ct}}}})(Bd)),Bd}var K_;function WA(){return K_||(K_=1,jd.exports=ZA()),jd.exports}var qd={exports:{}},Xe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function t1(){if(Y_)return Xe;Y_=1;var s=Im();function t(p){var _="https://react.dev/errors/"+p;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,_,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:_,implementation:S}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,_){if(p==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Xe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xe.createPortal=function(p,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(p,_,null,S)},Xe.flushSync=function(p){var _=f.T,S=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=_,r.p=S,r.d.f()}},Xe.preconnect=function(p,_){typeof p=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(p,_))},Xe.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Xe.preinit=function(p,_){if(typeof p=="string"&&_&&typeof _.as=="string"){var S=_.as,A=g(S,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,k=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?r.d.S(p,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:I,fetchPriority:k}):S==="script"&&r.d.X(p,{crossOrigin:A,integrity:I,fetchPriority:k,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Xe.preinitModule=function(p,_){if(typeof p=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);r.d.M(p,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(p)},Xe.preload=function(p,_){if(typeof p=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,A=g(S,_.crossOrigin);r.d.L(p,S,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Xe.preloadModule=function(p,_){if(typeof p=="string")if(_){var S=g(_.as,_.crossOrigin);r.d.m(p,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(p)},Xe.requestFormReset=function(p){r.d.r(p)},Xe.unstable_batchedUpdates=function(p,_){return p(_)},Xe.useFormState=function(p,_,S){return f.H.useFormState(p,_,S)},Xe.useFormStatus=function(){return f.H.useHostTransitionStatus()},Xe.version="19.2.0",Xe}var Q_;function e1(){if(Q_)return qd.exports;Q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),qd.exports=t1(),qd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function n1(){if(X_)return vl;X_=1;var s=WA(),t=Im(),n=e1();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(r(188))}function _(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),e;if(d===l)return p(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var y=!1,E=h.child;E;){if(E===a){y=!0,a=h,l=d;break}if(E===l){y=!0,l=h,a=d;break}E=E.sibling}if(!y){for(E=d.child;E;){if(E===a){y=!0,a=d,l=h;break}if(E===l){y=!0,l=d,a=h;break}E=E.sibling}if(!y)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function S(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=S(e),i!==null)return i;e=e.sibling}return null}var A=Object.assign,I=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),tt=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),_t=Symbol.for("react.consumer"),dt=Symbol.for("react.context"),Pt=Symbol.for("react.forward_ref"),zt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function Lt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case gt:return"Profiler";case tt:return"StrictMode";case zt:return"Suspense";case Rt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case $:return"Portal";case dt:return e.displayName||"Context";case _t:return(e._context.displayName||"Context")+".Consumer";case Pt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return i=e.displayName||null,i!==null?i:Lt(e.type)||"Memo";case b:i=e._payload,e=e._init;try{return Lt(e(i))}catch{}}return null}var de=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Ct=[],qt=-1;function M(e){return{current:e}}function z(e){0>qt||(e.current=Ct[qt],Ct[qt]=null,qt--)}function Z(e,i){qt++,Ct[qt]=e.current,e.current=i}var nt=M(null),lt=M(null),st=M(null),wt=M(null);function Kt(e,i){switch(Z(st,i),Z(lt,e),Z(nt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?c_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=c_(i),e=h_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(nt),Z(nt,e)}function Yt(){z(nt),z(lt),z(st)}function mn(e){e.memoizedState!==null&&Z(wt,e);var i=nt.current,a=h_(i,e.type);i!==a&&(Z(lt,e),Z(nt,a))}function Bn(e){lt.current===e&&(z(nt),z(lt)),wt.current===e&&(z(wt),ml._currentValue=ct)}var ii,os;function oe(e){if(ii===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ii=i&&i[1]||"",os=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ii+e+os}var hr=!1;function fr(e,i){if(!e||hr)return"";hr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(G){var q=G}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(G){q=G}e.call(Q.prototype)}}else{try{throw Error()}catch(G){q=G}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),y=d[0],E=d[1];if(y&&E){var R=y.split(`
`),B=E.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===B.length)for(l=R.length-1,h=B.length-1;1<=l&&0<=h&&R[l]!==B[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==B[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==B[h]){var K=`
`+R[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=h);break}}}finally{hr=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?oe(a):""}function go(e,i){switch(e.tag){case 26:case 27:case 5:return oe(e.type);case 16:return oe("Lazy");case 13:return e.child!==i&&i!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return fr(e.type,!1);case 11:return fr(e.type.render,!1);case 1:return fr(e.type,!0);case 31:return oe("Activity");default:return""}}function po(e){try{var i="",a=null;do i+=go(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ve=Object.prototype.hasOwnProperty,Oe=s.unstable_scheduleCallback,ls=s.unstable_cancelCallback,Ph=s.unstable_shouldYield,iu=s.unstable_requestPaint,en=s.unstable_now,dr=s.unstable_getCurrentPriorityLevel,yo=s.unstable_ImmediatePriority,_o=s.unstable_UserBlockingPriority,us=s.unstable_NormalPriority,zh=s.unstable_LowPriority,su=s.unstable_IdlePriority,ru=s.log,au=s.unstable_setDisableYieldValue,qn=null,ze=null;function Rn(e){if(typeof ru=="function"&&au(e),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(qn,e)}catch{}}var me=Math.clz32?Math.clz32:lu,ou=Math.log,ea=Math.LN2;function lu(e){return e>>>=0,e===0?32:31-(ou(e)/ea|0)|0}var si=256,mr=262144,Ee=4194304;function ri(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ai(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=ri(l):(y&=E,y!==0?h=ri(y):a||(a=E&~e,a!==0&&(h=ri(a))))):(E=l&~d,E!==0?h=ri(E):y!==0?h=ri(y):a||(a=l&~e,a!==0&&(h=ri(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Hn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function jh(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uu(){var e=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),e}function oi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function gr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bh(e,i,a,l,h,d){var y=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,R=e.expirationTimes,B=e.hiddenUpdates;for(a=y&~a;0<a;){var K=31-me(a),Q=1<<K;E[K]=0,R[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var G=q[K];G!==null&&(G.lane&=-536870913)}a&=~Q}l!==0&&pr(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~i))}function pr(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-me(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function vo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-me(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function Eo(e,i){var a=i&-i;return a=(a&42)!==0?1:yr(a),(a&(e.suspendedLanes|i))!==0?0:a}function yr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cu(){var e=it.p;return e!==0?e:(e=window.event,e===void 0?32:V_(e.type))}function Gn(e,i){var a=it.p;try{return it.p=e,i()}finally{it.p=a}}var Fn=Math.random().toString(36).slice(2),Te="__reactFiber$"+Fn,Ve="__reactProps$"+Fn,li="__reactContainer$"+Fn,na="__reactEvents$"+Fn,qh="__reactListeners$"+Fn,hu="__reactHandles$"+Fn,fu="__reactResources$"+Fn,ui="__reactMarker$"+Fn;function ia(e){delete e[Te],delete e[Ve],delete e[na],delete e[qh],delete e[hu]}function ci(e){var i=e[Te];if(i)return i;for(var a=e.parentNode;a;){if(i=a[li]||a[Te]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=__(e);e!==null;){if(a=e[Te])return a;e=__(e)}return i}e=a,a=e.parentNode}return null}function Cn(e){if(e=e[Te]||e[li]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function gn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function hi(e){var i=e[fu];return i||(i=e[fu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Se(e){e[ui]=!0}var To=new Set,So={};function fi(e,i){di(e,i),di(e+"Capture",i)}function di(e,i){for(So[e]=i,e=0;e<i.length;e++)To.add(i[e])}var Ao=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},wo={};function du(e){return ve.call(wo,e)?!0:ve.call(bo,e)?!1:Ao.test(e)?wo[e]=!0:(bo[e]=!0,!1)}function sa(e,i,a){if(du(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function pn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ae(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function Ue(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cs(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ro(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Qt(e){if(!e._valueTracker){var i=cs(e)?"checked":"value";e._valueTracker=Ro(e,i,""+e[i])}}function _r(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=cs(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vr=/[\n"\\]/g;function rn(e){return e.replace(vr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ra(e,i,a,l,h,d,y,E){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),i!=null?y==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ue(i)):e.value!==""+Ue(i)&&(e.value=""+Ue(i)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),i!=null?Co(e,y,Ue(i)):a!=null?Co(e,y,Ue(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Ue(E):e.removeAttribute("name")}function mu(e,i,a,l,h,d,y,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qt(e);return}a=a!=null?""+Ue(a):"",i=i!=null?""+Ue(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Qt(e)}function Co(e,i,a){i==="number"&&mi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function hs(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ue(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function gu(e,i,a){if(i!=null&&(i=""+Ue(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Ue(a):""}function fs(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(de(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ue(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Qt(e)}function an(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var pu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Io(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||pu.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function No(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Io(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Io(e,d,i[d])}function aa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oa(e){return ds.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Kn(){}var Oo=null;function In(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,gi=null;function Er(e){var i=Cn(e);if(i&&(e=i.stateNode)){var a=e[Ve]||null;t:switch(e=i.stateNode,i.type){case"input":if(ra(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+rn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Ve]||null;if(!h)throw Error(r(90));ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&_r(l)}break t;case"textarea":gu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&hs(e,!!a.multiple,i,!1)}}}var la=!1;function gs(e,i,a){if(la)return e(i,a);la=!0;try{var l=e(i);return l}finally{if(la=!1,(ms!==null||gi!==null)&&(cc(),ms&&(i=ms,e=gi,gi=ms=null,Er(i),e)))for(i=0;i<e.length;i++)Er(e[i])}}function Yn(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ve]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tr=!1;if(Nn)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch{Tr=!1}var pi=null,Do=null,Sr=null;function Mo(){if(Sr)return Sr;var e,i=Do,a=i.length,l,h="value"in pi?pi.value:pi.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var y=a-e;for(l=1;l<=y&&i[a-l]===h[d-l];l++);return Sr=h.slice(e,1<l?1-l:void 0)}function Ar(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function Qn(){return!1}function je(e){function i(a,l,h,d,y){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Vi:Qn,this.isPropagationStopped=Qn,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),i}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=je(Ui),ps=A({},Ui,{view:0,detail:0}),xo=je(ps),ys,ua,_i,ca=A({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_i&&(_i&&e.type==="mousemove"?(ys=e.screenX-_i.screenX,ua=e.screenY-_i.screenY):ua=ys=0,_i=e),ys)},movementY:function(e){return"movementY"in e?e.movementY:ua}}),Vo=je(ca),br=A({},ca,{dataTransfer:0}),_u=je(br),vu=A({},ps,{relatedTarget:0}),wr=je(vu),Uo=A({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=je(Uo),ha=A({},Ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tu=je(ha),Su=A({},Ui,{data:0}),vi=je(Su),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=wu[e])?!!i[e]:!1}function _s(){return Ru}var nn=A({},ps,{key:function(e){if(e.key){var i=Au[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ar(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(e){return e.type==="keypress"?Ar(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ar(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cu=je(nn),Iu=A({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=je(Iu),c=A({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),m=je(c),v=A({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=je(v),P=A({},ca,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H=je(P),et=A({},Ui,{newState:0,oldState:0}),St=je(et),ge=[9,13,27,32],Ht=Nn&&"CompositionEvent"in window,le=null;Nn&&"documentMode"in document&&(le=document.documentMode);var On=Nn&&"TextEvent"in window&&!le,Ei=Nn&&(!Ht||le&&8<le&&11>=le),Xn=" ",$n=!1;function Rr(e,i){switch(e){case"keyup":return ge.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var da=!1;function _S(e,i){switch(e){case"compositionend":return fa(i);case"keypress":return i.which!==32?null:($n=!0,Xn);case"textInput":return e=i.data,e===Xn&&$n?null:e;default:return null}}function vS(e,i){if(da)return e==="compositionend"||!Ht&&Rr(e,i)?(e=Mo(),Sr=Do=pi=null,da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ei&&i.locale!=="ko"?null:i.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!ES[e.type]:i==="textarea"}function Sg(e,i,a,l){ms?gi?gi.push(l):gi=[l]:ms=l,i=yc(i,"onChange"),0<i.length&&(a=new yi("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Lo=null,ko=null;function TS(e){s_(e,0)}function Nu(e){var i=gn(e);if(_r(i))return e}function Ag(e,i){if(e==="change")return i}var bg=!1;if(Nn){var Hh;if(Nn){var Gh="oninput"in document;if(!Gh){var wg=document.createElement("div");wg.setAttribute("oninput","return;"),Gh=typeof wg.oninput=="function"}Hh=Gh}else Hh=!1;bg=Hh&&(!document.documentMode||9<document.documentMode)}function Rg(){Lo&&(Lo.detachEvent("onpropertychange",Cg),ko=Lo=null)}function Cg(e){if(e.propertyName==="value"&&Nu(ko)){var i=[];Sg(i,ko,e,In(e)),gs(TS,i)}}function SS(e,i,a){e==="focusin"?(Rg(),Lo=i,ko=a,Lo.attachEvent("onpropertychange",Cg)):e==="focusout"&&Rg()}function AS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nu(ko)}function bS(e,i){if(e==="click")return Nu(i)}function wS(e,i){if(e==="input"||e==="change")return Nu(i)}function RS(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var yn=typeof Object.is=="function"?Object.is:RS;function Po(e,i){if(yn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ve.call(i,h)||!yn(e[h],i[h]))return!1}return!0}function Ig(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ng(e,i){var a=Ig(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ig(a)}}function Og(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Og(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Dg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=mi(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=mi(e.document)}return i}function Fh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var CS=Nn&&"documentMode"in document&&11>=document.documentMode,ma=null,Kh=null,zo=null,Yh=!1;function Mg(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yh||ma==null||ma!==mi(l)||(l=ma,"selectionStart"in l&&Fh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zo&&Po(zo,l)||(zo=l,l=yc(Kh,"onSelect"),0<l.length&&(i=new yi("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=ma)))}function Cr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ga={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionrun:Cr("Transition","TransitionRun"),transitionstart:Cr("Transition","TransitionStart"),transitioncancel:Cr("Transition","TransitionCancel"),transitionend:Cr("Transition","TransitionEnd")},Qh={},xg={};Nn&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Ir(e){if(Qh[e])return Qh[e];if(!ga[e])return e;var i=ga[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in xg)return Qh[e]=i[a];return e}var Vg=Ir("animationend"),Ug=Ir("animationiteration"),Lg=Ir("animationstart"),IS=Ir("transitionrun"),NS=Ir("transitionstart"),OS=Ir("transitioncancel"),kg=Ir("transitionend"),Pg=new Map,Xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xh.push("scrollEnd");function Jn(e,i){Pg.set(e,i),fi(i,[e])}var Ou=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Dn=[],pa=0,$h=0;function Du(){for(var e=pa,i=$h=pa=0;i<e;){var a=Dn[i];Dn[i++]=null;var l=Dn[i];Dn[i++]=null;var h=Dn[i];Dn[i++]=null;var d=Dn[i];if(Dn[i++]=null,l!==null&&h!==null){var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}d!==0&&zg(a,h,d)}}function Mu(e,i,a,l){Dn[pa++]=e,Dn[pa++]=i,Dn[pa++]=a,Dn[pa++]=l,$h|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Jh(e,i,a,l){return Mu(e,i,a,l),xu(e)}function Nr(e,i){return Mu(e,null,null,i),xu(e)}function zg(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-me(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function xu(e){if(50<ol)throw ol=0,od=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ya={};function DS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,i,a,l){return new DS(e,i,a,l)}function Zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ki(e,i){var a=e.alternate;return a===null?(a=_n(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Vu(e,i,a,l,h,d){var y=0;if(l=e,typeof e=="function")Zh(e)&&(y=1);else if(typeof e=="string")y=LA(e,a,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=_n(31,a,i,h),e.elementType=C,e.lanes=d,e;case W:return Or(a.children,h,d,i);case tt:y=8,h|=24;break;case gt:return e=_n(12,a,i,h|2),e.elementType=gt,e.lanes=d,e;case zt:return e=_n(13,a,i,h),e.elementType=zt,e.lanes=d,e;case Rt:return e=_n(19,a,i,h),e.elementType=Rt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:y=10;break t;case _t:y=9;break t;case Pt:y=11;break t;case N:y=14;break t;case b:y=16,l=null;break t}y=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=_n(y,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function Or(e,i,a,l){return e=_n(7,e,l,i),e.lanes=a,e}function Wh(e,i,a){return e=_n(6,e,null,i),e.lanes=a,e}function Bg(e){var i=_n(18,null,null,0);return i.stateNode=e,i}function tf(e,i,a){return i=_n(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var qg=new WeakMap;function Mn(e,i){if(typeof e=="object"&&e!==null){var a=qg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:po(i)},qg.set(e,i),i)}return{value:e,source:i,stack:po(i)}}var _a=[],va=0,Uu=null,jo=0,xn=[],Vn=0,vs=null,Ti=1,Si="";function Pi(e,i){_a[va++]=jo,_a[va++]=Uu,Uu=e,jo=i}function Hg(e,i,a){xn[Vn++]=Ti,xn[Vn++]=Si,xn[Vn++]=vs,vs=e;var l=Ti;e=Si;var h=32-me(l)-1;l&=~(1<<h),a+=1;var d=32-me(i)+h;if(30<d){var y=h-h%5;d=(l&(1<<y)-1).toString(32),l>>=y,h-=y,Ti=1<<32-me(i)+h|a<<h|l,Si=d+e}else Ti=1<<d|a<<h|l,Si=e}function ef(e){e.return!==null&&(Pi(e,1),Hg(e,1,0))}function nf(e){for(;e===Uu;)Uu=_a[--va],_a[va]=null,jo=_a[--va],_a[va]=null;for(;e===vs;)vs=xn[--Vn],xn[Vn]=null,Si=xn[--Vn],xn[Vn]=null,Ti=xn[--Vn],xn[Vn]=null}function Gg(e,i){xn[Vn++]=Ti,xn[Vn++]=Si,xn[Vn++]=vs,Ti=i.id,Si=i.overflow,vs=e}var Be=null,ne=null,Ut=!1,Es=null,Un=!1,sf=Error(r(519));function Ts(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bo(Mn(i,e)),sf}function Fg(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Te]=e,i[Ve]=l,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<ul.length;a++)Nt(ul[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),mu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),fs(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||l_(i.textContent,a)?(l.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),l.onScroll!=null&&Nt("scroll",i),l.onScrollEnd!=null&&Nt("scrollend",i),l.onClick!=null&&(i.onclick=Kn),i=!0):i=!1,i||Ts(e,!0)}function Kg(e){for(Be=e.return;Be;)switch(Be.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Be=Be.return}}function Ea(e){if(e!==Be)return!1;if(!Ut)return Kg(e),Ut=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Sd(e.type,e.memoizedProps)),a=!a),a&&ne&&Ts(e),Kg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ne=y_(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));ne=y_(e)}else i===27?(i=ne,Us(e.type)?(e=Cd,Cd=null,ne=e):ne=i):ne=Be?kn(e.stateNode.nextSibling):null;return!0}function Dr(){ne=Be=null,Ut=!1}function rf(){var e=Es;return e!==null&&(cn===null?cn=e:cn.push.apply(cn,e),Es=null),e}function Bo(e){Es===null?Es=[e]:Es.push(e)}var af=M(null),Mr=null,zi=null;function Ss(e,i,a){Z(af,i._currentValue),i._currentValue=a}function ji(e){e._currentValue=af.current,z(af)}function of(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function lf(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var R=0;R<i.length;R++)if(E.context===i[R]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),of(d.return,a,e),l||(y=null);break t}d=E.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(r(341));y.lanes|=a,d=y.alternate,d!==null&&(d.lanes|=a),of(y,a,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function Ta(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(r(387));if(y=y.memoizedProps,y!==null){var E=h.type;yn(h.pendingProps.value,y.value)||(e!==null?e.push(E):e=[E])}}else if(h===wt.current){if(y=h.alternate,y===null)throw Error(r(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ml):e=[ml])}h=h.return}e!==null&&lf(i,e,a,l),i.flags|=262144}function Lu(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function xr(e){Mr=e,zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qe(e){return Yg(Mr,e)}function ku(e,i){return Mr===null&&xr(e),Yg(e,i)}function Yg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},zi===null){if(e===null)throw Error(r(308));zi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else zi=zi.next=i;return a}var MS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},xS=s.unstable_scheduleCallback,VS=s.unstable_NormalPriority,be={$$typeof:dt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uf(){return{controller:new MS,data:new Map,refCount:0}}function qo(e){e.refCount--,e.refCount===0&&xS(VS,function(){e.controller.abort()})}var Ho=null,cf=0,Sa=0,Aa=null;function US(e,i){if(Ho===null){var a=Ho=[];cf=0,Sa=dd(),Aa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return cf++,i.then(Qg,Qg),i}function Qg(){if(--cf===0&&Ho!==null){Aa!==null&&(Aa.status="fulfilled");var e=Ho;Ho=null,Sa=0,Aa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function LS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Xg=F.S;F.S=function(e,i){My=en(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&US(e,i),Xg!==null&&Xg(e,i)};var Vr=M(null);function hf(){var e=Vr.current;return e!==null?e:ee.pooledCache}function Pu(e,i){i===null?Z(Vr,Vr.current):Z(Vr,i.pool)}function $g(){var e=hf();return e===null?null:{parent:be._currentValue,pool:e}}var ba=Error(r(460)),ff=Error(r(474)),zu=Error(r(542)),ju={then:function(){}};function Jg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Kn,Kn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,tp(e),e;default:if(typeof i.status=="string")i.then(Kn,Kn);else{if(e=ee,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,tp(e),e}throw Lr=i,ba}}function Ur(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Lr=a,ba):a}}var Lr=null;function Wg(){if(Lr===null)throw Error(r(459));var e=Lr;return Lr=null,e}function tp(e){if(e===ba||e===zu)throw Error(r(483))}var wa=null,Go=0;function Bu(e){var i=Go;return Go+=1,wa===null&&(wa=[]),Zg(wa,e,i)}function Fo(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function qu(e,i){throw i.$$typeof===I?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function ep(e){function i(U,O){if(e){var j=U.deletions;j===null?(U.deletions=[O],U.flags|=16):j.push(O)}}function a(U,O){if(!e)return null;for(;O!==null;)i(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=ki(U,O),U.index=0,U.sibling=null,U}function d(U,O,j){return U.index=j,e?(j=U.alternate,j!==null?(j=j.index,j<O?(U.flags|=67108866,O):j):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function y(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function E(U,O,j,Y){return O===null||O.tag!==6?(O=Wh(j,U.mode,Y),O.return=U,O):(O=h(O,j),O.return=U,O)}function R(U,O,j,Y){var ht=j.type;return ht===W?K(U,O,j.props.children,Y,j.key):O!==null&&(O.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&Ur(ht)===O.type)?(O=h(O,j.props),Fo(O,j),O.return=U,O):(O=Vu(j.type,j.key,j.props,null,U.mode,Y),Fo(O,j),O.return=U,O)}function B(U,O,j,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=tf(j,U.mode,Y),O.return=U,O):(O=h(O,j.children||[]),O.return=U,O)}function K(U,O,j,Y,ht){return O===null||O.tag!==7?(O=Or(j,U.mode,Y,ht),O.return=U,O):(O=h(O,j),O.return=U,O)}function Q(U,O,j){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Wh(""+O,U.mode,j),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case k:return j=Vu(O.type,O.key,O.props,null,U.mode,j),Fo(j,O),j.return=U,j;case $:return O=tf(O,U.mode,j),O.return=U,O;case b:return O=Ur(O),Q(U,O,j)}if(de(O)||L(O))return O=Or(O,U.mode,j,null),O.return=U,O;if(typeof O.then=="function")return Q(U,Bu(O),j);if(O.$$typeof===dt)return Q(U,ku(U,O),j);qu(U,O)}return null}function q(U,O,j,Y){var ht=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ht!==null?null:E(U,O,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return j.key===ht?R(U,O,j,Y):null;case $:return j.key===ht?B(U,O,j,Y):null;case b:return j=Ur(j),q(U,O,j,Y)}if(de(j)||L(j))return ht!==null?null:K(U,O,j,Y,null);if(typeof j.then=="function")return q(U,O,Bu(j),Y);if(j.$$typeof===dt)return q(U,O,ku(U,j),Y);qu(U,j)}return null}function G(U,O,j,Y,ht){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return U=U.get(j)||null,E(O,U,""+Y,ht);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case k:return U=U.get(Y.key===null?j:Y.key)||null,R(O,U,Y,ht);case $:return U=U.get(Y.key===null?j:Y.key)||null,B(O,U,Y,ht);case b:return Y=Ur(Y),G(U,O,j,Y,ht)}if(de(Y)||L(Y))return U=U.get(j)||null,K(O,U,Y,ht,null);if(typeof Y.then=="function")return G(U,O,j,Bu(Y),ht);if(Y.$$typeof===dt)return G(U,O,j,ku(O,Y),ht);qu(O,Y)}return null}function at(U,O,j,Y){for(var ht=null,jt=null,ot=O,bt=O=0,Dt=null;ot!==null&&bt<j.length;bt++){ot.index>bt?(Dt=ot,ot=null):Dt=ot.sibling;var Bt=q(U,ot,j[bt],Y);if(Bt===null){ot===null&&(ot=Dt);break}e&&ot&&Bt.alternate===null&&i(U,ot),O=d(Bt,O,bt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt,ot=Dt}if(bt===j.length)return a(U,ot),Ut&&Pi(U,bt),ht;if(ot===null){for(;bt<j.length;bt++)ot=Q(U,j[bt],Y),ot!==null&&(O=d(ot,O,bt),jt===null?ht=ot:jt.sibling=ot,jt=ot);return Ut&&Pi(U,bt),ht}for(ot=l(ot);bt<j.length;bt++)Dt=G(ot,U,bt,j[bt],Y),Dt!==null&&(e&&Dt.alternate!==null&&ot.delete(Dt.key===null?bt:Dt.key),O=d(Dt,O,bt),jt===null?ht=Dt:jt.sibling=Dt,jt=Dt);return e&&ot.forEach(function(js){return i(U,js)}),Ut&&Pi(U,bt),ht}function mt(U,O,j,Y){if(j==null)throw Error(r(151));for(var ht=null,jt=null,ot=O,bt=O=0,Dt=null,Bt=j.next();ot!==null&&!Bt.done;bt++,Bt=j.next()){ot.index>bt?(Dt=ot,ot=null):Dt=ot.sibling;var js=q(U,ot,Bt.value,Y);if(js===null){ot===null&&(ot=Dt);break}e&&ot&&js.alternate===null&&i(U,ot),O=d(js,O,bt),jt===null?ht=js:jt.sibling=js,jt=js,ot=Dt}if(Bt.done)return a(U,ot),Ut&&Pi(U,bt),ht;if(ot===null){for(;!Bt.done;bt++,Bt=j.next())Bt=Q(U,Bt.value,Y),Bt!==null&&(O=d(Bt,O,bt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt);return Ut&&Pi(U,bt),ht}for(ot=l(ot);!Bt.done;bt++,Bt=j.next())Bt=G(ot,U,bt,Bt.value,Y),Bt!==null&&(e&&Bt.alternate!==null&&ot.delete(Bt.key===null?bt:Bt.key),O=d(Bt,O,bt),jt===null?ht=Bt:jt.sibling=Bt,jt=Bt);return e&&ot.forEach(function(YA){return i(U,YA)}),Ut&&Pi(U,bt),ht}function te(U,O,j,Y){if(typeof j=="object"&&j!==null&&j.type===W&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case k:t:{for(var ht=j.key;O!==null;){if(O.key===ht){if(ht=j.type,ht===W){if(O.tag===7){a(U,O.sibling),Y=h(O,j.props.children),Y.return=U,U=Y;break t}}else if(O.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&Ur(ht)===O.type){a(U,O.sibling),Y=h(O,j.props),Fo(Y,j),Y.return=U,U=Y;break t}a(U,O);break}else i(U,O);O=O.sibling}j.type===W?(Y=Or(j.props.children,U.mode,Y,j.key),Y.return=U,U=Y):(Y=Vu(j.type,j.key,j.props,null,U.mode,Y),Fo(Y,j),Y.return=U,U=Y)}return y(U);case $:t:{for(ht=j.key;O!==null;){if(O.key===ht)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){a(U,O.sibling),Y=h(O,j.children||[]),Y.return=U,U=Y;break t}else{a(U,O);break}else i(U,O);O=O.sibling}Y=tf(j,U.mode,Y),Y.return=U,U=Y}return y(U);case b:return j=Ur(j),te(U,O,j,Y)}if(de(j))return at(U,O,j,Y);if(L(j)){if(ht=L(j),typeof ht!="function")throw Error(r(150));return j=ht.call(j),mt(U,O,j,Y)}if(typeof j.then=="function")return te(U,O,Bu(j),Y);if(j.$$typeof===dt)return te(U,O,ku(U,j),Y);qu(U,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,O!==null&&O.tag===6?(a(U,O.sibling),Y=h(O,j),Y.return=U,U=Y):(a(U,O),Y=Wh(j,U.mode,Y),Y.return=U,U=Y),y(U)):a(U,O)}return function(U,O,j,Y){try{Go=0;var ht=te(U,O,j,Y);return wa=null,ht}catch(ot){if(ot===ba||ot===zu)throw ot;var jt=_n(29,ot,null,U.mode);return jt.lanes=Y,jt.return=U,jt}finally{}}}var kr=ep(!0),np=ep(!1),As=!1;function df(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ws(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=xu(e),zg(e,null,a),i}return Mu(e,l,i,a),xu(e)}function Ko(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,vo(e,a)}}function gf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var y={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var pf=!1;function Yo(){if(pf){var e=Aa;if(e!==null)throw e}}function Qo(e,i,a,l){pf=!1;var h=e.updateQueue;As=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,B=R.next;R.next=null,y===null?d=B:y.next=B,y=R;var K=e.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==y&&(E===null?K.firstBaseUpdate=B:E.next=B,K.lastBaseUpdate=R))}if(d!==null){var Q=h.baseState;y=0,K=B=R=null,E=d;do{var q=E.lane&-536870913,G=q!==E.lane;if(G?(Ot&q)===q:(l&q)===q){q!==0&&q===Sa&&(pf=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var at=e,mt=E;q=i;var te=a;switch(mt.tag){case 1:if(at=mt.payload,typeof at=="function"){Q=at.call(te,Q,q);break t}Q=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=mt.payload,q=typeof at=="function"?at.call(te,Q,q):at,q==null)break t;Q=A({},Q,q);break t;case 2:As=!0}}q=E.callback,q!==null&&(e.flags|=64,G&&(e.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(B=K=G,R=Q):K=K.next=G,y|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);K===null&&(R=Q),h.baseState=R,h.firstBaseUpdate=B,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),Os|=y,e.lanes=y,e.memoizedState=Q}}function ip(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function sp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ip(a[e],i)}var Ra=M(null),Hu=M(0);function rp(e,i){e=Xi,Z(Hu,e),Z(Ra,i),Xi=e|i.baseLanes}function yf(){Z(Hu,Xi),Z(Ra,Ra.current)}function _f(){Xi=Hu.current,z(Ra),z(Hu)}var vn=M(null),Ln=null;function Rs(e){var i=e.alternate;Z(pe,pe.current&1),Z(vn,e),Ln===null&&(i===null||Ra.current!==null||i.memoizedState!==null)&&(Ln=e)}function vf(e){Z(pe,pe.current),Z(vn,e),Ln===null&&(Ln=e)}function ap(e){e.tag===22?(Z(pe,pe.current),Z(vn,e),Ln===null&&(Ln=e)):Cs()}function Cs(){Z(pe,pe.current),Z(vn,vn.current)}function En(e){z(vn),Ln===e&&(Ln=null),z(pe)}var pe=M(0);function Gu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||wd(a)||Rd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Bi=0,At=null,Zt=null,we=null,Fu=!1,Ca=!1,Pr=!1,Ku=0,Xo=0,Ia=null,kS=0;function he(){throw Error(r(321))}function Ef(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!yn(e[a],i[a]))return!1;return!0}function Tf(e,i,a,l,h,d){return Bi=d,At=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,F.H=e===null||e.memoizedState===null?Hp:Lf,Pr=!1,d=a(l,h),Pr=!1,Ca&&(d=lp(i,a,l,h)),op(e),d}function op(e){F.H=Zo;var i=Zt!==null&&Zt.next!==null;if(Bi=0,we=Zt=At=null,Fu=!1,Xo=0,Ia=null,i)throw Error(r(300));e===null||Re||(e=e.dependencies,e!==null&&Lu(e)&&(Re=!0))}function lp(e,i,a,l){At=e;var h=0;do{if(Ca&&(Ia=null),Xo=0,Ca=!1,25<=h)throw Error(r(301));if(h+=1,we=Zt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=Gp,d=i(a,l)}while(Ca);return d}function PS(){var e=F.H,i=e.useState()[0];return i=typeof i.then=="function"?$o(i):i,e=e.useState()[0],(Zt!==null?Zt.memoizedState:null)!==e&&(At.flags|=1024),i}function Sf(){var e=Ku!==0;return Ku=0,e}function Af(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function bf(e){if(Fu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Fu=!1}Bi=0,we=Zt=At=null,Ca=!1,Xo=Ku=0,Ia=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?At.memoizedState=we=e:we=we.next=e,we}function ye(){if(Zt===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var i=we===null?At.memoizedState:we.next;if(i!==null)we=i,Zt=e;else{if(e===null)throw At.alternate===null?Error(r(467)):Error(r(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},we===null?At.memoizedState=we=e:we=we.next=e}return we}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $o(e){var i=Xo;return Xo+=1,Ia===null&&(Ia=[]),e=Zg(Ia,e,i),i=At,(we===null?i.memoizedState:we.next)===null&&(i=i.alternate,F.H=i===null||i.memoizedState===null?Hp:Lf),e}function Qu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $o(e);if(e.$$typeof===dt)return qe(e)}throw Error(r(438,String(e)))}function wf(e){var i=null,a=At.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=At.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Yu(),At.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=x;return i.index++,a}function qi(e,i){return typeof i=="function"?i(e):i}function Xu(e){var i=ye();return Rf(i,Zt,e)}function Rf(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=y=null,R=null,B=i,K=!1;do{var Q=B.lane&-536870913;if(Q!==B.lane?(Ot&Q)===Q:(Bi&Q)===Q){var q=B.revertLane;if(q===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Q===Sa&&(K=!0);else if((Bi&q)===q){B=B.next,q===Sa&&(K=!0);continue}else Q={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=Q,y=d):R=R.next=Q,At.lanes|=q,Os|=q;Q=B.action,Pr&&a(d,Q),d=B.hasEagerState?B.eagerState:a(d,Q)}else q={lane:Q,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},R===null?(E=R=q,y=d):R=R.next=q,At.lanes|=Q,Os|=Q;B=B.next}while(B!==null&&B!==i);if(R===null?y=d:R.next=E,!yn(d,e.memoizedState)&&(Re=!0,K&&(a=Aa,a!==null)))throw a;e.memoizedState=d,e.baseState=y,e.baseQueue=R,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Cf(e){var i=ye(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var y=h=h.next;do d=e(d,y.action),y=y.next;while(y!==h);yn(d,i.memoizedState)||(Re=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function up(e,i,a){var l=At,h=ye(),d=Ut;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var y=!yn((Zt||h).memoizedState,a);if(y&&(h.memoizedState=a,Re=!0),h=h.queue,Of(fp.bind(null,l,h,e),[e]),h.getSnapshot!==i||y||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,Na(9,{destroy:void 0},hp.bind(null,l,h,a,i),null),ee===null)throw Error(r(349));d||(Bi&127)!==0||cp(l,i,a)}return a}function cp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=At.updateQueue,i===null?(i=Yu(),At.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function hp(e,i,a,l){i.value=a,i.getSnapshot=l,dp(i)&&mp(e)}function fp(e,i,a){return a(function(){dp(i)&&mp(e)})}function dp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!yn(e,a)}catch{return!0}}function mp(e){var i=Nr(e,2);i!==null&&hn(i,e,2)}function If(e){var i=sn();if(typeof e=="function"){var a=e;if(e=a(),Pr){Rn(!0);try{a()}finally{Rn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},i}function gp(e,i,a,l){return e.baseState=a,Rf(e,Zt,typeof l=="function"?l:qi)}function zS(e,i,a,l,h){if(Zu(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};F.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,pp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function pp(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=F.T,y={};F.T=y;try{var E=a(h,l),R=F.S;R!==null&&R(y,E),yp(e,i,E)}catch(B){Nf(e,i,B)}finally{d!==null&&y.types!==null&&(d.types=y.types),F.T=d}}else try{d=a(h,l),yp(e,i,d)}catch(B){Nf(e,i,B)}}function yp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){_p(e,i,l)},function(l){return Nf(e,i,l)}):_p(e,i,a)}function _p(e,i,a){i.status="fulfilled",i.value=a,vp(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,pp(e,a)))}function Nf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,vp(i),i=i.next;while(i!==l)}e.action=null}function vp(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Ep(e,i){return i}function Tp(e,i){if(Ut){var a=ee.formState;if(a!==null){t:{var l=At;if(Ut){if(ne){e:{for(var h=ne,d=Un;h.nodeType!==8;){if(!d){h=null;break e}if(h=kn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ne=kn(h.nextSibling),l=h.data==="F!";break t}}Ts(l)}l=!1}l&&(i=a[0])}}return a=sn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:i},a.queue=l,a=jp.bind(null,At,l),l.dispatch=a,l=If(!1),d=Uf.bind(null,At,!1,l.queue),l=sn(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=zS.bind(null,At,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function Sp(e){var i=ye();return Ap(i,Zt,e)}function Ap(e,i,a){if(i=Rf(e,i,Ep)[0],e=Xu(qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=$o(i)}catch(y){throw y===ba?zu:y}else l=i;i=ye();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(At.flags|=2048,Na(9,{destroy:void 0},jS.bind(null,h,a),null)),[l,d,e]}function jS(e,i){e.action=i}function bp(e){var i=ye(),a=Zt;if(a!==null)return Ap(i,a,e);ye(),i=i.memoizedState,a=ye();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Na(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=At.updateQueue,i===null&&(i=Yu(),At.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function wp(){return ye().memoizedState}function $u(e,i,a,l){var h=sn();At.flags|=e,h.memoizedState=Na(1|i,{destroy:void 0},a,l===void 0?null:l)}function Ju(e,i,a,l){var h=ye();l=l===void 0?null:l;var d=h.memoizedState.inst;Zt!==null&&l!==null&&Ef(l,Zt.memoizedState.deps)?h.memoizedState=Na(i,d,a,l):(At.flags|=e,h.memoizedState=Na(1|i,d,a,l))}function Rp(e,i){$u(8390656,8,e,i)}function Of(e,i){Ju(2048,8,e,i)}function BS(e){At.flags|=4;var i=At.updateQueue;if(i===null)i=Yu(),At.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function Cp(e){var i=ye().memoizedState;return BS({ref:i,nextImpl:e}),function(){if((Gt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Ip(e,i){return Ju(4,2,e,i)}function Np(e,i){return Ju(4,4,e,i)}function Op(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Dp(e,i,a){a=a!=null?a.concat([e]):null,Ju(4,4,Op.bind(null,i,e),a)}function Df(){}function Mp(e,i){var a=ye();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Ef(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function xp(e,i){var a=ye();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Ef(i,l[1]))return l[0];if(l=e(),Pr){Rn(!0);try{e()}finally{Rn(!1)}}return a.memoizedState=[l,i],l}function Mf(e,i,a){return a===void 0||(Bi&1073741824)!==0&&(Ot&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Vy(),At.lanes|=e,Os|=e,a)}function Vp(e,i,a,l){return yn(a,i)?a:Ra.current!==null?(e=Mf(e,a,l),yn(e,i)||(Re=!0),e):(Bi&42)===0||(Bi&1073741824)!==0&&(Ot&261930)===0?(Re=!0,e.memoizedState=a):(e=Vy(),At.lanes|=e,Os|=e,i)}function Up(e,i,a,l,h){var d=it.p;it.p=d!==0&&8>d?d:8;var y=F.T,E={};F.T=E,Uf(e,!1,i,a);try{var R=h(),B=F.S;if(B!==null&&B(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=LS(R,l);Jo(e,i,K,An(e))}else Jo(e,i,l,An(e))}catch(Q){Jo(e,i,{then:function(){},status:"rejected",reason:Q},An())}finally{it.p=d,y!==null&&E.types!==null&&(y.types=E.types),F.T=y}}function qS(){}function xf(e,i,a,l){if(e.tag!==5)throw Error(r(476));var h=Lp(e).queue;Up(e,h,i,ct,a===null?qS:function(){return kp(e),a(l)})}function Lp(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function kp(e){var i=Lp(e);i.next===null&&(i=e.alternate.memoizedState),Jo(e,i.next.queue,{},An())}function Vf(){return qe(ml)}function Pp(){return ye().memoizedState}function zp(){return ye().memoizedState}function HS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=An();e=bs(a);var l=ws(i,e,a);l!==null&&(hn(l,i,a),Ko(l,i,a)),i={cache:uf()},e.payload=i;return}i=i.return}}function GS(e,i,a){var l=An();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Zu(e)?Bp(i,a):(a=Jh(e,i,a,l),a!==null&&(hn(a,e,l),qp(a,i,l)))}function jp(e,i,a){var l=An();Jo(e,i,a,l)}function Jo(e,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zu(e))Bp(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,E=d(y,a);if(h.hasEagerState=!0,h.eagerState=E,yn(E,y))return Mu(e,i,h,0),ee===null&&Du(),!1}catch{}finally{}if(a=Jh(e,i,h,l),a!==null)return hn(a,e,l),qp(a,i,l),!0}return!1}function Uf(e,i,a,l){if(l={lane:2,revertLane:dd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zu(e)){if(i)throw Error(r(479))}else i=Jh(e,a,l,2),i!==null&&hn(i,e,2)}function Zu(e){var i=e.alternate;return e===At||i!==null&&i===At}function Bp(e,i){Ca=Fu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function qp(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,vo(e,a)}}var Zo={readContext:qe,use:Qu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he};Zo.useEffectEvent=he;var Hp={readContext:qe,use:Qu,useCallback:function(e,i){return sn().memoizedState=[e,i===void 0?null:i],e},useContext:qe,useEffect:Rp,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,$u(4194308,4,Op.bind(null,i,e),a)},useLayoutEffect:function(e,i){return $u(4194308,4,e,i)},useInsertionEffect:function(e,i){$u(4,2,e,i)},useMemo:function(e,i){var a=sn();i=i===void 0?null:i;var l=e();if(Pr){Rn(!0);try{e()}finally{Rn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=sn();if(a!==void 0){var h=a(i);if(Pr){Rn(!0);try{a(i)}finally{Rn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=GS.bind(null,At,e),[l.memoizedState,e]},useRef:function(e){var i=sn();return e={current:e},i.memoizedState=e},useState:function(e){e=If(e);var i=e.queue,a=jp.bind(null,At,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Df,useDeferredValue:function(e,i){var a=sn();return Mf(a,e,i)},useTransition:function(){var e=If(!1);return e=Up.bind(null,At,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=At,h=sn();if(Ut){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ee===null)throw Error(r(349));(Ot&127)!==0||cp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Rp(fp.bind(null,l,d,e),[e]),l.flags|=2048,Na(9,{destroy:void 0},hp.bind(null,l,d,a,i),null),a},useId:function(){var e=sn(),i=ee.identifierPrefix;if(Ut){var a=Si,l=Ti;a=(l&~(1<<32-me(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Ku++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=kS++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Vf,useFormState:Tp,useActionState:Tp,useOptimistic:function(e){var i=sn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Uf.bind(null,At,!0,a),a.dispatch=i,[e,i]},useMemoCache:wf,useCacheRefresh:function(){return sn().memoizedState=HS.bind(null,At)},useEffectEvent:function(e){var i=sn(),a={impl:e};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Lf={readContext:qe,use:Qu,useCallback:Mp,useContext:qe,useEffect:Of,useImperativeHandle:Dp,useInsertionEffect:Ip,useLayoutEffect:Np,useMemo:xp,useReducer:Xu,useRef:wp,useState:function(){return Xu(qi)},useDebugValue:Df,useDeferredValue:function(e,i){var a=ye();return Vp(a,Zt.memoizedState,e,i)},useTransition:function(){var e=Xu(qi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:up,useId:Pp,useHostTransitionStatus:Vf,useFormState:Sp,useActionState:Sp,useOptimistic:function(e,i){var a=ye();return gp(a,Zt,e,i)},useMemoCache:wf,useCacheRefresh:zp};Lf.useEffectEvent=Cp;var Gp={readContext:qe,use:Qu,useCallback:Mp,useContext:qe,useEffect:Of,useImperativeHandle:Dp,useInsertionEffect:Ip,useLayoutEffect:Np,useMemo:xp,useReducer:Cf,useRef:wp,useState:function(){return Cf(qi)},useDebugValue:Df,useDeferredValue:function(e,i){var a=ye();return Zt===null?Mf(a,e,i):Vp(a,Zt.memoizedState,e,i)},useTransition:function(){var e=Cf(qi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:$o(e),i]},useSyncExternalStore:up,useId:Pp,useHostTransitionStatus:Vf,useFormState:bp,useActionState:bp,useOptimistic:function(e,i){var a=ye();return Zt!==null?gp(a,Zt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:zp};Gp.useEffectEvent=Cp;function kf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Pf={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=An(),h=bs(l);h.payload=i,a!=null&&(h.callback=a),i=ws(e,h,l),i!==null&&(hn(i,e,l),Ko(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=An(),h=bs(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ws(e,h,l),i!==null&&(hn(i,e,l),Ko(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=An(),l=bs(a);l.tag=2,i!=null&&(l.callback=i),i=ws(e,l,a),i!==null&&(hn(i,e,a),Ko(i,e,a))}};function Fp(e,i,a,l,h,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):i.prototype&&i.prototype.isPureReactComponent?!Po(a,l)||!Po(h,d):!0}function Kp(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Pf.enqueueReplaceState(i,i.state,null)}function zr(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=A({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Yp(e){Ou(e)}function Qp(e){console.error(e)}function Xp(e){Ou(e)}function Wu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function $p(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function zf(e,i,a){return a=bs(a),a.tag=3,a.payload={element:null},a.callback=function(){Wu(e,i)},a}function Jp(e){return e=bs(e),e.tag=3,e}function Zp(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){$p(i,a,l)}}var y=a.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){$p(i,a,l),typeof h!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function FS(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ta(i,a,h,!0),a=vn.current,a!==null){switch(a.tag){case 31:case 13:return Ln===null?hc():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===ju?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),cd(e,l,h)),!1;case 22:return a.flags|=65536,l===ju?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),cd(e,l,h)),!1}throw Error(r(435,a.tag))}return cd(e,l,h),hc(),!1}if(Ut)return i=vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==sf&&(e=Error(r(422),{cause:l}),Bo(Mn(e,a)))):(l!==sf&&(i=Error(r(423),{cause:l}),Bo(Mn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Mn(l,a),h=zf(e.stateNode,l,h),gf(e,h),fe!==4&&(fe=2)),!1;var d=Error(r(520),{cause:l});if(d=Mn(d,a),al===null?al=[d]:al.push(d),fe!==4&&(fe=2),i===null)return!0;l=Mn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=zf(a.stateNode,l,e),gf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ds===null||!Ds.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Jp(h),Zp(h,e,a,l),gf(a,h),!1}a=a.return}while(a!==null);return!1}var jf=Error(r(461)),Re=!1;function He(e,i,a,l){i.child=e===null?np(i,null,a,l):kr(i,e.child,a,l)}function Wp(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var y={};for(var E in l)E!=="ref"&&(y[E]=l[E])}else y=l;return xr(i),l=Tf(e,i,a,y,d,h),E=Sf(),e!==null&&!Re?(Af(e,i,h),Hi(e,i,h)):(Ut&&E&&ef(i),i.flags|=1,He(e,i,l,h),i.child)}function ty(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!Zh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ey(e,i,d,l,h)):(e=Vu(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Qf(e,h)){var y=d.memoizedProps;if(a=a.compare,a=a!==null?a:Po,a(y,l)&&e.ref===i.ref)return Hi(e,i,h)}return i.flags|=1,e=ki(d,l),e.ref=i.ref,e.return=i,i.child=e}function ey(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Po(d,l)&&e.ref===i.ref)if(Re=!1,i.pendingProps=l=d,Qf(e,h))(e.flags&131072)!==0&&(Re=!0);else return i.lanes=e.lanes,Hi(e,i,h)}return Bf(e,i,a,l,h)}function ny(e,i,a,l){var h=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return iy(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pu(i,d!==null?d.cachePool:null),d!==null?rp(i,d):yf(),ap(i);else return l=i.lanes=536870912,iy(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Pu(i,d.cachePool),rp(i,d),Cs(),i.memoizedState=null):(e!==null&&Pu(i,null),yf(),Cs());return He(e,i,h,a),i.child}function Wo(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function iy(e,i,a,l,h){var d=hf();return d=d===null?null:{parent:be._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&Pu(i,null),yf(),ap(i),e!==null&&Ta(e,i,l,!0),i.childLanes=h,null}function tc(e,i){return i=nc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function sy(e,i,a){return kr(i,e.child,null,a),e=tc(i,i.pendingProps),e.flags|=2,En(i),i.memoizedState=null,e}function KS(e,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ut){if(l.mode==="hidden")return e=tc(i,l),i.lanes=536870912,Wo(null,e);if(vf(i),(e=ne)?(e=p_(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:vs!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=Bg(e),a.return=i,i.child=a,Be=i,ne=null)):e=null,e===null)throw Ts(i);return i.lanes=536870912,null}return tc(i,l)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(vf(i),h)if(i.flags&256)i.flags&=-257,i=sy(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(Re||Ta(e,i,a,!1),h=(a&e.childLanes)!==0,Re||h){if(l=ee,l!==null&&(y=Eo(l,a),y!==0&&y!==d.retryLane))throw d.retryLane=y,Nr(e,y),hn(l,e,y),jf;hc(),i=sy(e,i,a)}else e=d.treeContext,ne=kn(y.nextSibling),Be=i,Ut=!0,Es=null,Un=!1,e!==null&&Gg(i,e),i=tc(i,l),i.flags|=4096;return i}return e=ki(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function ec(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Bf(e,i,a,l,h){return xr(i),a=Tf(e,i,a,l,void 0,h),l=Sf(),e!==null&&!Re?(Af(e,i,h),Hi(e,i,h)):(Ut&&l&&ef(i),i.flags|=1,He(e,i,a,h),i.child)}function ry(e,i,a,l,h,d){return xr(i),i.updateQueue=null,a=lp(i,l,a,h),op(e),l=Sf(),e!==null&&!Re?(Af(e,i,d),Hi(e,i,d)):(Ut&&l&&ef(i),i.flags|=1,He(e,i,a,d),i.child)}function ay(e,i,a,l,h){if(xr(i),i.stateNode===null){var d=ya,y=a.contextType;typeof y=="object"&&y!==null&&(d=qe(y)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Pf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},df(i),y=a.contextType,d.context=typeof y=="object"&&y!==null?qe(y):ya,d.state=i.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(kf(i,a,y,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Pf.enqueueReplaceState(d,d.state,null),Qo(i,l,d,h),Yo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,R=zr(a,E);d.props=R;var B=d.context,K=a.contextType;y=ya,typeof K=="object"&&K!==null&&(y=qe(K));var Q=a.getDerivedStateFromProps;K=typeof Q=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||B!==y)&&Kp(i,d,l,y),As=!1;var q=i.memoizedState;d.state=q,Qo(i,l,d,h),Yo(),B=i.memoizedState,E||q!==B||As?(typeof Q=="function"&&(kf(i,a,Q,l),B=i.memoizedState),(R=As||Fp(i,a,R,l,q,B,y))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=y,l=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,mf(e,i),y=i.memoizedProps,K=zr(a,y),d.props=K,Q=i.pendingProps,q=d.context,B=a.contextType,R=ya,typeof B=="object"&&B!==null&&(R=qe(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==Q||q!==R)&&Kp(i,d,l,R),As=!1,q=i.memoizedState,d.state=q,Qo(i,l,d,h),Yo();var G=i.memoizedState;y!==Q||q!==G||As||e!==null&&e.dependencies!==null&&Lu(e.dependencies)?(typeof E=="function"&&(kf(i,a,E,l),G=i.memoizedState),(K=As||Fp(i,a,K,l,q,G,R)||e!==null&&e.dependencies!==null&&Lu(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=R,l=K):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&q===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,ec(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=kr(i,e.child,null,h),i.child=kr(i,null,a,h)):He(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Hi(e,i,h),e}function oy(e,i,a,l){return Dr(),i.flags|=256,He(e,i,a,l),i.child}var qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hf(e){return{baseLanes:e,cachePool:$g()}}function Gf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Sn),e}function ly(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(pe.current&2)!==0),y&&(h=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ut){if(h?Rs(i):Cs(),(e=ne)?(e=p_(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:vs!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},a=Bg(e),a.return=i,i.child=a,Be=i,ne=null)):e=null,e===null)throw Ts(i);return Rd(e)?i.lanes=32:i.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Cs(),h=i.mode,E=nc({mode:"hidden",children:E},h),l=Or(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,l=i.child,l.memoizedState=Hf(a),l.childLanes=Gf(e,y,a),i.memoizedState=qf,Wo(null,l)):(Rs(i),Ff(i,E))}var R=e.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(d)i.flags&256?(Rs(i),i.flags&=-257,i=Kf(e,i,a)):i.memoizedState!==null?(Cs(),i.child=e.child,i.flags|=128,i=null):(Cs(),E=l.fallback,h=i.mode,l=nc({mode:"visible",children:l.children},h),E=Or(E,h,a,null),E.flags|=2,l.return=i,E.return=i,l.sibling=E,i.child=l,kr(i,e.child,null,a),l=i.child,l.memoizedState=Hf(a),l.childLanes=Gf(e,y,a),i.memoizedState=qf,i=Wo(null,l));else if(Rs(i),Rd(E)){if(y=E.nextSibling&&E.nextSibling.dataset,y)var B=y.dgst;y=B,l=Error(r(419)),l.stack="",l.digest=y,Bo({value:l,source:null,stack:null}),i=Kf(e,i,a)}else if(Re||Ta(e,i,a,!1),y=(a&e.childLanes)!==0,Re||y){if(y=ee,y!==null&&(l=Eo(y,a),l!==0&&l!==R.retryLane))throw R.retryLane=l,Nr(e,l),hn(y,e,l),jf;wd(E)||hc(),i=Kf(e,i,a)}else wd(E)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,ne=kn(E.nextSibling),Be=i,Ut=!0,Es=null,Un=!1,e!==null&&Gg(i,e),i=Ff(i,l.children),i.flags|=4096);return i}return h?(Cs(),E=l.fallback,h=i.mode,R=e.child,B=R.sibling,l=ki(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,B!==null?E=ki(B,E):(E=Or(E,h,a,null),E.flags|=2),E.return=i,l.return=i,l.sibling=E,i.child=l,Wo(null,l),l=i.child,E=e.child.memoizedState,E===null?E=Hf(a):(h=E.cachePool,h!==null?(R=be._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=$g(),E={baseLanes:E.baseLanes|a,cachePool:h}),l.memoizedState=E,l.childLanes=Gf(e,y,a),i.memoizedState=qf,Wo(e.child,l)):(Rs(i),a=e.child,e=a.sibling,a=ki(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(y=i.deletions,y===null?(i.deletions=[e],i.flags|=16):y.push(e)),i.child=a,i.memoizedState=null,a)}function Ff(e,i){return i=nc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function nc(e,i){return e=_n(22,e,null,i),e.lanes=0,e}function Kf(e,i,a){return kr(i,e.child,null,a),e=Ff(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function uy(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),of(e.return,i,a)}function Yf(e,i,a,l,h,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=h,y.treeForkCount=d)}function cy(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var y=pe.current,E=(y&2)!==0;if(E?(y=y&1|2,i.flags|=128):y&=1,Z(pe,y),He(e,i,l,a),l=Ut?jo:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,a,i);else if(e.tag===19)uy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Gu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Yf(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Gu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Yf(i,!0,a,null,d,l);break;case"together":Yf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Hi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Os|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ta(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=ki(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=ki(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Qf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Lu(e)))}function YS(e,i,a){switch(i.tag){case 3:Kt(i,i.stateNode.containerInfo),Ss(i,be,e.memoizedState.cache),Dr();break;case 27:case 5:mn(i);break;case 4:Kt(i,i.stateNode.containerInfo);break;case 10:Ss(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,vf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Rs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ly(e,i,a):(Rs(i),e=Hi(e,i,a),e!==null?e.sibling:null);Rs(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ta(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return cy(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(pe,pe.current),l)break;return null;case 22:return i.lanes=0,ny(e,i,a,i.pendingProps);case 24:Ss(i,be,e.memoizedState.cache)}return Hi(e,i,a)}function hy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Re=!0;else{if(!Qf(e,a)&&(i.flags&128)===0)return Re=!1,YS(e,i,a);Re=(e.flags&131072)!==0}else Re=!1,Ut&&(i.flags&1048576)!==0&&Hg(i,jo,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Ur(i.elementType),i.type=e,typeof e=="function")Zh(e)?(l=zr(e,l),i.tag=1,i=ay(null,i,e,l,a)):(i.tag=0,i=Bf(null,i,e,l,a));else{if(e!=null){var h=e.$$typeof;if(h===Pt){i.tag=11,i=Wp(null,i,e,l,a);break t}else if(h===N){i.tag=14,i=ty(null,i,e,l,a);break t}}throw i=Lt(e)||e,Error(r(306,i,""))}}return i;case 0:return Bf(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=zr(l,i.pendingProps),ay(e,i,l,h,a);case 3:t:{if(Kt(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,mf(e,i),Qo(i,l,null,a);var y=i.memoizedState;if(l=y.cache,Ss(i,be,l),l!==d.cache&&lf(i,[be],a,!0),Yo(),l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=oy(e,i,l,a);break t}else if(l!==h){h=Mn(Error(r(424)),i),Bo(h),i=oy(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ne=kn(e.firstChild),Be=i,Ut=!0,Es=null,Un=!0,a=np(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dr(),l===h){i=Hi(e,i,a);break t}He(e,i,l,a)}i=i.child}return i;case 26:return ec(e,i),e===null?(a=S_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ut||(a=i.type,e=i.pendingProps,l=_c(st.current).createElement(a),l[Te]=i,l[Ve]=e,Ge(l,a,e),Se(l),i.stateNode=l):i.memoizedState=S_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return mn(i),e===null&&Ut&&(l=i.stateNode=v_(i.type,i.pendingProps,st.current),Be=i,Un=!0,h=ne,Us(i.type)?(Cd=h,ne=kn(l.firstChild)):ne=h),He(e,i,i.pendingProps.children,a),ec(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ut&&((h=l=ne)&&(l=AA(l,i.type,i.pendingProps,Un),l!==null?(i.stateNode=l,Be=i,ne=kn(l.firstChild),Un=!1,h=!0):h=!1),h||Ts(i)),mn(i),h=i.type,d=i.pendingProps,y=e!==null?e.memoizedProps:null,l=d.children,Sd(h,d)?l=null:y!==null&&Sd(h,y)&&(i.flags|=32),i.memoizedState!==null&&(h=Tf(e,i,PS,null,null,a),ml._currentValue=h),ec(e,i),He(e,i,l,a),i.child;case 6:return e===null&&Ut&&((e=a=ne)&&(a=bA(a,i.pendingProps,Un),a!==null?(i.stateNode=a,Be=i,ne=null,e=!0):e=!1),e||Ts(i)),null;case 13:return ly(e,i,a);case 4:return Kt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=kr(i,null,l,a):He(e,i,l,a),i.child;case 11:return Wp(e,i,i.type,i.pendingProps,a);case 7:return He(e,i,i.pendingProps,a),i.child;case 8:return He(e,i,i.pendingProps.children,a),i.child;case 12:return He(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Ss(i,i.type,l.value),He(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,xr(i),h=qe(h),l=l(h),i.flags|=1,He(e,i,l,a),i.child;case 14:return ty(e,i,i.type,i.pendingProps,a);case 15:return ey(e,i,i.type,i.pendingProps,a);case 19:return cy(e,i,a);case 31:return KS(e,i,a);case 22:return ny(e,i,a,i.pendingProps);case 24:return xr(i),l=qe(be),e===null?(h=hf(),h===null&&(h=ee,d=uf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},df(i),Ss(i,be,h)):((e.lanes&a)!==0&&(mf(e,i),Qo(i,null,null,a),Yo()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ss(i,be,l)):(l=d.cache,Ss(i,be,l),l!==h.cache&&lf(i,[be],a,!0))),He(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Gi(e){e.flags|=4}function Xf(e,i,a,l,h){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Py())e.flags|=8192;else throw Lr=ju,ff}else e.flags&=-16777217}function fy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!C_(i))if(Py())e.flags|=8192;else throw Lr=ju,ff}function ic(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?uu():536870912,e.lanes|=i,xa|=i)}function tl(e,i){if(!Ut)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ie(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function QS(e,i,a){var l=i.pendingProps;switch(nf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(i),null;case 1:return ie(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ji(be),Yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ea(i)?Gi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,rf())),ie(i),null;case 26:var h=i.type,d=i.memoizedState;return e===null?(Gi(i),d!==null?(ie(i),fy(i,d)):(ie(i),Xf(i,h,null,l,a))):d?d!==e.memoizedState?(Gi(i),ie(i),fy(i,d)):(ie(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&Gi(i),ie(i),Xf(i,h,e,l,a)),null;case 27:if(Bn(i),a=st.current,h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ie(i),null}e=nt.current,Ea(i)?Fg(i):(e=v_(h,l,a),i.stateNode=e,Gi(i))}return ie(i),null;case 5:if(Bn(i),h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Gi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ie(i),null}if(d=nt.current,Ea(i))Fg(i);else{var y=_c(st.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?y.createElement("select",{is:l.is}):y.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?y.createElement(h,{is:l.is}):y.createElement(h)}}d[Te]=i,d[Ve]=l;t:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break t;for(;y.sibling===null;){if(y.return===null||y.return===i)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;t:switch(Ge(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Gi(i)}}return ie(i),Xf(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Gi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=st.current,Ea(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=Be,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Te]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||l_(e.nodeValue,a)),e||Ts(i,!0)}else e=_c(e).createTextNode(l),e[Te]=i,i.stateNode=e}return ie(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Ea(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Te]=i}else Dr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ie(i),e=!1}else a=rf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(En(i),i):(En(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ie(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ea(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Te]=i}else Dr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ie(i),h=!1}else h=rf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(En(i),i):(En(i),null)}return En(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),ic(i,i.updateQueue),ie(i),null);case 4:return Yt(),e===null&&yd(i.stateNode.containerInfo),ie(i),null;case 10:return ji(i.type),ie(i),null;case 19:if(z(pe),l=i.memoizedState,l===null)return ie(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)tl(l,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Gu(e),d!==null){for(i.flags|=128,tl(l,!1),e=d.updateQueue,i.updateQueue=e,ic(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)jg(a,e),a=a.sibling;return Z(pe,pe.current&1|2),Ut&&Pi(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&en()>lc&&(i.flags|=128,h=!0,tl(l,!1),i.lanes=4194304)}else{if(!h)if(e=Gu(d),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,ic(i,e),tl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ut)return ie(i),null}else 2*en()-l.renderingStartTime>lc&&a!==536870912&&(i.flags|=128,h=!0,tl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=en(),e.sibling=null,a=pe.current,Z(pe,h?a&1|2:a&1),Ut&&Pi(i,l.treeForkCount),e):(ie(i),null);case 22:case 23:return En(i),_f(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ie(i),i.subtreeFlags&6&&(i.flags|=8192)):ie(i),a=i.updateQueue,a!==null&&ic(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&z(Vr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(be),ie(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function XS(e,i){switch(nf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ji(be),Yt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Bn(i),null;case 31:if(i.memoizedState!==null){if(En(i),i.alternate===null)throw Error(r(340));Dr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(En(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Dr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return z(pe),null;case 4:return Yt(),null;case 10:return ji(i.type),null;case 22:case 23:return En(i),_f(),e!==null&&z(Vr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ji(be),null;case 25:return null;default:return null}}function dy(e,i){switch(nf(i),i.tag){case 3:ji(be),Yt();break;case 26:case 27:case 5:Bn(i);break;case 4:Yt();break;case 31:i.memoizedState!==null&&En(i);break;case 13:En(i);break;case 19:z(pe);break;case 10:ji(i.type);break;case 22:case 23:En(i),_f(),e!==null&&z(Vr);break;case 24:ji(be)}}function el(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,y=a.inst;l=d(),y.destroy=l}a=a.next}while(a!==h)}}catch(E){$t(i,i.return,E)}}function Is(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var y=l.inst,E=y.destroy;if(E!==void 0){y.destroy=void 0,h=i;var R=a,B=E;try{B()}catch(K){$t(h,R,K)}}}l=l.next}while(l!==d)}}catch(K){$t(i,i.return,K)}}function my(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{sp(i,a)}catch(l){$t(e,e.return,l)}}}function gy(e,i,a){a.props=zr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){$t(e,i,l)}}function nl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){$t(e,i,h)}}function Ai(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){$t(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$t(e,i,h)}else a.current=null}function py(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){$t(e,e.return,h)}}function $f(e,i,a){try{var l=e.stateNode;yA(l,e.type,a,i),l[Ve]=i}catch(h){$t(e,e.return,h)}}function yy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Us(e.type)||e.tag===4}function Jf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||yy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Us(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zf(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kn));else if(l!==4&&(l===27&&Us(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Zf(e,i,a),e=e.sibling;e!==null;)Zf(e,i,a),e=e.sibling}function sc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Us(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(sc(e,i,a),e=e.sibling;e!==null;)sc(e,i,a),e=e.sibling}function _y(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ge(i,l,a),i[Te]=e,i[Ve]=a}catch(d){$t(e,e.return,d)}}var Fi=!1,Ce=!1,Wf=!1,vy=typeof WeakSet=="function"?WeakSet:Set,Le=null;function $S(e,i){if(e=e.containerInfo,Ed=wc,e=Dg(e),Fh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var y=0,E=-1,R=-1,B=0,K=0,Q=e,q=null;e:for(;;){for(var G;Q!==a||h!==0&&Q.nodeType!==3||(E=y+h),Q!==d||l!==0&&Q.nodeType!==3||(R=y+l),Q.nodeType===3&&(y+=Q.nodeValue.length),(G=Q.firstChild)!==null;)q=Q,Q=G;for(;;){if(Q===e)break e;if(q===a&&++B===h&&(E=y),q===d&&++K===l&&(R=y),(G=Q.nextSibling)!==null)break;Q=q,q=Q.parentNode}Q=G}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Td={focusedElem:e,selectionRange:a},wc=!1,Le=i;Le!==null;)if(i=Le,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Le=e;else for(;Le!==null;){switch(i=Le,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var at=zr(a.type,h);e=l.getSnapshotBeforeUpdate(at,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(mt){$t(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)bd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Le=e;break}Le=i.return}}function Ey(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yi(e,a),l&4&&el(5,a);break;case 1:if(Yi(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(y){$t(a,a.return,y)}else{var h=zr(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(y){$t(a,a.return,y)}}l&64&&my(a),l&512&&nl(a,a.return);break;case 3:if(Yi(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{sp(e,i)}catch(y){$t(a,a.return,y)}}break;case 27:i===null&&l&4&&_y(a);case 26:case 5:Yi(e,a),i===null&&l&4&&py(a),l&512&&nl(a,a.return);break;case 12:Yi(e,a);break;case 31:Yi(e,a),l&4&&Ay(e,a);break;case 13:Yi(e,a),l&4&&by(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=rA.bind(null,a),wA(e,a))));break;case 22:if(l=a.memoizedState!==null||Fi,!l){i=i!==null&&i.memoizedState!==null||Ce,h=Fi;var d=Ce;Fi=l,(Ce=i)&&!d?Qi(e,a,(a.subtreeFlags&8772)!==0):Yi(e,a),Fi=h,Ce=d}break;case 30:break;default:Yi(e,a)}}function Ty(e){var i=e.alternate;i!==null&&(e.alternate=null,Ty(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ia(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ue=null,on=!1;function Ki(e,i,a){for(a=a.child;a!==null;)Sy(e,i,a),a=a.sibling}function Sy(e,i,a){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(qn,a)}catch{}switch(a.tag){case 26:Ce||Ai(a,i),Ki(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ce||Ai(a,i);var l=ue,h=on;Us(a.type)&&(ue=a.stateNode,on=!1),Ki(e,i,a),hl(a.stateNode),ue=l,on=h;break;case 5:Ce||Ai(a,i);case 6:if(l=ue,h=on,ue=null,Ki(e,i,a),ue=l,on=h,ue!==null)if(on)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(a.stateNode)}catch(d){$t(a,i,d)}else try{ue.removeChild(a.stateNode)}catch(d){$t(a,i,d)}break;case 18:ue!==null&&(on?(e=ue,m_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ba(e)):m_(ue,a.stateNode));break;case 4:l=ue,h=on,ue=a.stateNode.containerInfo,on=!0,Ki(e,i,a),ue=l,on=h;break;case 0:case 11:case 14:case 15:Is(2,a,i),Ce||Is(4,a,i),Ki(e,i,a);break;case 1:Ce||(Ai(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&gy(a,i,l)),Ki(e,i,a);break;case 21:Ki(e,i,a);break;case 22:Ce=(l=Ce)||a.memoizedState!==null,Ki(e,i,a),Ce=l;break;default:Ki(e,i,a)}}function Ay(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ba(e)}catch(a){$t(i,i.return,a)}}}function by(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ba(e)}catch(a){$t(i,i.return,a)}}function JS(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new vy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new vy),i;default:throw Error(r(435,e.tag))}}function rc(e,i){var a=JS(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=aA.bind(null,e,l);l.then(h,h)}})}function ln(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,y=i,E=y;t:for(;E!==null;){switch(E.tag){case 27:if(Us(E.type)){ue=E.stateNode,on=!1;break t}break;case 5:ue=E.stateNode,on=!1;break t;case 3:case 4:ue=E.stateNode.containerInfo,on=!0;break t}E=E.return}if(ue===null)throw Error(r(160));Sy(d,y,h),ue=null,on=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)wy(i,e),i=i.sibling}var Zn=null;function wy(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ln(i,e),un(e),l&4&&(Is(3,e,e.return),el(3,e),Is(5,e,e.return));break;case 1:ln(i,e),un(e),l&512&&(Ce||a===null||Ai(a,a.return)),l&64&&Fi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Zn;if(ln(i,e),un(e),l&512&&(Ce||a===null||Ai(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ui]||d[Te]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ge(d,l,a),d[Te]=e,Se(d),l=d;break t;case"link":var y=w_("link","href",h).get(l+(a.href||""));if(y){for(var E=0;E<y.length;E++)if(d=y[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){y.splice(E,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;case"meta":if(y=w_("meta","content",h).get(l+(a.content||""))){for(E=0;E<y.length;E++)if(d=y[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){y.splice(E,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Te]=e,Se(d),l=d}e.stateNode=l}else R_(h,e.type,e.stateNode);else e.stateNode=b_(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?R_(h,e.type,e.stateNode):b_(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&$f(e,e.memoizedProps,a.memoizedProps)}break;case 27:ln(i,e),un(e),l&512&&(Ce||a===null||Ai(a,a.return)),a!==null&&l&4&&$f(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ln(i,e),un(e),l&512&&(Ce||a===null||Ai(a,a.return)),e.flags&32){h=e.stateNode;try{an(h,"")}catch(at){$t(e,e.return,at)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,$f(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Wf=!0);break;case 6:if(ln(i,e),un(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(at){$t(e,e.return,at)}}break;case 3:if(Tc=null,h=Zn,Zn=vc(i.containerInfo),ln(i,e),Zn=h,un(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ba(i.containerInfo)}catch(at){$t(e,e.return,at)}Wf&&(Wf=!1,Ry(e));break;case 4:l=Zn,Zn=vc(e.stateNode.containerInfo),ln(i,e),un(e),Zn=l;break;case 12:ln(i,e),un(e);break;case 31:ln(i,e),un(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,rc(e,l)));break;case 13:ln(i,e),un(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(oc=en()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,rc(e,l)));break;case 22:h=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,B=Fi,K=Ce;if(Fi=B||h,Ce=K||R,ln(i,e),Ce=K,Fi=B,un(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Fi||Ce||jr(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{E=R.stateNode;var Q=R.memoizedProps.style,q=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(at){$t(R,R.return,at)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(at){$t(R,R.return,at)}}}else if(i.tag===18){if(a===null){R=i;try{var G=R.stateNode;h?g_(G,!0):g_(R.stateNode,!1)}catch(at){$t(R,R.return,at)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,rc(e,a))));break;case 19:ln(i,e),un(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,rc(e,l)));break;case 30:break;case 21:break;default:ln(i,e),un(e)}}function un(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(yy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Jf(e);sc(e,d,h);break;case 5:var y=a.stateNode;a.flags&32&&(an(y,""),a.flags&=-33);var E=Jf(e);sc(e,E,y);break;case 3:case 4:var R=a.stateNode.containerInfo,B=Jf(e);Zf(e,B,R);break;default:throw Error(r(161))}}catch(K){$t(e,e.return,K)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ry(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ry(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Yi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ey(e,i.alternate,i),i=i.sibling}function jr(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Is(4,i,i.return),jr(i);break;case 1:Ai(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&gy(i,i.return,a),jr(i);break;case 27:hl(i.stateNode);case 26:case 5:Ai(i,i.return),jr(i);break;case 22:i.memoizedState===null&&jr(i);break;case 30:jr(i);break;default:jr(i)}e=e.sibling}}function Qi(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:Qi(h,d,a),el(4,d);break;case 1:if(Qi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){$t(l,l.return,B)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)ip(R[h],E)}catch(B){$t(l,l.return,B)}}a&&y&64&&my(d),nl(d,d.return);break;case 27:_y(d);case 26:case 5:Qi(h,d,a),a&&l===null&&y&4&&py(d),nl(d,d.return);break;case 12:Qi(h,d,a);break;case 31:Qi(h,d,a),a&&y&4&&Ay(h,d);break;case 13:Qi(h,d,a),a&&y&4&&by(h,d);break;case 22:d.memoizedState===null&&Qi(h,d,a),nl(d,d.return);break;case 30:break;default:Qi(h,d,a)}i=i.sibling}}function td(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&qo(a))}function ed(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e))}function Wn(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Cy(e,i,a,l),i=i.sibling}function Cy(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Wn(e,i,a,l),h&2048&&el(9,i);break;case 1:Wn(e,i,a,l);break;case 3:Wn(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&qo(e)));break;case 12:if(h&2048){Wn(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,y=d.id,E=d.onPostCommit;typeof E=="function"&&E(y,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){$t(i,i.return,R)}}else Wn(e,i,a,l);break;case 31:Wn(e,i,a,l);break;case 13:Wn(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?Wn(e,i,a,l):il(e,i):d._visibility&2?Wn(e,i,a,l):(d._visibility|=2,Oa(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&td(y,i);break;case 24:Wn(e,i,a,l),h&2048&&ed(i.alternate,i);break;default:Wn(e,i,a,l)}}function Oa(e,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,y=i,E=a,R=l,B=y.flags;switch(y.tag){case 0:case 11:case 15:Oa(d,y,E,R,h),el(8,y);break;case 23:break;case 22:var K=y.stateNode;y.memoizedState!==null?K._visibility&2?Oa(d,y,E,R,h):il(d,y):(K._visibility|=2,Oa(d,y,E,R,h)),h&&B&2048&&td(y.alternate,y);break;case 24:Oa(d,y,E,R,h),h&&B&2048&&ed(y.alternate,y);break;default:Oa(d,y,E,R,h)}i=i.sibling}}function il(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:il(a,l),h&2048&&td(l.alternate,l);break;case 24:il(a,l),h&2048&&ed(l.alternate,l);break;default:il(a,l)}i=i.sibling}}var sl=8192;function Da(e,i,a){if(e.subtreeFlags&sl)for(e=e.child;e!==null;)Iy(e,i,a),e=e.sibling}function Iy(e,i,a){switch(e.tag){case 26:Da(e,i,a),e.flags&sl&&e.memoizedState!==null&&kA(a,Zn,e.memoizedState,e.memoizedProps);break;case 5:Da(e,i,a);break;case 3:case 4:var l=Zn;Zn=vc(e.stateNode.containerInfo),Da(e,i,a),Zn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=sl,sl=16777216,Da(e,i,a),sl=l):Da(e,i,a));break;default:Da(e,i,a)}}function Ny(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function rl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Le=l,Dy(l,e)}Ny(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Oy(e),e=e.sibling}function Oy(e){switch(e.tag){case 0:case 11:case 15:rl(e),e.flags&2048&&Is(9,e,e.return);break;case 3:rl(e);break;case 12:rl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,ac(e)):rl(e);break;default:rl(e)}}function ac(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Le=l,Dy(l,e)}Ny(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Is(8,i,i.return),ac(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ac(i));break;default:ac(i)}e=e.sibling}}function Dy(e,i){for(;Le!==null;){var a=Le;switch(a.tag){case 0:case 11:case 15:Is(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:qo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Le=l;else t:for(a=e;Le!==null;){l=Le;var h=l.sibling,d=l.return;if(Ty(l),l===a){Le=null;break t}if(h!==null){h.return=d,Le=h;break t}Le=d}}}var ZS={getCacheForType:function(e){var i=qe(be),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return qe(be).controller.signal}},WS=typeof WeakMap=="function"?WeakMap:Map,Gt=0,ee=null,It=null,Ot=0,Xt=0,Tn=null,Ns=!1,Ma=!1,nd=!1,Xi=0,fe=0,Os=0,Br=0,id=0,Sn=0,xa=0,al=null,cn=null,sd=!1,oc=0,My=0,lc=1/0,uc=null,Ds=null,De=0,Ms=null,Va=null,$i=0,rd=0,ad=null,xy=null,ol=0,od=null;function An(){return(Gt&2)!==0&&Ot!==0?Ot&-Ot:F.T!==null?dd():cu()}function Vy(){if(Sn===0)if((Ot&536870912)===0||Ut){var e=mr;mr<<=1,(mr&3932160)===0&&(mr=262144),Sn=e}else Sn=536870912;return e=vn.current,e!==null&&(e.flags|=32),Sn}function hn(e,i,a){(e===ee&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)&&(Ua(e,0),xs(e,Ot,Sn,!1)),gr(e,a),((Gt&2)===0||e!==ee)&&(e===ee&&((Gt&2)===0&&(Br|=a),fe===4&&xs(e,Ot,Sn,!1)),bi(e))}function Uy(e,i,a){if((Gt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||Hn(e,i),h=l?nA(e,i):ud(e,i,!0),d=l;do{if(h===0){Ma&&!l&&xs(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!tA(a)){h=ud(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var E=e;h=al;var R=E.current.memoizedState.isDehydrated;if(R&&(Ua(E,y).flags|=256),y=ud(E,y,!1),y!==2){if(nd&&!R){E.errorRecoveryDisabledLanes|=d,Br|=d,h=4;break t}d=cn,cn=h,d!==null&&(cn===null?cn=d:cn.push.apply(cn,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){Ua(e,0),xs(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:xs(l,i,Sn,!Ns);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=oc+300-en(),10<h)){if(xs(l,i,Sn,!Ns),ai(l,0,!0)!==0)break t;$i=i,l.timeoutHandle=f_(Ly.bind(null,l,a,cn,uc,sd,i,Sn,Br,xa,Ns,d,"Throttled",-0,0),h);break t}Ly(l,a,cn,uc,sd,i,Sn,Br,xa,Ns,d,null,-0,0)}}break}while(!0);bi(e)}function Ly(e,i,a,l,h,d,y,E,R,B,K,Q,q,G){if(e.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},Iy(i,d,Q);var at=(d&62914560)===d?oc-en():(d&4194048)===d?My-en():0;if(at=PA(Q,at),at!==null){$i=d,e.cancelPendingCommit=at(Gy.bind(null,e,i,d,a,l,h,y,E,R,K,Q,null,q,G)),xs(e,d,y,!B);return}}Gy(e,i,d,a,l,h,y,E,R)}function tA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!yn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function xs(e,i,a,l){i&=~id,i&=~Br,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-me(h),y=1<<d;l[d]=-1,h&=~y}a!==0&&pr(e,a,i)}function cc(){return(Gt&6)===0?(ll(0),!1):!0}function ld(){if(It!==null){if(Xt===0)var e=It.return;else e=It,zi=Mr=null,bf(e),wa=null,Go=0,e=It;for(;e!==null;)dy(e.alternate,e),e=e.return;It=null}}function Ua(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,EA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$i=0,ld(),ee=e,It=a=ki(e.current,null),Ot=i,Xt=0,Tn=null,Ns=!1,Ma=Hn(e,i),nd=!1,xa=Sn=id=Br=Os=fe=0,cn=al=null,sd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-me(l),d=1<<h;i|=e[h],l&=~d}return Xi=i,Du(),a}function ky(e,i){At=null,F.H=Zo,i===ba||i===zu?(i=Wg(),Xt=3):i===ff?(i=Wg(),Xt=4):Xt=i===jf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Tn=i,It===null&&(fe=1,Wu(e,Mn(i,e.current)))}function Py(){var e=vn.current;return e===null?!0:(Ot&4194048)===Ot?Ln===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?e===Ln:!1}function zy(){var e=F.H;return F.H=Zo,e===null?Zo:e}function jy(){var e=F.A;return F.A=ZS,e}function hc(){fe=4,Ns||(Ot&4194048)!==Ot&&vn.current!==null||(Ma=!0),(Os&134217727)===0&&(Br&134217727)===0||ee===null||xs(ee,Ot,Sn,!1)}function ud(e,i,a){var l=Gt;Gt|=2;var h=zy(),d=jy();(ee!==e||Ot!==i)&&(uc=null,Ua(e,i)),i=!1;var y=fe;t:do try{if(Xt!==0&&It!==null){var E=It,R=Tn;switch(Xt){case 8:ld(),y=6;break t;case 3:case 2:case 9:case 6:vn.current===null&&(i=!0);var B=Xt;if(Xt=0,Tn=null,La(e,E,R,B),a&&Ma){y=0;break t}break;default:B=Xt,Xt=0,Tn=null,La(e,E,R,B)}}eA(),y=fe;break}catch(K){ky(e,K)}while(!0);return i&&e.shellSuspendCounter++,zi=Mr=null,Gt=l,F.H=h,F.A=d,It===null&&(ee=null,Ot=0,Du()),y}function eA(){for(;It!==null;)By(It)}function nA(e,i){var a=Gt;Gt|=2;var l=zy(),h=jy();ee!==e||Ot!==i?(uc=null,lc=en()+500,Ua(e,i)):Ma=Hn(e,i);t:do try{if(Xt!==0&&It!==null){i=It;var d=Tn;e:switch(Xt){case 1:Xt=0,Tn=null,La(e,i,d,1);break;case 2:case 9:if(Jg(d)){Xt=0,Tn=null,qy(i);break}i=function(){Xt!==2&&Xt!==9||ee!==e||(Xt=7),bi(e)},d.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Jg(d)?(Xt=0,Tn=null,qy(i)):(Xt=0,Tn=null,La(e,i,d,7));break;case 5:var y=null;switch(It.tag){case 26:y=It.memoizedState;case 5:case 27:var E=It;if(y?C_(y):E.stateNode.complete){Xt=0,Tn=null;var R=E.sibling;if(R!==null)It=R;else{var B=E.return;B!==null?(It=B,fc(B)):It=null}break e}}Xt=0,Tn=null,La(e,i,d,5);break;case 6:Xt=0,Tn=null,La(e,i,d,6);break;case 8:ld(),fe=6;break t;default:throw Error(r(462))}}iA();break}catch(K){ky(e,K)}while(!0);return zi=Mr=null,F.H=l,F.A=h,Gt=a,It!==null?0:(ee=null,Ot=0,Du(),fe)}function iA(){for(;It!==null&&!Ph();)By(It)}function By(e){var i=hy(e.alternate,e,Xi);e.memoizedProps=e.pendingProps,i===null?fc(e):It=i}function qy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=ry(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=ry(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:bf(i);default:dy(a,i),i=It=jg(i,Xi),i=hy(a,i,Xi)}e.memoizedProps=e.pendingProps,i===null?fc(e):It=i}function La(e,i,a,l){zi=Mr=null,bf(i),wa=null,Go=0;var h=i.return;try{if(FS(e,h,i,a,Ot)){fe=1,Wu(e,Mn(a,e.current)),It=null;return}}catch(d){if(h!==null)throw It=h,d;fe=1,Wu(e,Mn(a,e.current)),It=null;return}i.flags&32768?(Ut||l===1?e=!0:Ma||(Ot&536870912)!==0?e=!1:(Ns=e=!0,(l===2||l===9||l===3||l===6)&&(l=vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hy(i,e)):fc(i)}function fc(e){var i=e;do{if((i.flags&32768)!==0){Hy(i,Ns);return}e=i.return;var a=QS(i.alternate,i,Xi);if(a!==null){It=a;return}if(i=i.sibling,i!==null){It=i;return}It=i=e}while(i!==null);fe===0&&(fe=5)}function Hy(e,i){do{var a=XS(e.alternate,e);if(a!==null){a.flags&=32767,It=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){It=e;return}It=e=a}while(e!==null);fe=6,It=null}function Gy(e,i,a,l,h,d,y,E,R){e.cancelPendingCommit=null;do dc();while(De!==0);if((Gt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=$h,Bh(e,a,d,y,E,R),e===ee&&(It=ee=null,Ot=0),Va=i,Ms=e,$i=a,rd=d,ad=h,xy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,oA(us,function(){return Xy(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=it.p,it.p=2,y=Gt,Gt|=4;try{$S(e,i,a)}finally{Gt=y,it.p=h,F.T=l}}De=1,Fy(),Ky(),Yy()}}function Fy(){if(De===1){De=0;var e=Ms,i=Va,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=it.p;it.p=2;var h=Gt;Gt|=4;try{wy(i,e);var d=Td,y=Dg(e.containerInfo),E=d.focusedElem,R=d.selectionRange;if(y!==E&&E&&E.ownerDocument&&Og(E.ownerDocument.documentElement,E)){if(R!==null&&Fh(E)){var B=R.start,K=R.end;if(K===void 0&&(K=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(K,E.value.length);else{var Q=E.ownerDocument||document,q=Q&&Q.defaultView||window;if(q.getSelection){var G=q.getSelection(),at=E.textContent.length,mt=Math.min(R.start,at),te=R.end===void 0?mt:Math.min(R.end,at);!G.extend&&mt>te&&(y=te,te=mt,mt=y);var U=Ng(E,mt),O=Ng(E,te);if(U&&O&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var j=Q.createRange();j.setStart(U.node,U.offset),G.removeAllRanges(),mt>te?(G.addRange(j),G.extend(O.node,O.offset)):(j.setEnd(O.node,O.offset),G.addRange(j))}}}}for(Q=[],G=E;G=G.parentNode;)G.nodeType===1&&Q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Q.length;E++){var Y=Q[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}wc=!!Ed,Td=Ed=null}finally{Gt=h,it.p=l,F.T=a}}e.current=i,De=2}}function Ky(){if(De===2){De=0;var e=Ms,i=Va,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=it.p;it.p=2;var h=Gt;Gt|=4;try{Ey(e,i.alternate,i)}finally{Gt=h,it.p=l,F.T=a}}De=3}}function Yy(){if(De===4||De===3){De=0,iu();var e=Ms,i=Va,a=$i,l=xy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?De=5:(De=0,Va=Ms=null,Qy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ds=null),xi(a),i=i.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(qn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=F.T,h=it.p,it.p=2,F.T=null;try{for(var d=e.onRecoverableError,y=0;y<l.length;y++){var E=l[y];d(E.value,{componentStack:E.stack})}}finally{F.T=i,it.p=h}}($i&3)!==0&&dc(),bi(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===od?ol++:(ol=0,od=e):ol=0,ll(0)}}function Qy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,qo(i)))}function dc(){return Fy(),Ky(),Yy(),Xy()}function Xy(){if(De!==5)return!1;var e=Ms,i=rd;rd=0;var a=xi($i),l=F.T,h=it.p;try{it.p=32>a?32:a,F.T=null,a=ad,ad=null;var d=Ms,y=$i;if(De=0,Va=Ms=null,$i=0,(Gt&6)!==0)throw Error(r(331));var E=Gt;if(Gt|=4,Oy(d.current),Cy(d,d.current,y,a),Gt=E,ll(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(qn,d)}catch{}return!0}finally{it.p=h,F.T=l,Qy(e,i)}}function $y(e,i,a){i=Mn(a,i),i=zf(e.stateNode,i,2),e=ws(e,i,2),e!==null&&(gr(e,2),bi(e))}function $t(e,i,a){if(e.tag===3)$y(e,e,a);else for(;i!==null;){if(i.tag===3){$y(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ds===null||!Ds.has(l))){e=Mn(a,e),a=Jp(2),l=ws(i,a,2),l!==null&&(Zp(a,l,i,e),gr(l,2),bi(l));break}}i=i.return}}function cd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new WS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(nd=!0,h.add(a),e=sA.bind(null,e,i,a),i.then(e,e))}function sA(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ee===e&&(Ot&a)===a&&(fe===4||fe===3&&(Ot&62914560)===Ot&&300>en()-oc?(Gt&2)===0&&Ua(e,0):id|=a,xa===Ot&&(xa=0)),bi(e)}function Jy(e,i){i===0&&(i=uu()),e=Nr(e,i),e!==null&&(gr(e,i),bi(e))}function rA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Jy(e,a)}function aA(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Jy(e,a)}function oA(e,i){return Oe(e,i)}var mc=null,ka=null,hd=!1,gc=!1,fd=!1,Vs=0;function bi(e){e!==ka&&e.next===null&&(ka===null?mc=ka=e:ka=ka.next=e),gc=!0,hd||(hd=!0,uA())}function ll(e,i){if(!fd&&gc){fd=!0;do for(var a=!1,l=mc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var y=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-me(42|e)+1)-1,d&=h&~(y&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,e_(l,d))}else d=Ot,d=ai(l,l===ee?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Hn(l,d)||(a=!0,e_(l,d));l=l.next}while(a);fd=!1}}function lA(){Zy()}function Zy(){gc=hd=!1;var e=0;Vs!==0&&vA()&&(e=Vs);for(var i=en(),a=null,l=mc;l!==null;){var h=l.next,d=Wy(l,i);d===0?(l.next=null,a===null?mc=h:a.next=h,h===null&&(ka=a)):(a=l,(e!==0||(d&3)!==0)&&(gc=!0)),l=h}De!==0&&De!==5||ll(e),Vs!==0&&(Vs=0)}function Wy(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-me(d),E=1<<y,R=h[y];R===-1?((E&a)===0||(E&l)!==0)&&(h[y]=jh(E,i)):R<=i&&(e.expiredLanes|=E),d&=~E}if(i=ee,a=Ot,a=ai(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Xt===2||Xt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ls(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Hn(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&ls(l),xi(a)){case 2:case 8:a=_o;break;case 32:a=us;break;case 268435456:a=su;break;default:a=us}return l=t_.bind(null,e),a=Oe(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&ls(l),e.callbackPriority=2,e.callbackNode=null,2}function t_(e,i){if(De!==0&&De!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(dc()&&e.callbackNode!==a)return null;var l=Ot;return l=ai(e,e===ee?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Uy(e,l,i),Wy(e,en()),e.callbackNode!=null&&e.callbackNode===a?t_.bind(null,e):null)}function e_(e,i){if(dc())return null;Uy(e,i,!0)}function uA(){TA(function(){(Gt&6)!==0?Oe(yo,lA):Zy()})}function dd(){if(Vs===0){var e=Sa;e===0&&(e=si,si<<=1,(si&261888)===0&&(si=256)),Vs=e}return Vs}function n_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:oa(""+e)}function i_(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function cA(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=n_((h[Ve]||null).action),y=l.submitter;y&&(i=(i=y[Ve]||null)?n_(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var E=new yi("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Vs!==0){var R=y?i_(h,y):new FormData(h);xf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(E.preventDefault(),R=y?i_(h,y):new FormData(h),xf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var md=0;md<Xh.length;md++){var gd=Xh[md],hA=gd.toLowerCase(),fA=gd[0].toUpperCase()+gd.slice(1);Jn(hA,"on"+fA)}Jn(Vg,"onAnimationEnd"),Jn(Ug,"onAnimationIteration"),Jn(Lg,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(IS,"onTransitionRun"),Jn(NS,"onTransitionStart"),Jn(OS,"onTransitionCancel"),Jn(kg,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function s_(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var y=l.length-1;0<=y;y--){var E=l[y],R=E.instance,B=E.currentTarget;if(E=E.listener,R!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=B;try{d(h)}catch(K){Ou(K)}h.currentTarget=null,d=R}else for(y=0;y<l.length;y++){if(E=l[y],R=E.instance,B=E.currentTarget,E=E.listener,R!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=B;try{d(h)}catch(K){Ou(K)}h.currentTarget=null,d=R}}}}function Nt(e,i){var a=i[na];a===void 0&&(a=i[na]=new Set);var l=e+"__bubble";a.has(l)||(r_(i,e,2,!1),a.add(l))}function pd(e,i,a){var l=0;i&&(l|=4),r_(a,e,l,i)}var pc="_reactListening"+Math.random().toString(36).slice(2);function yd(e){if(!e[pc]){e[pc]=!0,To.forEach(function(a){a!=="selectionchange"&&(dA.has(a)||pd(a,!1,e),pd(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[pc]||(i[pc]=!0,pd("selectionchange",!1,i))}}function r_(e,i,a,l){switch(V_(i)){case 2:var h=BA;break;case 8:h=qA;break;default:h=Md}a=h.bind(null,i,a,e),h=void 0,!Tr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function _d(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var E=l.stateNode.containerInfo;if(E===h)break;if(y===4)for(y=l.return;y!==null;){var R=y.tag;if((R===3||R===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;E!==null;){if(y=ci(E),y===null)return;if(R=y.tag,R===5||R===6||R===26||R===27){l=d=y;continue t}E=E.parentNode}}l=l.return}gs(function(){var B=d,K=In(a),Q=[];t:{var q=Pg.get(e);if(q!==void 0){var G=yi,at=e;switch(e){case"keypress":if(Ar(a)===0)break t;case"keydown":case"keyup":G=Cu;break;case"focusin":at="focus",G=wr;break;case"focusout":at="blur",G=wr;break;case"beforeblur":case"afterblur":G=wr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=m;break;case Vg:case Ug:case Lg:G=Eu;break;case kg:G=T;break;case"scroll":case"scrollend":G=xo;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Li;break;case"toggle":case"beforetoggle":G=St}var mt=(i&4)!==0,te=!mt&&(e==="scroll"||e==="scrollend"),U=mt?q!==null?q+"Capture":null:q;mt=[];for(var O=B,j;O!==null;){var Y=O;if(j=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||j===null||U===null||(Y=Yn(O,U),Y!=null&&mt.push(cl(O,Y,j))),te)break;O=O.return}0<mt.length&&(q=new G(q,at,null,a,K),Q.push({event:q,listeners:mt}))}}if((i&7)===0){t:{if(q=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",q&&a!==Oo&&(at=a.relatedTarget||a.fromElement)&&(ci(at)||at[li]))break t;if((G||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,G?(at=a.relatedTarget||a.toElement,G=B,at=at?ci(at):null,at!==null&&(te=u(at),mt=at.tag,at!==te||mt!==5&&mt!==27&&mt!==6)&&(at=null)):(G=null,at=B),G!==at)){if(mt=Vo,Y="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Li,Y="onPointerLeave",U="onPointerEnter",O="pointer"),te=G==null?q:gn(G),j=at==null?q:gn(at),q=new mt(Y,O+"leave",G,a,K),q.target=te,q.relatedTarget=j,Y=null,ci(K)===B&&(mt=new mt(U,O+"enter",at,a,K),mt.target=j,mt.relatedTarget=te,Y=mt),te=Y,G&&at)e:{for(mt=mA,U=G,O=at,j=0,Y=U;Y;Y=mt(Y))j++;Y=0;for(var ht=O;ht;ht=mt(ht))Y++;for(;0<j-Y;)U=mt(U),j--;for(;0<Y-j;)O=mt(O),Y--;for(;j--;){if(U===O||O!==null&&U===O.alternate){mt=U;break e}U=mt(U),O=mt(O)}mt=null}else mt=null;G!==null&&a_(Q,q,G,mt,!1),at!==null&&te!==null&&a_(Q,te,at,mt,!0)}}t:{if(q=B?gn(B):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var jt=Ag;else if(Tg(q))if(bg)jt=wS;else{jt=AS;var ot=SS}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&aa(B.elementType)&&(jt=Ag):jt=bS;if(jt&&(jt=jt(e,B))){Sg(Q,jt,a,K);break t}ot&&ot(e,q,B),e==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Co(q,"number",q.value)}switch(ot=B?gn(B):window,e){case"focusin":(Tg(ot)||ot.contentEditable==="true")&&(ma=ot,Kh=B,zo=null);break;case"focusout":zo=Kh=ma=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,Mg(Q,a,K);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":Mg(Q,a,K)}var bt;if(Ht)t:{switch(e){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else da?Rr(e,a)&&(Dt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ei&&a.locale!=="ko"&&(da||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&da&&(bt=Mo()):(pi=K,Do="value"in pi?pi.value:pi.textContent,da=!0)),ot=yc(B,Dt),0<ot.length&&(Dt=new vi(Dt,e,null,a,K),Q.push({event:Dt,listeners:ot}),bt?Dt.data=bt:(bt=fa(a),bt!==null&&(Dt.data=bt)))),(bt=On?_S(e,a):vS(e,a))&&(Dt=yc(B,"onBeforeInput"),0<Dt.length&&(ot=new vi("onBeforeInput","beforeinput",null,a,K),Q.push({event:ot,listeners:Dt}),ot.data=bt)),cA(Q,e,B,a,K)}s_(Q,i)})}function cl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function yc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Yn(e,a),h!=null&&l.unshift(cl(e,h,d)),h=Yn(e,i),h!=null&&l.push(cl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function mA(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function a_(e,i,a,l,h){for(var d=i._reactName,y=[];a!==null&&a!==l;){var E=a,R=E.alternate,B=E.stateNode;if(E=E.tag,R!==null&&R===l)break;E!==5&&E!==26&&E!==27||B===null||(R=B,h?(B=Yn(a,d),B!=null&&y.unshift(cl(a,B,R))):h||(B=Yn(a,d),B!=null&&y.push(cl(a,B,R)))),a=a.return}y.length!==0&&e.push({event:i,listeners:y})}var gA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function o_(e){return(typeof e=="string"?e:""+e).replace(gA,`
`).replace(pA,"")}function l_(e,i){return i=o_(i),o_(e)===i}function Wt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||an(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&an(e,""+l);break;case"className":pn(e,"class",l);break;case"tabIndex":pn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pn(e,a,l);break;case"style":No(e,l,d);break;case"data":if(i!=="object"){pn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=oa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Wt(e,i,"name",h.name,h,null),Wt(e,i,"formEncType",h.formEncType,h,null),Wt(e,i,"formMethod",h.formMethod,h,null),Wt(e,i,"formTarget",h.formTarget,h,null)):(Wt(e,i,"encType",h.encType,h,null),Wt(e,i,"method",h.method,h,null),Wt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=oa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Kn);break;case"onScroll":l!=null&&Nt("scroll",e);break;case"onScrollEnd":l!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=oa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),sa(e,"popover",l);break;case"xlinkActuate":Ae(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ae(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ae(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ae(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ae(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ae(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":sa(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yu.get(a)||a,sa(e,a,l))}}function vd(e,i,a,l,h,d){switch(a){case"style":No(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?an(e,l):(typeof l=="number"||typeof l=="bigint")&&an(e,""+l);break;case"onScroll":l!=null&&Nt("scroll",e);break;case"onScrollEnd":l!=null&&Nt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ve]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):sa(e,a,l)}}}function Ge(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var y=a[d];if(y!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(e,i,d,y,a,null)}}h&&Wt(e,i,"srcSet",a.srcSet,a,null),l&&Wt(e,i,"src",a.src,a,null);return;case"input":Nt("invalid",e);var E=d=y=h=null,R=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":y=K;break;case"checked":R=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:Wt(e,i,l,K,a,null)}}mu(e,d,E,R,B,y,h,!1);return;case"select":Nt("invalid",e),l=y=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":y=E;break;case"multiple":l=E;default:Wt(e,i,h,E,a,null)}i=d,a=y,e.multiple=!!l,i!=null?hs(e,!!l,i,!1):a!=null&&hs(e,!!l,a,!0);return;case"textarea":Nt("invalid",e),d=h=l=null;for(y in a)if(a.hasOwnProperty(y)&&(E=a[y],E!=null))switch(y){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Wt(e,i,y,E,a,null)}fs(e,l,h,d);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Wt(e,i,R,l,a,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(l=0;l<ul.length;l++)Nt(ul[l],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Wt(e,i,B,l,a,null)}return;default:if(aa(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&vd(e,i,K,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Wt(e,i,E,l,a,null))}function yA(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,E=null,R=null,B=null,K=null;for(G in a){var Q=a[G];if(a.hasOwnProperty(G)&&Q!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=Q;default:l.hasOwnProperty(G)||Wt(e,i,G,null,l,Q)}}for(var q in l){var G=l[q];if(Q=a[q],l.hasOwnProperty(q)&&(G!=null||Q!=null))switch(q){case"type":d=G;break;case"name":h=G;break;case"checked":B=G;break;case"defaultChecked":K=G;break;case"value":y=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==Q&&Wt(e,i,q,G,l,Q)}}ra(e,y,E,R,B,K,d,h);return;case"select":G=y=E=q=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":G=R;default:l.hasOwnProperty(d)||Wt(e,i,d,null,l,R)}for(h in l)if(d=l[h],R=a[h],l.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":q=d;break;case"defaultValue":E=d;break;case"multiple":y=d;default:d!==R&&Wt(e,i,h,d,l,R)}i=E,a=y,l=G,q!=null?hs(e,!!a,q,!1):!!l!=!!a&&(i!=null?hs(e,!!a,i,!0):hs(e,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Wt(e,i,E,null,l,h)}for(y in l)if(h=l[y],d=a[y],l.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Wt(e,i,y,h,l,d)}gu(e,q,G);return;case"option":for(var at in a)if(q=a[at],a.hasOwnProperty(at)&&q!=null&&!l.hasOwnProperty(at))switch(at){case"selected":e.selected=!1;break;default:Wt(e,i,at,null,l,q)}for(R in l)if(q=l[R],G=a[R],l.hasOwnProperty(R)&&q!==G&&(q!=null||G!=null))switch(R){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Wt(e,i,R,q,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)q=a[mt],a.hasOwnProperty(mt)&&q!=null&&!l.hasOwnProperty(mt)&&Wt(e,i,mt,null,l,q);for(B in l)if(q=l[B],G=a[B],l.hasOwnProperty(B)&&q!==G&&(q!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Wt(e,i,B,q,l,G)}return;default:if(aa(i)){for(var te in a)q=a[te],a.hasOwnProperty(te)&&q!==void 0&&!l.hasOwnProperty(te)&&vd(e,i,te,void 0,l,q);for(K in l)q=l[K],G=a[K],!l.hasOwnProperty(K)||q===G||q===void 0&&G===void 0||vd(e,i,K,q,l,G);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!l.hasOwnProperty(U)&&Wt(e,i,U,null,l,q);for(Q in l)q=l[Q],G=a[Q],!l.hasOwnProperty(Q)||q===G||q==null&&G==null||Wt(e,i,Q,q,l,G)}function u_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _A(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,y=h.initiatorType,E=h.duration;if(d&&E&&u_(y)){for(y=0,E=h.responseEnd,l+=1;l<a.length;l++){var R=a[l],B=R.startTime;if(B>E)break;var K=R.transferSize,Q=R.initiatorType;K&&u_(Q)&&(R=R.responseEnd,y+=K*(R<E?1:(E-B)/(R-B)))}if(--l,i+=8*(d+y)/(h.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ed=null,Td=null;function _c(e){return e.nodeType===9?e:e.ownerDocument}function c_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function h_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Sd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ad=null;function vA(){var e=window.event;return e&&e.type==="popstate"?e===Ad?!1:(Ad=e,!0):(Ad=null,!1)}var f_=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,TA=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(e){return d_.resolve(null).then(e).catch(SA)}:f_;function SA(e){setTimeout(function(){throw e})}function Us(e){return e==="head"}function m_(e,i){var a=i,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(h),Ba(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")hl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,hl(a);for(var d=a.firstChild;d;){var y=d.nextSibling,E=d.nodeName;d[ui]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=y}}else a==="body"&&hl(e.ownerDocument.body);a=h}while(a);Ba(i)}function g_(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function bd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bd(a),ia(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function AA(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ui])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function bA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kn(e.nextSibling),e===null))return null;return e}function p_(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=kn(e.nextSibling),e===null))return null;return e}function wd(e){return e.data==="$?"||e.data==="$~"}function Rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function wA(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function kn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Cd=null;function y_(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return kn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function __(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function v_(e,i,a){switch(i=_c(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function hl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ia(e)}var Pn=new Map,E_=new Set;function vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=it.d;it.d={f:RA,r:CA,D:IA,C:NA,L:OA,m:DA,X:xA,S:MA,M:VA};function RA(){var e=Ji.f(),i=cc();return e||i}function CA(e){var i=Cn(e);i!==null&&i.tag===5&&i.type==="form"?kp(i):Ji.r(e)}var Pa=typeof document>"u"?null:document;function T_(e,i,a){var l=Pa;if(l&&typeof i=="string"&&i){var h=rn(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),E_.has(h)||(E_.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ge(i,"link",e),Se(i),l.head.appendChild(i)))}}function IA(e){Ji.D(e),T_("dns-prefetch",e,null)}function NA(e,i){Ji.C(e,i),T_("preconnect",e,i)}function OA(e,i,a){Ji.L(e,i,a);var l=Pa;if(l&&e&&i){var h='link[rel="preload"][as="'+rn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+rn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+rn(a.imageSizes)+'"]')):h+='[href="'+rn(e)+'"]';var d=h;switch(i){case"style":d=za(e);break;case"script":d=ja(e)}Pn.has(d)||(e=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Pn.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(fl(d))||i==="script"&&l.querySelector(dl(d))||(i=l.createElement("link"),Ge(i,"link",e),Se(i),l.head.appendChild(i)))}}function DA(e,i){Ji.m(e,i);var a=Pa;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+rn(l)+'"][href="'+rn(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ja(e)}if(!Pn.has(d)&&(e=A({rel:"modulepreload",href:e},i),Pn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(d)))return}l=a.createElement("link"),Ge(l,"link",e),Se(l),a.head.appendChild(l)}}}function MA(e,i,a){Ji.S(e,i,a);var l=Pa;if(l&&e){var h=hi(l).hoistableStyles,d=za(e);i=i||"default";var y=h.get(d);if(!y){var E={loading:0,preload:null};if(y=l.querySelector(fl(d)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Pn.get(d))&&Id(e,a);var R=y=l.createElement("link");Se(R),Ge(R,"link",e),R._p=new Promise(function(B,K){R.onload=B,R.onerror=K}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ec(y,i,l)}y={type:"stylesheet",instance:y,count:1,state:E},h.set(d,y)}}}function xA(e,i){Ji.X(e,i);var a=Pa;if(a&&e){var l=hi(a).hoistableScripts,h=ja(e),d=l.get(h);d||(d=a.querySelector(dl(h)),d||(e=A({src:e,async:!0},i),(i=Pn.get(h))&&Nd(e,i),d=a.createElement("script"),Se(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function VA(e,i){Ji.M(e,i);var a=Pa;if(a&&e){var l=hi(a).hoistableScripts,h=ja(e),d=l.get(h);d||(d=a.querySelector(dl(h)),d||(e=A({src:e,async:!0,type:"module"},i),(i=Pn.get(h))&&Nd(e,i),d=a.createElement("script"),Se(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function S_(e,i,a,l){var h=(h=st.current)?vc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=za(a.href),a=hi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=za(a.href);var d=hi(h).hoistableStyles,y=d.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=h.querySelector(fl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Pn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pn.set(e,a),d||UA(h,e,a,y.state))),i&&l===null)throw Error(r(528,""));return y}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ja(a),a=hi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function za(e){return'href="'+rn(e)+'"'}function fl(e){return'link[rel="stylesheet"]['+e+"]"}function A_(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function UA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ge(i,"link",a),Se(i),e.head.appendChild(i))}function ja(e){return'[src="'+rn(e)+'"]'}function dl(e){return"script[async]"+e}function b_(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+rn(a.href)+'"]');if(l)return i.instance=l,Se(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Se(l),Ge(l,"style",h),Ec(l,a.precedence,e),i.instance=l;case"stylesheet":h=za(a.href);var d=e.querySelector(fl(h));if(d)return i.state.loading|=4,i.instance=d,Se(d),d;l=A_(a),(h=Pn.get(h))&&Id(l,h),d=(e.ownerDocument||e).createElement("link"),Se(d);var y=d;return y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Ge(d,"link",l),i.state.loading|=4,Ec(d,a.precedence,e),i.instance=d;case"script":return d=ja(a.src),(h=e.querySelector(dl(d)))?(i.instance=h,Se(h),h):(l=a,(h=Pn.get(d))&&(l=A({},a),Nd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Se(h),Ge(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ec(l,a.precedence,e));return i.instance}function Ec(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,y=0;y<l.length;y++){var E=l[y];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Id(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Nd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Tc=null;function w_(e,i,a){if(Tc===null){var l=new Map,h=Tc=new Map;h.set(a,l)}else h=Tc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ui]||d[Te]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=e+y;var E=l.get(y);E?E.push(d):l.set(y,[d])}}return l}function R_(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function LA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function C_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function kA(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=za(l.href),d=i.querySelector(fl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Sc.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Se(d);return}d=i.ownerDocument||i,l=A_(l),(h=Pn.get(h))&&Id(l,h),d=d.createElement("link"),Se(d);var y=d;y._p=new Promise(function(E,R){y.onload=E,y.onerror=R}),Ge(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Sc.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Od=0;function PA(e,i){return e.stylesheets&&e.count===0&&bc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&bc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&Od===0&&(Od=62500*_A());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&bc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Od?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ac=null;function bc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ac=new Map,i.forEach(zA,e),Ac=null,Sc.call(e))}function zA(e,i){if(!(i.state.loading&4)){var a=Ac.get(e);if(a)var l=a.get(null);else{a=new Map,Ac.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(a.set(y.dataset.precedence,y),l=y)}l&&a.set(null,l)}h=i.instance,y=h.getAttribute("data-precedence"),d=a.get(y)||l,d===l&&a.set(null,h),a.set(y,h),this.count++,l=Sc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var ml={$$typeof:dt,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function jA(e,i,a,l,h,d,y,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oi(0),this.hiddenUpdates=oi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function I_(e,i,a,l,h,d,y,E,R,B,K,Q){return e=new jA(e,i,a,y,R,B,K,Q,E),i=1,d===!0&&(i|=24),d=_n(3,null,null,i),e.current=d,d.stateNode=e,i=uf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},df(d),e}function N_(e){return e?(e=ya,e):ya}function O_(e,i,a,l,h,d){h=N_(h),l.context===null?l.context=h:l.pendingContext=h,l=bs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ws(e,l,i),a!==null&&(hn(a,e,i),Ko(a,e,i))}function D_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Dd(e,i){D_(e,i),(e=e.alternate)&&D_(e,i)}function M_(e){if(e.tag===13||e.tag===31){var i=Nr(e,67108864);i!==null&&hn(i,e,67108864),Dd(e,67108864)}}function x_(e){if(e.tag===13||e.tag===31){var i=An();i=yr(i);var a=Nr(e,i);a!==null&&hn(a,e,i),Dd(e,i)}}var wc=!0;function BA(e,i,a,l){var h=F.T;F.T=null;var d=it.p;try{it.p=2,Md(e,i,a,l)}finally{it.p=d,F.T=h}}function qA(e,i,a,l){var h=F.T;F.T=null;var d=it.p;try{it.p=8,Md(e,i,a,l)}finally{it.p=d,F.T=h}}function Md(e,i,a,l){if(wc){var h=xd(l);if(h===null)_d(e,i,l,Rc,a),U_(e,l);else if(GA(h,e,i,a,l))l.stopPropagation();else if(U_(e,l),i&4&&-1<HA.indexOf(e)){for(;h!==null;){var d=Cn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=ri(d.pendingLanes);if(y!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;y;){var R=1<<31-me(y);E.entanglements[1]|=R,y&=~R}bi(d),(Gt&6)===0&&(lc=en()+500,ll(0))}}break;case 31:case 13:E=Nr(d,2),E!==null&&hn(E,d,2),cc(),Dd(d,2)}if(d=xd(l),d===null&&_d(e,i,l,Rc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else _d(e,i,l,null,a)}}function xd(e){return e=In(e),Vd(e)}var Rc=null;function Vd(e){if(Rc=null,e=ci(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===31){if(e=g(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Rc=e,null}function V_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dr()){case yo:return 2;case _o:return 8;case us:case zh:return 32;case su:return 268435456;default:return 32}default:return 32}}var Ud=!1,Ls=null,ks=null,Ps=null,gl=new Map,pl=new Map,zs=[],HA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(e,i){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(i.pointerId)}}function yl(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Cn(i),i!==null&&M_(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function GA(e,i,a,l,h){switch(i){case"focusin":return Ls=yl(Ls,e,i,a,l,h),!0;case"dragenter":return ks=yl(ks,e,i,a,l,h),!0;case"mouseover":return Ps=yl(Ps,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return gl.set(d,yl(gl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,pl.set(d,yl(pl.get(d)||null,e,i,a,l,h)),!0}return!1}function L_(e){var i=ci(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,Gn(e.priority,function(){x_(a)});return}}else if(i===31){if(i=g(a),i!==null){e.blockedOn=i,Gn(e.priority,function(){x_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=xd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Oo=l,a.target.dispatchEvent(l),Oo=null}else return i=Cn(a),i!==null&&M_(i),e.blockedOn=a,!1;i.shift()}return!0}function k_(e,i,a){Cc(e)&&a.delete(i)}function FA(){Ud=!1,Ls!==null&&Cc(Ls)&&(Ls=null),ks!==null&&Cc(ks)&&(ks=null),Ps!==null&&Cc(Ps)&&(Ps=null),gl.forEach(k_),pl.forEach(k_)}function Ic(e,i){e.blockedOn===i&&(e.blockedOn=null,Ud||(Ud=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,FA)))}var Nc=null;function P_(e){Nc!==e&&(Nc=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Nc===e&&(Nc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Vd(l||a)===null)continue;break}var d=Cn(a);d!==null&&(e.splice(i,3),i-=3,xf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ba(e){function i(R){return Ic(R,e)}Ls!==null&&Ic(Ls,e),ks!==null&&Ic(ks,e),Ps!==null&&Ic(Ps,e),gl.forEach(i),pl.forEach(i);for(var a=0;a<zs.length;a++){var l=zs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zs.length&&(a=zs[0],a.blockedOn===null);)L_(a),a.blockedOn===null&&zs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],y=h[Ve]||null;if(typeof d=="function")y||P_(a);else if(y){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[Ve]||null)E=y.formAction;else if(Vd(h)!==null)continue}else E=y.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),P_(a)}}}function z_(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Ld(e){this._internalRoot=e}Oc.prototype.render=Ld.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=An();O_(a,l,e,i,null,null)},Oc.prototype.unmount=Ld.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;O_(e.current,2,null,e,null,null),cc(),i[li]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var i=cu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<zs.length&&i!==0&&i<zs[a].priority;a++);zs.splice(a,0,e),a===0&&L_(e)}};var j_=t.version;if(j_!=="19.2.0")throw Error(r(527,j_,"19.2.0"));it.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=_(i),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var KA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{qn=Dc.inject(KA),ze=Dc}catch{}}return vl.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",h=Yp,d=Qp,y=Xp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=I_(e,1,!1,null,null,a,l,null,h,d,y,z_),e[li]=i.current,yd(e),new Ld(i)},vl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,h="",d=Yp,y=Qp,E=Xp,R=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),i=I_(e,1,!0,i,a??null,l,h,R,d,y,E,z_),i.context=N_(null),a=i.current,l=An(),l=yr(l),h=bs(l),h.callback=null,ws(a,h,l),a=l,i.current.lanes=a,gr(i,a),bi(i),e[li]=i.current,yd(e),new Oc(i)},vl.version="19.2.0",vl}var $_;function i1(){if($_)return zd.exports;$_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),zd.exports=n1(),zd.exports}var s1=i1();const r1=GE(s1),a1=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},o1=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],g=s[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;t[r++]=String.fromCharCode(55296+(p>>10)),t[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],f=s[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},KE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,g=f?s[o+1]:0,p=o+2<s.length,_=p?s[o+2]:0,S=u>>2,A=(u&3)<<4|g>>4;let I=(g&15)<<2|_>>6,k=_&63;p||(k=64,f||(I=64)),r.push(n[S],n[A],n[I],n[k])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(FE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):o1(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const _=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||_==null||A==null)throw new l1;const I=u<<2|g>>4;if(r.push(I),_!==64){const k=g<<4&240|_>>2;if(r.push(k),A!==64){const $=_<<6&192|A;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class l1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u1=function(s){const t=FE(s);return KE.encodeByteArray(t,!0)},Jc=function(s){return u1(s).replace(/\./g,"")},YE=function(s){try{return KE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=()=>c1().__FIREBASE_DEFAULTS__,f1=()=>{if(typeof process>"u"||typeof J_>"u")return;const s=J_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},d1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&YE(s[1]);return t&&JSON.parse(t)},yh=()=>{try{return a1()||h1()||f1()||d1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},QE=s=>{var t,n;return(n=(t=yh())==null?void 0:t.emulatorHosts)==null?void 0:n[s]},m1=s=>{const t=QE(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},XE=()=>{var s;return(s=yh())==null?void 0:s.config},$E=s=>{var t;return(t=yh())==null?void 0:t[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function JE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Jc(JSON.stringify(n)),Jc(JSON.stringify(f)),""].join(".")}const Rl={};function y1(){const s={prod:[],emulator:[]};for(const t of Object.keys(Rl))Rl[t]?s.emulator.push(t):s.prod.push(t);return s}function _1(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let Z_=!1;function ZE(s,t){if(typeof window>"u"||typeof document>"u"||!oo(window.location.host)||Rl[s]===t||Rl[s]||Z_)return;Rl[s]=t;function n(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=y1().prod.length>0;function f(){const I=document.getElementById(r);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function p(I,k){I.setAttribute("width","24"),I.setAttribute("id",k),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Z_=!0,f()},I}function S(I,k){I.setAttribute("id",k),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function A(){const I=_1(r),k=n("text"),$=document.getElementById(k)||document.createElement("span"),W=n("learnmore"),tt=document.getElementById(W)||document.createElement("a"),gt=n("preprendIcon"),_t=document.getElementById(gt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const dt=I.element;g(dt),S(tt,W);const Pt=_();p(_t,gt),dt.append(_t,$,tt,Pt),document.body.appendChild(dt)}u?($.innerText="Preview backend disconnected.",_t.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_t.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function E1(){var t;const s=(t=yh())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S1(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function A1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b1(){const s=tn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function w1(){return!E1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R1(){try{return typeof indexedDB=="object"}catch{return!1}}function C1(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="FirebaseError";class as extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=I1,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?N1(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new as(o,g,r)}}function N1(s,t){return s.replace(O1,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const O1=/\{\$([^}]+)}/g;function D1(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Fr(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=t[o];if(W_(u)&&W_(f)){if(!Fr(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function W_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){const t=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Tl(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Sl(s){const t=s.indexOf("?");if(!t)return"";const n=s.indexOf("#",t);return s.substring(t,n>0?n:void 0)}function M1(s,t){const n=new x1(s,t);return n.subscribe.bind(n)}class x1{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V1(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=Hd),o.error===void 0&&(o.error=Hd),o.complete===void 0&&(o.complete=Hd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V1(s,t){if(typeof s!="object"||s===null)return!1;for(const n of t)if(n in s&&typeof s[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(s){return s&&s._delegate?s._delegate:s}class Kr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new g1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(k1(t))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=qr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qr){return this.instances.has(t)}getOptions(t=qr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L1(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=qr){return this.component?this.component.multipleInstances?t:qr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L1(s){return s===qr?void 0:s}function k1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new U1(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Mt||(Mt={}));const z1={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},j1=Mt.INFO,B1={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},q1=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=B1[t];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Nm{constructor(t){this.name=t,this._logLevel=j1,this._logHandler=q1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?z1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const H1=(s,t)=>t.some(n=>s instanceof n);let tv,ev;function G1(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F1(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WE=new WeakMap,em=new WeakMap,t0=new WeakMap,Gd=new WeakMap,Om=new WeakMap;function K1(s){const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Ys(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&WE.set(n,s)}).catch(()=>{}),Om.set(t,s),t}function Y1(s){if(em.has(s))return;const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});em.set(s,t)}let nm={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return em.get(s);if(t==="objectStoreNames")return s.objectStoreNames||t0.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ys(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Q1(s){nm=s(nm)}function X1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(Fd(this),t,...n);return t0.set(r,t.sort?t.sort():[t]),Ys(r)}:F1().includes(s)?function(...t){return s.apply(Fd(this),t),Ys(WE.get(this))}:function(...t){return Ys(s.apply(Fd(this),t))}}function $1(s){return typeof s=="function"?X1(s):(s instanceof IDBTransaction&&Y1(s),H1(s,G1())?new Proxy(s,nm):s)}function Ys(s){if(s instanceof IDBRequest)return K1(s);if(Gd.has(s))return Gd.get(s);const t=$1(s);return t!==s&&(Gd.set(s,t),Om.set(t,s)),t}const Fd=s=>Om.get(s);function J1(s,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,t),g=Ys(f);return r&&f.addEventListener("upgradeneeded",p=>{r(Ys(f.result),p.oldVersion,p.newVersion,Ys(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const Z1=["get","getKey","getAll","getAllKeys","count"],W1=["put","add","delete","clear"],Kd=new Map;function nv(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Kd.get(t))return Kd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=W1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Z1.includes(n)))return;const u=async function(f,...g){const p=this.transaction(f,o?"readwrite":"readonly");let _=p.store;return r&&(_=_.index(g.shift())),(await Promise.all([_[n](...g),o&&p.done]))[0]};return Kd.set(t,u),u}Q1(s=>({...s,get:(t,n,r)=>nv(t,n)||s.get(t,n,r),has:(t,n)=>!!nv(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eb(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const im="@firebase/app",iv="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Nm("@firebase/app"),nb="@firebase/app-compat",ib="@firebase/analytics-compat",sb="@firebase/analytics",rb="@firebase/app-check-compat",ab="@firebase/app-check",ob="@firebase/auth",lb="@firebase/auth-compat",ub="@firebase/database",cb="@firebase/data-connect",hb="@firebase/database-compat",fb="@firebase/functions",db="@firebase/functions-compat",mb="@firebase/installations",gb="@firebase/installations-compat",pb="@firebase/messaging",yb="@firebase/messaging-compat",_b="@firebase/performance",vb="@firebase/performance-compat",Eb="@firebase/remote-config",Tb="@firebase/remote-config-compat",Sb="@firebase/storage",Ab="@firebase/storage-compat",bb="@firebase/firestore",wb="@firebase/ai",Rb="@firebase/firestore-compat",Cb="firebase",Ib="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="[DEFAULT]",Nb={[im]:"fire-core",[nb]:"fire-core-compat",[sb]:"fire-analytics",[ib]:"fire-analytics-compat",[ab]:"fire-app-check",[rb]:"fire-app-check-compat",[ob]:"fire-auth",[lb]:"fire-auth-compat",[ub]:"fire-rtdb",[cb]:"fire-data-connect",[hb]:"fire-rtdb-compat",[fb]:"fire-fn",[db]:"fire-fn-compat",[mb]:"fire-iid",[gb]:"fire-iid-compat",[pb]:"fire-fcm",[yb]:"fire-fcm-compat",[_b]:"fire-perf",[vb]:"fire-perf-compat",[Eb]:"fire-rc",[Tb]:"fire-rc-compat",[Sb]:"fire-gcs",[Ab]:"fire-gcs-compat",[bb]:"fire-fst",[Rb]:"fire-fst-compat",[wb]:"fire-vertex","fire-js":"fire-js",[Cb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,Ob=new Map,rm=new Map;function sv(s,t){try{s.container.addComponent(t)}catch(n){ns.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function to(s){const t=s.name;if(rm.has(t))return ns.debug(`There were multiple attempts to register component ${t}.`),!1;rm.set(t,s);for(const n of Zc.values())sv(n,s);for(const n of Ob.values())sv(n,s);return!0}function Dm(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function bn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new Gl("app","Firebase",Db);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=Ib;function e0(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:sm,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw Qs.create("bad-app-name",{appName:String(o)});if(n||(n=XE()),!n)throw Qs.create("no-options");const u=Zc.get(o);if(u){if(Fr(n,u.options)&&Fr(r,u.config))return u;throw Qs.create("duplicate-app",{appName:o})}const f=new P1(o);for(const p of rm.values())f.addComponent(p);const g=new Mb(n,r,f);return Zc.set(o,g),g}function n0(s=sm){const t=Zc.get(s);if(!t&&s===sm&&XE())return e0();if(!t)throw Qs.create("no-app",{appName:s});return t}function Xs(s,t,n){let r=Nb[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${t}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ns.warn(f.join(" "));return}to(new Kr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebase-heartbeat-database",Vb=1,xl="firebase-heartbeat-store";let Yd=null;function i0(){return Yd||(Yd=J1(xb,Vb,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(xl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Qs.create("idb-open",{originalErrorMessage:s.message})})),Yd}async function Ub(s){try{const n=(await i0()).transaction(xl),r=await n.objectStore(xl).get(s0(s));return await n.done,r}catch(t){if(t instanceof as)ns.warn(t.message);else{const n=Qs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ns.warn(n.message)}}}async function rv(s,t){try{const r=(await i0()).transaction(xl,"readwrite");await r.objectStore(xl).put(t,s0(s)),await r.done}catch(n){if(n instanceof as)ns.warn(n.message);else{const r=Qs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ns.warn(r.message)}}}function s0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1024,kb=30;class Pb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=av();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>kb){const f=Bb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=av(),{heartbeatsToSend:r,unsentEntries:o}=zb(this._heartbeatsCache.heartbeats),u=Jc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ns.warn(n),""}}}function av(){return new Date().toISOString().substring(0,10)}function zb(s,t=Lb){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),ov(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),ov(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R1()?C1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ub(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ov(s){return Jc(JSON.stringify({version:2,heartbeats:s})).length}function Bb(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(s){to(new Kr("platform-logger",t=>new tb(t),"PRIVATE")),to(new Kr("heartbeat",t=>new Pb(t),"PRIVATE")),Xs(im,iv,s),Xs(im,iv,"esm2020"),Xs("fire-js","")}qb("");var Hb="firebase",Gb="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(Hb,Gb,"app");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,r0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function C(){}C.prototype=b.prototype,N.F=b.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(x,D,L){for(var w=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)w[Lt-2]=arguments[Lt];return b.prototype[D].apply(x,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,b,C){C||(C=0);const x=Array(16);if(typeof b=="string")for(var D=0;D<16;++D)x[D]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(D=0;D<16;++D)x[D]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=N.g[0],C=N.g[1],D=N.g[2];let L=N.g[3],w;w=b+(L^C&(D^L))+x[0]+3614090360&4294967295,b=C+(w<<7&4294967295|w>>>25),w=L+(D^b&(C^D))+x[1]+3905402710&4294967295,L=b+(w<<12&4294967295|w>>>20),w=D+(C^L&(b^C))+x[2]+606105819&4294967295,D=L+(w<<17&4294967295|w>>>15),w=C+(b^D&(L^b))+x[3]+3250441966&4294967295,C=D+(w<<22&4294967295|w>>>10),w=b+(L^C&(D^L))+x[4]+4118548399&4294967295,b=C+(w<<7&4294967295|w>>>25),w=L+(D^b&(C^D))+x[5]+1200080426&4294967295,L=b+(w<<12&4294967295|w>>>20),w=D+(C^L&(b^C))+x[6]+2821735955&4294967295,D=L+(w<<17&4294967295|w>>>15),w=C+(b^D&(L^b))+x[7]+4249261313&4294967295,C=D+(w<<22&4294967295|w>>>10),w=b+(L^C&(D^L))+x[8]+1770035416&4294967295,b=C+(w<<7&4294967295|w>>>25),w=L+(D^b&(C^D))+x[9]+2336552879&4294967295,L=b+(w<<12&4294967295|w>>>20),w=D+(C^L&(b^C))+x[10]+4294925233&4294967295,D=L+(w<<17&4294967295|w>>>15),w=C+(b^D&(L^b))+x[11]+2304563134&4294967295,C=D+(w<<22&4294967295|w>>>10),w=b+(L^C&(D^L))+x[12]+1804603682&4294967295,b=C+(w<<7&4294967295|w>>>25),w=L+(D^b&(C^D))+x[13]+4254626195&4294967295,L=b+(w<<12&4294967295|w>>>20),w=D+(C^L&(b^C))+x[14]+2792965006&4294967295,D=L+(w<<17&4294967295|w>>>15),w=C+(b^D&(L^b))+x[15]+1236535329&4294967295,C=D+(w<<22&4294967295|w>>>10),w=b+(D^L&(C^D))+x[1]+4129170786&4294967295,b=C+(w<<5&4294967295|w>>>27),w=L+(C^D&(b^C))+x[6]+3225465664&4294967295,L=b+(w<<9&4294967295|w>>>23),w=D+(b^C&(L^b))+x[11]+643717713&4294967295,D=L+(w<<14&4294967295|w>>>18),w=C+(L^b&(D^L))+x[0]+3921069994&4294967295,C=D+(w<<20&4294967295|w>>>12),w=b+(D^L&(C^D))+x[5]+3593408605&4294967295,b=C+(w<<5&4294967295|w>>>27),w=L+(C^D&(b^C))+x[10]+38016083&4294967295,L=b+(w<<9&4294967295|w>>>23),w=D+(b^C&(L^b))+x[15]+3634488961&4294967295,D=L+(w<<14&4294967295|w>>>18),w=C+(L^b&(D^L))+x[4]+3889429448&4294967295,C=D+(w<<20&4294967295|w>>>12),w=b+(D^L&(C^D))+x[9]+568446438&4294967295,b=C+(w<<5&4294967295|w>>>27),w=L+(C^D&(b^C))+x[14]+3275163606&4294967295,L=b+(w<<9&4294967295|w>>>23),w=D+(b^C&(L^b))+x[3]+4107603335&4294967295,D=L+(w<<14&4294967295|w>>>18),w=C+(L^b&(D^L))+x[8]+1163531501&4294967295,C=D+(w<<20&4294967295|w>>>12),w=b+(D^L&(C^D))+x[13]+2850285829&4294967295,b=C+(w<<5&4294967295|w>>>27),w=L+(C^D&(b^C))+x[2]+4243563512&4294967295,L=b+(w<<9&4294967295|w>>>23),w=D+(b^C&(L^b))+x[7]+1735328473&4294967295,D=L+(w<<14&4294967295|w>>>18),w=C+(L^b&(D^L))+x[12]+2368359562&4294967295,C=D+(w<<20&4294967295|w>>>12),w=b+(C^D^L)+x[5]+4294588738&4294967295,b=C+(w<<4&4294967295|w>>>28),w=L+(b^C^D)+x[8]+2272392833&4294967295,L=b+(w<<11&4294967295|w>>>21),w=D+(L^b^C)+x[11]+1839030562&4294967295,D=L+(w<<16&4294967295|w>>>16),w=C+(D^L^b)+x[14]+4259657740&4294967295,C=D+(w<<23&4294967295|w>>>9),w=b+(C^D^L)+x[1]+2763975236&4294967295,b=C+(w<<4&4294967295|w>>>28),w=L+(b^C^D)+x[4]+1272893353&4294967295,L=b+(w<<11&4294967295|w>>>21),w=D+(L^b^C)+x[7]+4139469664&4294967295,D=L+(w<<16&4294967295|w>>>16),w=C+(D^L^b)+x[10]+3200236656&4294967295,C=D+(w<<23&4294967295|w>>>9),w=b+(C^D^L)+x[13]+681279174&4294967295,b=C+(w<<4&4294967295|w>>>28),w=L+(b^C^D)+x[0]+3936430074&4294967295,L=b+(w<<11&4294967295|w>>>21),w=D+(L^b^C)+x[3]+3572445317&4294967295,D=L+(w<<16&4294967295|w>>>16),w=C+(D^L^b)+x[6]+76029189&4294967295,C=D+(w<<23&4294967295|w>>>9),w=b+(C^D^L)+x[9]+3654602809&4294967295,b=C+(w<<4&4294967295|w>>>28),w=L+(b^C^D)+x[12]+3873151461&4294967295,L=b+(w<<11&4294967295|w>>>21),w=D+(L^b^C)+x[15]+530742520&4294967295,D=L+(w<<16&4294967295|w>>>16),w=C+(D^L^b)+x[2]+3299628645&4294967295,C=D+(w<<23&4294967295|w>>>9),w=b+(D^(C|~L))+x[0]+4096336452&4294967295,b=C+(w<<6&4294967295|w>>>26),w=L+(C^(b|~D))+x[7]+1126891415&4294967295,L=b+(w<<10&4294967295|w>>>22),w=D+(b^(L|~C))+x[14]+2878612391&4294967295,D=L+(w<<15&4294967295|w>>>17),w=C+(L^(D|~b))+x[5]+4237533241&4294967295,C=D+(w<<21&4294967295|w>>>11),w=b+(D^(C|~L))+x[12]+1700485571&4294967295,b=C+(w<<6&4294967295|w>>>26),w=L+(C^(b|~D))+x[3]+2399980690&4294967295,L=b+(w<<10&4294967295|w>>>22),w=D+(b^(L|~C))+x[10]+4293915773&4294967295,D=L+(w<<15&4294967295|w>>>17),w=C+(L^(D|~b))+x[1]+2240044497&4294967295,C=D+(w<<21&4294967295|w>>>11),w=b+(D^(C|~L))+x[8]+1873313359&4294967295,b=C+(w<<6&4294967295|w>>>26),w=L+(C^(b|~D))+x[15]+4264355552&4294967295,L=b+(w<<10&4294967295|w>>>22),w=D+(b^(L|~C))+x[6]+2734768916&4294967295,D=L+(w<<15&4294967295|w>>>17),w=C+(L^(D|~b))+x[13]+1309151649&4294967295,C=D+(w<<21&4294967295|w>>>11),w=b+(D^(C|~L))+x[4]+4149444226&4294967295,b=C+(w<<6&4294967295|w>>>26),w=L+(C^(b|~D))+x[11]+3174756917&4294967295,L=b+(w<<10&4294967295|w>>>22),w=D+(b^(L|~C))+x[2]+718787259&4294967295,D=L+(w<<15&4294967295|w>>>17),w=C+(L^(D|~b))+x[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.v=function(N,b){b===void 0&&(b=N.length);const C=b-this.blockSize,x=this.C;let D=this.h,L=0;for(;L<b;){if(D==0)for(;L<=C;)o(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<b;)if(x[D++]=N.charCodeAt(L++),D==this.blockSize){o(this,x),D=0;break}}else for(;L<b;)if(x[D++]=N[L++],D==this.blockSize){o(this,x),D=0;break}}this.h=D,this.o+=b},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,C=0;C<4;++C)for(let x=0;x<32;x+=8)N[b++]=this.g[C]>>>x&255;return N};function u(N,b){var C=g;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=b(N)}function f(N,b){this.h=b;const C=[];let x=!0;for(let D=N.length-1;D>=0;D--){const L=N[D]|0;x&&L==b||(C[D]=L,x=!1)}this.g=C}var g={};function p(N){return-128<=N&&N<128?u(N,function(b){return new f([b|0],b<0?-1:0)}):new f([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return A;if(N<0)return tt(_(-N));const b=[];let C=1;for(let x=0;N>=C;x++)b[x]=N/C|0,C*=4294967296;return new f(b,0)}function S(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return tt(S(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(b,8));let x=A;for(let L=0;L<N.length;L+=8){var D=Math.min(8,N.length-L);const w=parseInt(N.substring(L,L+D),b);D<8?(D=_(Math.pow(b,D)),x=x.j(D).add(_(w))):(x=x.j(C),x=x.add(_(w)))}return x}var A=p(0),I=p(1),k=p(16777216);s=f.prototype,s.m=function(){if(W(this))return-tt(this).m();let N=0,b=1;for(let C=0;C<this.g.length;C++){const x=this.i(C);N+=(x>=0?x:4294967296+x)*b,b*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if($(this))return"0";if(W(this))return"-"+tt(this).toString(N);const b=_(Math.pow(N,6));var C=this;let x="";for(;;){const D=Pt(C,b).g;C=gt(C,D.j(b));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=D,$(C))return L+x;for(;L.length<6;)L="0"+L;x=L+x}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function $(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function W(N){return N.h==-1}s.l=function(N){return N=gt(this,N),W(N)?-1:$(N)?0:1};function tt(N){const b=N.g.length,C=[];for(let x=0;x<b;x++)C[x]=~N.g[x];return new f(C,~N.h).add(I)}s.abs=function(){return W(this)?tt(this):this},s.add=function(N){const b=Math.max(this.g.length,N.g.length),C=[];let x=0;for(let D=0;D<=b;D++){let L=x+(this.i(D)&65535)+(N.i(D)&65535),w=(L>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);x=w>>>16,L&=65535,w&=65535,C[D]=w<<16|L}return new f(C,C[C.length-1]&-2147483648?-1:0)};function gt(N,b){return N.add(tt(b))}s.j=function(N){if($(this)||$(N))return A;if(W(this))return W(N)?tt(this).j(tt(N)):tt(tt(this).j(N));if(W(N))return tt(this.j(tt(N)));if(this.l(k)<0&&N.l(k)<0)return _(this.m()*N.m());const b=this.g.length+N.g.length,C=[];for(var x=0;x<2*b;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(let D=0;D<N.g.length;D++){const L=this.i(x)>>>16,w=this.i(x)&65535,Lt=N.i(D)>>>16,de=N.i(D)&65535;C[2*x+2*D]+=w*de,_t(C,2*x+2*D),C[2*x+2*D+1]+=L*de,_t(C,2*x+2*D+1),C[2*x+2*D+1]+=w*Lt,_t(C,2*x+2*D+1),C[2*x+2*D+2]+=L*Lt,_t(C,2*x+2*D+2)}for(N=0;N<b;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=b;N<2*b;N++)C[N]=0;return new f(C,0)};function _t(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function dt(N,b){this.g=N,this.h=b}function Pt(N,b){if($(b))throw Error("division by zero");if($(N))return new dt(A,A);if(W(N))return b=Pt(tt(N),b),new dt(tt(b.g),tt(b.h));if(W(b))return b=Pt(N,tt(b)),new dt(tt(b.g),b.h);if(N.g.length>30){if(W(N)||W(b))throw Error("slowDivide_ only works with positive integers.");for(var C=I,x=b;x.l(N)<=0;)C=zt(C),x=zt(x);var D=Rt(C,1),L=Rt(x,1);for(x=Rt(x,2),C=Rt(C,2);!$(x);){var w=L.add(x);w.l(N)<=0&&(D=D.add(C),L=w),x=Rt(x,1),C=Rt(C,1)}return b=gt(N,D.j(b)),new dt(D,b)}for(D=A;N.l(b)>=0;){for(C=Math.max(1,Math.floor(N.m()/b.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),L=_(C),w=L.j(b);W(w)||w.l(N)>0;)C-=x,L=_(C),w=L.j(b);$(L)&&(L=I),D=D.add(L),N=gt(N,w)}return new dt(D,N)}s.B=function(N){return Pt(this,N).h},s.and=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let x=0;x<b;x++)C[x]=this.i(x)&N.i(x);return new f(C,this.h&N.h)},s.or=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let x=0;x<b;x++)C[x]=this.i(x)|N.i(x);return new f(C,this.h|N.h)},s.xor=function(N){const b=Math.max(this.g.length,N.g.length),C=[];for(let x=0;x<b;x++)C[x]=this.i(x)^N.i(x);return new f(C,this.h^N.h)};function zt(N){const b=N.g.length+1,C=[];for(let x=0;x<b;x++)C[x]=N.i(x)<<1|N.i(x-1)>>>31;return new f(C,N.h)}function Rt(N,b){const C=b>>5;b%=32;const x=N.g.length-C,D=[];for(let L=0;L<x;L++)D[L]=b>0?N.i(L+C)>>>b|N.i(L+C+1)<<32-b:N.i(L+C);return new f(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,r0=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=S,$s=f}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a0,Al,o0,jc,am,l0,u0,c0;(function(){var s,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mc=="object"&&Mc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)t:{var v=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var P=c[T];if(!(P in v))break t;v=v[P]}c=c[c.length-1],T=v[c],m=m(T),m!=T&&m!=null&&t(v,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function p(c,m,v){return c.call.apply(c.bind,arguments)}function _(c,m,v){return _=p,_.apply(null,arguments)}function S(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function A(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(T,P,H){for(var et=Array(arguments.length-2),St=2;St<arguments.length;St++)et[St-2]=arguments[St];return m.prototype[P].apply(T,et)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function k(c){const m=c.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=c[T];return v}return[]}function $(c,m){for(let T=1;T<arguments.length;T++){const P=arguments[T];var v=typeof P;if(v=v!="object"?v:P?Array.isArray(P)?"array":v:"null",v=="array"||v=="object"&&typeof P.length=="number"){v=c.length||0;const H=P.length||0;c.length=v+H;for(let et=0;et<H;et++)c[v+et]=P[et]}else c.push(P)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function tt(c){f.setTimeout(()=>{throw c},0)}function gt(){var c=N;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class _t{constructor(){this.h=this.g=null}add(m,v){const T=dt.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var dt=new W(()=>new Pt,c=>c.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,Rt=!1,N=new _t,b=()=>{const c=Promise.resolve(void 0);zt=()=>{c.then(C)}};function C(){for(var c;c=gt();){try{c.h.call(c.g)}catch(v){tt(v)}var m=dt;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}Rt=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function Lt(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}A(Lt,D),Lt.prototype.init=function(c,m){const v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Lt.Z.h.call(this)},Lt.prototype.h=function(){Lt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),F=0;function it(c,m,v,T,P){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=P,this.key=++F,this.da=this.fa=!1}function ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ct(c,m,v){for(const T in c)m.call(v,c[T],T,c)}function qt(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function M(c){const m={};for(const v in c)m[v]=c[v];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(c,m){let v,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(v in T)c[v]=T[v];for(let H=0;H<z.length;H++)v=z[H],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function nt(c){this.src=c,this.g={},this.h=0}nt.prototype.add=function(c,m,v,T,P){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const et=st(c,m,T,P);return et>-1?(m=c[et],v||(m.fa=!1)):(m=new it(m,this.src,H,!!T,P),m.fa=v,c.push(m)),m};function lt(c,m){const v=m.type;if(v in c.g){var T=c.g[v],P=Array.prototype.indexOf.call(T,m,void 0),H;(H=P>=0)&&Array.prototype.splice.call(T,P,1),H&&(ct(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function st(c,m,v,T){for(let P=0;P<c.length;++P){const H=c[P];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return P}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),Kt={};function Yt(c,m,v,T,P){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Yt(c,m[H],v,T,P);return null}return v=po(v),c&&c[de]?c.J(m,v,g(T)?!!T.capture:!1,P):mn(c,m,v,!1,T,P)}function mn(c,m,v,T,P,H){if(!m)throw Error("Invalid event type");const et=g(P)?!!P.capture:!!P;let St=fr(c);if(St||(c[wt]=St=new nt(c)),v=St.add(m,v,T,et,H),v.proxy)return v;if(T=Bn(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)L||(P=et),P===void 0&&(P=!1),c.addEventListener(m.toString(),T,P);else if(c.attachEvent)c.attachEvent(oe(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function c(v){return m.call(c.src,c.listener,v)}const m=hr;return c}function ii(c,m,v,T,P){if(Array.isArray(m))for(var H=0;H<m.length;H++)ii(c,m[H],v,T,P);else T=g(T)?!!T.capture:!!T,v=po(v),c&&c[de]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],v=st(m,v,T,P),v>-1&&(ct(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=fr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=st(m,v,T,P)),(v=c>-1?m[c]:null)&&os(v))}function os(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[de])lt(m.i,c);else{var v=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(v,T,c.capture):m.detachEvent?m.detachEvent(oe(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=fr(m))?(lt(v,c),v.h==0&&(v.src=null,m[wt]=null)):ct(c)}}}function oe(c){return c in Kt?Kt[c]:Kt[c]="on"+c}function hr(c,m){if(c.da)c=!0;else{m=new Lt(m,this);const v=c.listener,T=c.ha||c.src;c.fa&&os(c),c=v.call(T,m)}return c}function fr(c){return c=c[wt],c instanceof nt?c:null}var go="__closure_events_fn_"+(Math.random()*1e9>>>0);function po(c){return typeof c=="function"?c:(c[go]||(c[go]=function(m){return c.handleEvent(m)}),c[go])}function ve(){x.call(this),this.i=new nt(this),this.M=this,this.G=null}A(ve,x),ve.prototype[de]=!0,ve.prototype.removeEventListener=function(c,m,v,T){ii(this,c,m,v,T)};function Oe(c,m){var v,T=c.G;if(T)for(v=[];T;T=T.G)v.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var P=m;m=new D(T,c),Z(m,P)}P=!0;let H,et;if(v)for(et=v.length-1;et>=0;et--)H=m.g=v[et],P=ls(H,T,!0,m)&&P;if(H=m.g=c,P=ls(H,T,!0,m)&&P,P=ls(H,T,!1,m)&&P,v)for(et=0;et<v.length;et++)H=m.g=v[et],P=ls(H,T,!1,m)&&P}ve.prototype.N=function(){if(ve.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let T=0;T<v.length;T++)ct(v[T]);delete c.g[m],c.h--}}this.G=null},ve.prototype.J=function(c,m,v,T){return this.i.add(String(c),m,!1,v,T)},ve.prototype.K=function(c,m,v,T){return this.i.add(String(c),m,!0,v,T)};function ls(c,m,v,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let H=0;H<m.length;++H){const et=m[H];if(et&&!et.da&&et.capture==v){const St=et.listener,ge=et.ha||et.src;et.fa&&lt(c.i,et),P=St.call(ge,T)!==!1&&P}}return P&&!T.defaultPrevented}function Ph(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function iu(c){c.g=Ph(()=>{c.g=null,c.i&&(c.i=!1,iu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class en extends x{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(c){x.call(this),this.h=c,this.g={}}A(dr,x);var yo=[];function _o(c){Ct(c.g,function(m,v){this.g.hasOwnProperty(v)&&os(m)},c),c.g={}}dr.prototype.N=function(){dr.Z.N.call(this),_o(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=f.JSON.stringify,zh=f.JSON.parse,su=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function ru(){}function au(){}var qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ze(){D.call(this,"d")}A(ze,D);function Rn(){D.call(this,"c")}A(Rn,D);var me={},ou=null;function ea(){return ou=ou||new ve}me.Ia="serverreachability";function lu(c){D.call(this,me.Ia,c)}A(lu,D);function si(c){const m=ea();Oe(m,new lu(m))}me.STAT_EVENT="statevent";function mr(c,m){D.call(this,me.STAT_EVENT,c),this.stat=m}A(mr,D);function Ee(c){const m=ea();Oe(m,new mr(m,c))}me.Ja="timingevent";function ri(c,m){D.call(this,me.Ja,c),this.size=m}A(ri,D);function ai(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Hn(){this.g=!0}Hn.prototype.ua=function(){this.g=!1};function jh(c,m,v,T,P,H){c.info(function(){if(c.g)if(H){var et="",St=H.split("&");for(let Ht=0;Ht<St.length;Ht++){var ge=St[Ht].split("=");if(ge.length>1){const le=ge[0];ge=ge[1];const On=le.split("_");et=On.length>=2&&On[1]=="type"?et+(le+"="+ge+"&"):et+(le+"=redacted&")}}}else et=null;else et=H;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+v+`
`+et})}function uu(c,m,v,T,P,H,et){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+v+`
`+H+" "+et})}function oi(c,m,v,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bh(c,v)+(T?" "+T:"")})}function gr(c,m){c.info(function(){return"TIMEOUT: "+m})}Hn.prototype.info=function(){};function Bh(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var P=T[0];if(P!="noop"&&P!="stop"&&P!="close")for(let et=1;et<T.length;et++)T[et]=""}}}}return us(H)}catch{return m}}var pr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Eo;function yr(){}A(yr,ru),yr.prototype.g=function(){return new XMLHttpRequest},Eo=new yr;function xi(c){return encodeURIComponent(String(c))}function cu(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Gn(c,m,v,T){this.j=c,this.i=m,this.l=v,this.S=T||1,this.V=new dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fn}function Fn(){this.i=null,this.g="",this.h=!1}var Te={},Ve={};function li(c,m,v){c.M=1,c.A=_r(Ae(m)),c.u=v,c.R=!0,na(c,null)}function na(c,m){c.F=Date.now(),ui(c),c.B=Ae(c.A);var v=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),aa(v.i,"t",T),c.C=0,v=c.j.L,c.h=new Fn,c.g=wu(c.j,v?m:null,!c.u),c.P>0&&(c.O=new en(_(c.Y,c,c.g),c.P)),m=c.V,v=c.g,T=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(yo[0]=P.toString()),P=yo);for(let H=0;H<P.length;H++){const et=Yt(v,P[H],T||m.handleEvent,!1,m.h||m);if(!et)break;m.g[et.key]=et}m=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),si(),jh(c.i,c.v,c.B,c.l,c.S,c.u)}Gn.prototype.ba=function(c){c=c.target;const m=this.O;m&&Qn(c)==3?m.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)t:{const St=Qn(this.g),ge=this.g.ya(),Ht=this.g.ca();if(!(St<3)&&(St!=3||this.g&&(this.h.h||this.g.la()||je(this.g)))){this.K||St!=4||ge==7||(ge==8||Ht<=0?si(3):si(2)),ci(this);var m=this.g.ca();this.X=m;var v=qh(this);if(this.o=m==200,uu(this.i,this.v,this.B,this.l,this.S,St,m),this.o){if(this.U&&!this.L){e:{if(this.g){var T,P=this.g;if((T=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(T)){var H=T;break e}}H=null}if(c=H)oi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,c);else{this.o=!1,this.m=3,Ee(12),gn(this),Cn(this);break t}}if(this.R){c=!0;let le;for(;!this.K&&this.C<v.length;)if(le=fu(this,v),le==Ve){St==4&&(this.m=4,Ee(14),c=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(le==Te){this.m=4,Ee(15),oi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else oi(this.i,this.l,le,null),hi(this,le);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||v.length!=0||this.h.h||(this.m=1,Ee(16),c=!1),this.o=this.o&&c,!c)oi(this.i,this.l,v,"[Invalid Chunked Response]"),gn(this),Cn(this);else if(v.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Uo(et),et.P=!0,Ee(11))}}else oi(this.i,this.l,v,null),hi(this,v);St==4&&gn(this),this.o&&!this.K&&(St==4?Tu(this.j,this):(this.o=!1,ui(this)))}else Ui(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ee(12)):(this.m=0,Ee(13)),gn(this),Cn(this)}}}catch{}finally{}};function qh(c){if(!hu(c))return c.g.la();const m=je(c.g);if(m==="")return"";let v="";const T=m.length,P=Qn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return gn(c),Cn(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<T;H++)c.h.h=!0,v+=c.h.i.decode(m[H],{stream:!(P&&H==T-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function hu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function fu(c,m){var v=c.C,T=m.indexOf(`
`,v);return T==-1?Ve:(v=Number(m.substring(v,T)),isNaN(v)?Te:(T+=1,T+v>m.length?Ve:(m=m.slice(T,T+v),c.C=T+v,m)))}Gn.prototype.cancel=function(){this.K=!0,gn(this)};function ui(c){c.T=Date.now()+c.H,ia(c,c.H)}function ia(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ai(_(c.aa,c),m)}function ci(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Gn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(gr(this.i,this.B),this.M!=2&&(si(),Ee(17)),gn(this),this.m=2,Cn(this)):ia(this,this.T-c)};function Cn(c){c.j.I==0||c.K||Tu(c.j,c)}function gn(c){ci(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,_o(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function hi(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||di(v.h,c))){if(!c.L&&di(v.h,c)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ha(v),ys(v);else break t;wr(v),Ee(18)}}else v.xa=P[1],0<v.xa-v.K&&P[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ai(_(v.Va,v),6e3));fi(v.h)<=1&&v.ta&&(v.ta=void 0)}else vi(v,11)}else if((c.L||v.g==c)&&ha(v),!w(m))for(P=v.Ba.g.parse(m),m=0;m<P.length;m++){let Ht=P[m];const le=Ht[0];if(!(le<=v.K))if(v.K=le,Ht=Ht[1],v.I==2)if(Ht[0]=="c"){v.M=Ht[1],v.ba=Ht[2];const On=Ht[3];On!=null&&(v.ka=On,v.j.info("VER="+v.ka));const Ei=Ht[4];Ei!=null&&(v.za=Ei,v.j.info("SVER="+v.za));const Xn=Ht[5];Xn!=null&&typeof Xn=="number"&&Xn>0&&(T=1.5*Xn,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const $n=c.g;if($n){const Rr=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var H=T.h;H.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ao(H,H.h),H.h=null))}if(T.G){const fa=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(T.wa=fa,Qt(T.J,T.G,fa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var et=c;if(T.na=bu(T,T.L?T.ba:null,T.W),et.L){bo(T.h,et);var St=et,ge=T.O;ge&&(St.H=ge),St.D&&(ci(St),ui(St)),T.g=et}else vu(T);v.i.length>0&&_i(v)}else Ht[0]!="stop"&&Ht[0]!="close"||vi(v,7);else v.I==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?vi(v,7):xo(v):Ht[0]!="noop"&&v.l&&v.l.qa(Ht),v.A=0)}}si(4)}catch{}}var Se=class{constructor(c,m){this.g=c,this.map=m}};function To(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function So(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function fi(c){return c.h?1:c.g?c.g.size:0}function di(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Ao(c,m){c.g?c.g.add(m):c.h=m}function bo(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}To.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function wo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return k(c.i)}var du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const T=c[v].indexOf("=");let P,H=null;T>=0?(P=c[v].substring(0,T),H=c[v].substring(T+1)):P=c[v],m(P,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function pn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof pn?(this.l=c.l,Ue(this,c.j),this.o=c.o,this.g=c.g,cs(this,c.u),this.h=c.h,Ro(this,yu(c.i)),this.m=c.m):c&&(m=String(c).match(du))?(this.l=!1,Ue(this,m[1]||"",!0),this.o=mi(m[2]||""),this.g=mi(m[3]||"",!0),cs(this,m[4]),this.h=mi(m[5]||"",!0),Ro(this,m[6]||"",!0),this.m=mi(m[7]||"")):(this.l=!1,this.i=new fs(null,this.l))}pn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(vr(m,ra,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(vr(m,ra,!0),"@"),c.push(xi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(vr(v,v.charAt(0)=="/"?Co:mu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",vr(v,gu)),c.join("")},pn.prototype.resolve=function(c){const m=Ae(this);let v=!!c.j;v?Ue(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var T=c.h;if(v)cs(m,c.u);else if(v=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var P=m.h.lastIndexOf("/");P!=-1&&(T=m.h.slice(0,P+1)+T)}if(P=T,P==".."||P==".")T="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){T=P.lastIndexOf("/",0)==0,P=P.split("/");const H=[];for(let et=0;et<P.length;){const St=P[et++];St=="."?T&&et==P.length&&H.push(""):St==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),T&&et==P.length&&H.push("")):(H.push(St),T=!0)}T=H.join("/")}else T=P}return v?m.h=T:v=c.i.toString()!=="",v?Ro(m,yu(c.i)):v=!!c.m,v&&(m.m=c.m),m};function Ae(c){return new pn(c)}function Ue(c,m,v){c.j=v?mi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function cs(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Ro(c,m,v){m instanceof fs?(c.i=m,oa(c.i,c.l)):(v||(m=vr(m,hs)),c.i=new fs(m,c.l))}function Qt(c,m,v){c.i.set(m,v)}function _r(c){return Qt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function mi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vr(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,rn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ra=/[#\/\?@]/g,mu=/[#\?:]/g,Co=/[#\?]/g,hs=/[#\?@]/g,gu=/#/g;function fs(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function an(c){c.g||(c.g=new Map,c.h=0,c.i&&sa(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=fs.prototype,s.add=function(c,m){an(this),this.i=null,c=ds(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function pu(c,m){an(c),m=ds(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Io(c,m){return an(c),m=ds(c,m),c.g.has(m)}s.forEach=function(c,m){an(this),this.g.forEach(function(v,T){v.forEach(function(P){c.call(m,P,T,this)},this)},this)};function No(c,m){an(c);let v=[];if(typeof m=="string")Io(c,m)&&(v=v.concat(c.g.get(ds(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return an(this),this.i=null,c=ds(this,c),Io(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=No(this,c),c.length>0?String(c[0]):m):m};function aa(c,m,v){pu(c,m),v.length>0&&(c.i=null,c.g.set(ds(c,m),k(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const P=xi(v);v=No(this,v);for(let H=0;H<v.length;H++){let et=P;v[H]!==""&&(et+="="+xi(v[H])),c.push(et)}}return this.i=c.join("&")};function yu(c){const m=new fs;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function ds(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function oa(c,m){m&&!c.j&&(an(c),c.i=null,c.g.forEach(function(v,T){const P=T.toLowerCase();T!=P&&(pu(this,T),aa(this,P,v))},c)),c.j=m}function Kn(c,m){const v=new Hn;if(f.Image){const T=new Image;T.onload=S(In,v,"TestLoadImage: loaded",!0,m,T),T.onerror=S(In,v,"TestLoadImage: error",!1,m,T),T.onabort=S(In,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=S(In,v,"TestLoadImage: timeout",!1,m,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function Oo(c,m){const v=new Hn,T=new AbortController,P=setTimeout(()=>{T.abort(),In(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout(P),H.ok?In(v,"TestPingServer: ok",!0,m):In(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),In(v,"TestPingServer: error",!1,m)})}function In(c,m,v,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(v)}catch{}}function ms(){this.g=new su}function gi(c){this.i=c.Sb||null,this.h=c.ab||!1}A(gi,ru),gi.prototype.g=function(){return new Er(this.i,this.h)};function Er(c,m){ve.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Er,ve),s=Er.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Yn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;la(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function la(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?gs(this):Yn(this),this.readyState==3&&la(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,gs(this))},s.Na=function(c){this.g&&(this.response=c,gs(this))},s.ga=function(){this.g&&gs(this)};function gs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Yn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Yn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Nn(c){let m="";return Ct(c,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Tr(c,m,v){t:{for(T in v){var T=!1;break t}T=!0}T||(v=Nn(v),typeof c=="string"?v!=null&&xi(v):Qt(c,m,v))}function Jt(c){ve.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Jt,ve);var pi=/^https?$/i,Do=["POST","PUT"];s=Jt.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Eo.g(),this.g.onreadystatechange=I(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){Sr(this,H);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)v.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),P=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Do,m,void 0)>=0)||T||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,et]of v)this.g.setRequestHeader(H,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Sr(this,H)}};function Sr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Mo(c),Vi(c)}function Mo(c){c.A||(c.A=!0,Oe(c,"complete"),Oe(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Oe(this,"complete"),Oe(this,"abort"),Vi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),Jt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ar(this):this.Xa())},s.Xa=function(){Ar(this)};function Ar(c){if(c.h&&typeof u<"u"){if(c.v&&Qn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Oe(c,"readystatechange"),Qn(c)==4){c.h=!1;try{const H=c.ca();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var T;if(T=H===0){let et=String(c.D).match(du)[1]||null;!et&&f.self&&f.self.location&&(et=f.self.location.protocol.slice(0,-1)),T=!pi.test(et?et.toLowerCase():"")}v=T}if(v)Oe(c,"complete"),Oe(c,"success");else{c.o=6;try{var P=Qn(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",Mo(c)}}finally{Vi(c)}}}}function Vi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||Oe(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),zh(m)}};function je(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ui(c){const m={};c=(c.g&&Qn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(w(c[T]))continue;var v=cu(c[T]);const P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[P]||[];m[P]=H,H.push(v)}qt(m,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function ps(c){this.za=0,this.i=[],this.j=new Hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,c),this.Za=yi("retryDelaySeedMs",1e4,c),this.Ta=yi("forwardChannelMaxRetries",2,c),this.va=yi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new To(c&&c.concurrentRequestLimit),this.Ba=new ms,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ps.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,T){Ee(0),this.W=c,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=bu(this,null,this.W),_i(this)};function xo(c){if(ua(c),c.I==3){var m=c.V++,v=Ae(c.J);if(Qt(v,"SID",c.M),Qt(v,"RID",m),Qt(v,"TYPE","terminate"),br(c,v),m=new Gn(c,c.j,m),m.M=2,m.A=_r(Ae(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=wu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ui(m)}Au(c)}function ys(c){c.g&&(Uo(c),c.g.cancel(),c.g=null)}function ua(c){ys(c),c.v&&(f.clearTimeout(c.v),c.v=null),ha(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function _i(c){if(!So(c.h)&&!c.m){c.m=!0;var m=c.Ea;zt||b(),Rt||(zt(),Rt=!0),N.add(m,c),c.D=0}}function ca(c,m){return fi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ai(_(c.Ea,c,m),Su(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const P=new Gn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),Z(H,this.U)):H=this.U),this.u!==null||this.R||(P.J=H,H=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=_u(this,P,m),v=Ae(this.J),Qt(v,"RID",c),Qt(v,"CVER",22),this.G&&Qt(v,"X-HTTP-Session-Id",this.G),br(this,v),H&&(this.R?m="headers="+xi(Nn(H))+"&"+m:this.u&&Tr(v,this.u,H)),Ao(this.h,P),this.Ra&&Qt(v,"TYPE","init"),this.S?(Qt(v,"$req",m),Qt(v,"SID","null"),P.U=!0,li(P,v,null)):li(P,v,m),this.I=2}}else this.I==3&&(c?Vo(this,c):this.i.length==0||So(this.h)||Vo(this))};function Vo(c,m){var v;m?v=m.l:v=c.V++;const T=Ae(c.J);Qt(T,"SID",c.M),Qt(T,"RID",v),Qt(T,"AID",c.K),br(c,T),c.u&&c.o&&Tr(T,c.u,c.o),v=new Gn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=_u(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ao(c.h,v),li(v,T,m)}function br(c,m){c.H&&Ct(c.H,function(v,T){Qt(m,T,v)}),c.l&&Ct({},function(v,T){Qt(m,T,v)})}function _u(c,m,v){v=Math.min(c.i.length,v);const T=c.l?_(c.l.Ka,c.l,c):null;t:{var P=c.i;let St=-1;for(;;){const ge=["count="+v];St==-1?v>0?(St=P[0].g,ge.push("ofs="+St)):St=0:ge.push("ofs="+St);let Ht=!0;for(let le=0;le<v;le++){var H=P[le].g;const On=P[le].map;if(H-=St,H<0)St=Math.max(0,P[le].g-100),Ht=!1;else try{H="req"+H+"_"||"";try{var et=On instanceof Map?On:Object.entries(On);for(const[Ei,Xn]of et){let $n=Xn;g(Xn)&&($n=us(Xn)),ge.push(H+Ei+"="+encodeURIComponent($n))}}catch(Ei){throw ge.push(H+"type="+encodeURIComponent("_badmap")),Ei}}catch{T&&T(On)}}if(Ht){et=ge.join("&");break t}}et=void 0}return c=c.i.splice(0,v),m.G=c,et}function vu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;zt||b(),Rt||(zt(),Rt=!0),N.add(m,c),c.A=0}}function wr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ai(_(c.Da,c),Su(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,Eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ai(_(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ee(10),ys(this),Eu(this))};function Uo(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Eu(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Ae(c.na);Qt(m,"RID","rpc"),Qt(m,"SID",c.M),Qt(m,"AID",c.K),Qt(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qt(m,"TO",c.ia),Qt(m,"TYPE","xmlhttp"),br(c,m),c.u&&c.o&&Tr(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=_r(Ae(m)),v.u=null,v.R=!0,na(v,c)}s.Va=function(){this.C!=null&&(this.C=null,ys(this),wr(this),Ee(19))};function ha(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Tu(c,m){var v=null;if(c.g==m){ha(c),Uo(c),c.g=null;var T=2}else if(di(c.h,m))v=m.G,bo(c.h,m),T=1;else return;if(c.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var P=c.D;T=ea(),Oe(T,new ri(T,v)),_i(c)}else vu(c);else if(P=m.m,P==3||P==0&&m.X>0||!(T==1&&ca(c,m)||T==2&&wr(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),P){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function Su(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function vi(c,m){if(c.j.info("Error code "+m),m==2){var v=_(c.bb,c),T=c.Ua;const P=!T;T=new pn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ue(T,"https"),_r(T),P?Kn(T.toString(),v):Oo(T.toString(),v)}else Ee(2);c.I=0,c.l&&c.l.pa(m),Au(c),ua(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function Au(c){if(c.I=0,c.ja=[],c.l){const m=wo(c.h);(m.length!=0||c.i.length!=0)&&($(c.ja,m),$(c.ja,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.oa()}}function bu(c,m,v){var T=v instanceof pn?Ae(v):new pn(v);if(T.g!="")m&&(T.g=m+"."+T.g),cs(T,T.u);else{var P=f.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const H=new pn(null);T&&Ue(H,T),m&&(H.g=m),P&&cs(H,P),v&&(H.h=v),T=H}return v=c.G,m=c.wa,v&&m&&Qt(T,v,m),Qt(T,"VER",c.ka),br(c,T),T}function wu(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Jt(new gi({ab:v})):new Jt(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}s=Ru.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function _s(){}_s.prototype.g=function(c,m){return new nn(c,m)};function nn(c,m){ve.call(this),this.g=new ps(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!w(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Li(this)}A(nn,ve),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){xo(this.g)},nn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=us(c),c=v);m.i.push(new Se(m.Ya++,c)),m.I==3&&_i(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,xo(this.g),delete this.g,nn.Z.N.call(this)};function Cu(c){ze.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){t:{for(const v in m){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(Cu,ze);function Iu(){Rn.call(this),this.status=1}A(Iu,Rn);function Li(c){this.g=c}A(Li,Ru),Li.prototype.ra=function(){Oe(this.g,"a")},Li.prototype.qa=function(c){Oe(this.g,new Cu(c))},Li.prototype.pa=function(c){Oe(this.g,new Iu)},Li.prototype.oa=function(){Oe(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,c0=function(){return new _s},u0=function(){return ea()},l0=me,am={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pr.NO_ERROR=0,pr.TIMEOUT=8,pr.HTTP_ERROR=6,jc=pr,vo.COMPLETE="complete",o0=vo,au.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",ve.prototype.listen=ve.prototype.J,Al=au,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,a0=Jt}).apply(typeof Mc<"u"?Mc:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore",cv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new Nm("@firebase/firestore");function Ha(){return Yr.logLevel}function rt(s,...t){if(Yr.logLevel<=Mt.DEBUG){const n=t.map(Mm);Yr.debug(`Firestore (${uo}): ${s}`,...n)}}function is(s,...t){if(Yr.logLevel<=Mt.ERROR){const n=t.map(Mm);Yr.error(`Firestore (${uo}): ${s}`,...n)}}function eo(s,...t){if(Yr.logLevel<=Mt.WARN){const n=t.map(Mm);Yr.warn(`Firestore (${uo}): ${s}`,...n)}}function Mm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,h0(s,r,n)}function h0(s,t,n){let r=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw is(r),new Error(r)}function Ft(s,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||h0(t,o,r)}function Tt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends as{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Fb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Je.UNAUTHENTICATED)))}shutdown(){}}class Kb{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Yb{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new Js;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Js,t.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Js)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft(typeof r.accessToken=="string",31837,{l:r}),new f0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class Qb{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xb{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qb(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Je.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $b{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0,3512);const r=u=>{u.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,rt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Jb(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function xt(s,t){return s<t?-1:s>t?1:0}function om(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Qd(o)===Qd(u)?xt(o,u):Qd(o)?1:-1}return xt(s.length,t.length)}const Zb=55296,Wb=57343;function Qd(s){const t=s.charCodeAt(0);return t>=Zb&&t<=Wb}function no(s,t,n){return s.length===t.length&&s.every(((r,o)=>n(r,t[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="__name__";class wi{constructor(t,n,r){n===void 0?n=0:n>t.length&&yt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&yt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return wi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wi?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=wi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return xt(t.length,n.length)}static compareSegments(t,n){const r=wi.isNumericId(t),o=wi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?wi.extractNumericId(t).compare(wi.extractNumericId(n)):om(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return $s.fromString(t.substring(4,t.length-2))}}class re extends wi{construct(t,n,r){return new re(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ut(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new re(n)}static emptyPath(){return new re([])}}const tw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends wi{construct(t,n,r){return new Ke(t,n,r)}static isValidIdentifier(t){return tw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fv}static keyField(){return new Ke([fv])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<t.length;){const g=t[o];if(g==="\\"){if(o+1===t.length)throw new ut(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ut(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=p,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new ut(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(re.fromString(t))}static fromName(t){return new ft(re.fromString(t).popFirst(5))}static empty(){return new ft(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return re.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(s,t,n){if(!n)throw new ut(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function ew(s,t,n,r){if(t===!0&&r===!0)throw new ut(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function dv(s){if(!ft.isDocumentKey(s))throw new ut(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function mv(s){if(ft.isDocumentKey(s))throw new ut(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function m0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Vm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":yt(12329,{type:typeof s})}function Qr(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new ut(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vm(s);throw new ut(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(s,t){const n={typeString:s};return t&&(n.value=t),n}function Kl(s,t){if(!m0(s))throw new ut(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ut(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=-62135596800,pv=1e6;class ae{static now(){return ae.fromMillis(Date.now())}static fromDate(t){return ae.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*pv);return new ae(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<gv)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pv}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Kl(t,ae._jsonSchema))return new ae(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-gv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ae._jsonSchemaVersion="firestore/timestamp/1.0",ae._jsonSchema={type:Ne("string",ae._jsonSchemaVersion),seconds:Ne("number"),nanoseconds:Ne("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new ae(0,0))}static max(){return new vt(new ae(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function nw(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(r===1e9?new ae(n+1,0):new ae(n,r));return new tr(o,ft.empty(),t)}function iw(s){return new tr(s.readTime,s.key,Vl)}class tr{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new tr(vt.min(),ft.empty(),Vl)}static max(){return new tr(vt.max(),ft.empty(),Vl)}}function sw(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(s.documentKey,t.documentKey),n!==0?n:xt(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==rw)throw s;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):X.reject(n)}static resolve(t){return new X(((n,r)=>{n(t)}))}static reject(t){return new X(((n,r)=>{r(t)}))}static waitFor(t){return new X(((n,r)=>{let o=0,u=0,f=!1;t.forEach((g=>{++o,g.next((()=>{++u,f&&u===o&&n()}),(p=>r(p)))})),f=!0,u===o&&n()}))}static or(t){let n=X.resolve(!1);for(const r of t)n=n.next((o=>o?X.resolve(o):r()));return n}static forEach(t,n){const r=[];return t.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(t,n){return new X(((r,o)=>{const u=t.length,f=new Array(u);let g=0;for(let p=0;p<u;p++){const _=p;n(t[_]).next((S=>{f[_]=S,++g,g===u&&r(f)}),(S=>o(S)))}}))}static doWhile(t,n){return new X(((r,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):r()};u()}))}}function ow(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}_h.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=-1;function vh(s){return s==null}function Wc(s){return s===0&&1/s==-1/0}function lw(s){return typeof s=="number"&&Number.isInteger(s)&&!Wc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="";function uw(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=yv(t)),t=cw(s.get(n),t);return yv(t)}function cw(s,t){let n=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case g0:n+="";break;default:n+=u}}return n}function yv(s){return s+g0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function ar(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function p0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,n){this.comparator=t,this.root=n||Fe.EMPTY}insert(t,n){return new ce(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xc(this.root,t,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xc(this.root,t,this.comparator,!0)}}class xc{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??Fe.RED,this.left=o??Fe.EMPTY,this.right=u??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new Fe(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Fe.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw yt(27949);return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(t,n,r,o,u){return this}insert(t,n,r){return new Fe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new vv(this.data.getIterator())}getIteratorFrom(t){return new vv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof xe)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new xe(this.comparator);return n.data=t,n}}class vv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new wn([])}unionWith(t){let n=new xe(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new wn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return no(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new y0("Invalid base64 string: "+u):u}})(t);return new Qe(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(t);return new Qe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const hw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(s){if(Ft(!!s,39018),typeof s=="string"){let t=0;const n=hw.exec(s);if(Ft(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_e(s.seconds),nanos:_e(s.nanos)}}function _e(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function nr(s){return typeof s=="string"?Qe.fromBase64String(s):Qe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="server_timestamp",v0="__type__",E0="__previous_value__",T0="__local_write_time__";function Lm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[v0])==null?void 0:r.stringValue)===_0}function Eh(s){const t=s.mapValue.fields[E0];return Lm(t)?Eh(t):t}function Ul(s){const t=er(s.mapValue.fields[T0].timestampValue);return new ae(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(t,n,r,o,u,f,g,p,_,S){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=_,this.isUsingEmulator=S}}const th="(default)";class Ll{constructor(t,n){this.projectId=t,this.database=n||th}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database===th}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__type__",dw="__max__",Vc={mapValue:{}},A0="__vector__",eh="value";function ir(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Lm(s)?4:gw(s)?9007199254740991:mw(s)?10:11:yt(28295,{value:s})}function Di(s,t){if(s===t)return!0;const n=ir(s);if(n!==ir(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Ul(s).isEqual(Ul(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=er(o.timestampValue),g=er(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return nr(o.bytesValue).isEqual(nr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return _e(o.geoPointValue.latitude)===_e(u.geoPointValue.latitude)&&_e(o.geoPointValue.longitude)===_e(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return _e(o.integerValue)===_e(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=_e(o.doubleValue),g=_e(u.doubleValue);return f===g?Wc(f)===Wc(g):isNaN(f)&&isNaN(g)}return!1})(s,t);case 9:return no(s.arrayValue.values||[],t.arrayValue.values||[],Di);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(_v(f)!==_v(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!Di(f[p],g[p])))return!1;return!0})(s,t);default:return yt(52216,{left:s})}}function kl(s,t){return(s.values||[]).find((n=>Di(n,t)))!==void 0}function io(s,t){if(s===t)return 0;const n=ir(s),r=ir(t);if(n!==r)return xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(s.booleanValue,t.booleanValue);case 2:return(function(u,f){const g=_e(u.integerValue||u.doubleValue),p=_e(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,t);case 3:return Ev(s.timestampValue,t.timestampValue);case 4:return Ev(Ul(s),Ul(t));case 5:return om(s.stringValue,t.stringValue);case 6:return(function(u,f){const g=nr(u),p=nr(f);return g.compareTo(p)})(s.bytesValue,t.bytesValue);case 7:return(function(u,f){const g=u.split("/"),p=f.split("/");for(let _=0;_<g.length&&_<p.length;_++){const S=xt(g[_],p[_]);if(S!==0)return S}return xt(g.length,p.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,f){const g=xt(_e(u.latitude),_e(f.latitude));return g!==0?g:xt(_e(u.longitude),_e(f.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return Tv(s.arrayValue,t.arrayValue);case 10:return(function(u,f){var I,k,$,W;const g=u.fields||{},p=f.fields||{},_=(I=g[eh])==null?void 0:I.arrayValue,S=(k=p[eh])==null?void 0:k.arrayValue,A=xt((($=_==null?void 0:_.values)==null?void 0:$.length)||0,((W=S==null?void 0:S.values)==null?void 0:W.length)||0);return A!==0?A:Tv(_,S)})(s.mapValue,t.mapValue);case 11:return(function(u,f){if(u===Vc.mapValue&&f===Vc.mapValue)return 0;if(u===Vc.mapValue)return 1;if(f===Vc.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),_=f.fields||{},S=Object.keys(_);p.sort(),S.sort();for(let A=0;A<p.length&&A<S.length;++A){const I=om(p[A],S[A]);if(I!==0)return I;const k=io(g[p[A]],_[S[A]]);if(k!==0)return k}return xt(p.length,S.length)})(s.mapValue,t.mapValue);default:throw yt(23264,{he:n})}}function Ev(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return xt(s,t);const n=er(s),r=er(t),o=xt(n.seconds,r.seconds);return o!==0?o:xt(n.nanos,r.nanos)}function Tv(s,t){const n=s.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=io(n[o],r[o]);if(u)return u}return xt(n.length,r.length)}function so(s){return lm(s)}function lm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=er(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return nr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ft.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=lm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${lm(n.fields[f])}`;return o+"}"})(s.mapValue):yt(61005,{value:s})}function Bc(s){switch(ir(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Eh(s);return t?16+Bc(t):16;case 5:return 2*s.stringValue.length;case 6:return nr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Bc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return ar(r.fields,((u,f)=>{o+=u.length+Bc(f)})),o})(s.mapValue);default:throw yt(13486,{value:s})}}function um(s){return!!s&&"integerValue"in s}function km(s){return!!s&&"arrayValue"in s}function Sv(s){return!!s&&"nullValue"in s}function Av(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function qc(s){return!!s&&"mapValue"in s}function mw(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[S0])==null?void 0:r.stringValue)===A0}function Cl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return ar(s.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Cl(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Cl(s.arrayValue.values[n]);return t}return{...s}}function gw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===dw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.value=t}static empty(){return new dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!qc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cl(n)}setAll(t){let n=Ke.emptyPath(),r={},o=[];t.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=g.popLast()}f?r[g.lastSegment()]=Cl(f):o.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());qc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Di(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];qc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){ar(n,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new dn(Cl(this.value))}}function b0(s){const t=[];return ar(s.fields,((n,r)=>{const o=new Ke([n]);if(qc(r)){const u=b0(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)})),new wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,r,o,u,f,g){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(t){return new Ze(t,0,vt.min(),vt.min(),vt.min(),dn.empty(),0)}static newFoundDocument(t,n,r,o){return new Ze(t,1,n,vt.min(),r,o,0)}static newNoDocument(t,n){return new Ze(t,2,n,vt.min(),vt.min(),dn.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,vt.min(),vt.min(),dn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,n){this.position=t,this.inclusive=n}}function bv(s,t,n){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],f=s.position[o];if(u.field.isKeyField()?r=ft.comparator(ft.fromName(f.referenceValue),n.key):r=io(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wv(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Di(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,n="asc"){this.field=t,this.dir=n}}function pw(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{}class Me extends w0{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new _w(t,n,r):n==="array-contains"?new Tw(t,r):n==="in"?new Sw(t,r):n==="not-in"?new Aw(t,r):n==="array-contains-any"?new bw(t,r):new Me(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new vw(t,r):new Ew(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(io(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends w0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Mi(t,n)}matches(t){return R0(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function R0(s){return s.op==="and"}function C0(s){return yw(s)&&R0(s)}function yw(s){for(const t of s.filters)if(t instanceof Mi)return!1;return!0}function cm(s){if(s instanceof Me)return s.field.canonicalString()+s.op.toString()+so(s.value);if(C0(s))return s.filters.map((t=>cm(t))).join(",");{const t=s.filters.map((n=>cm(n))).join(",");return`${s.op}(${t})`}}function I0(s,t){return s instanceof Me?(function(r,o){return o instanceof Me&&r.op===o.op&&r.field.isEqual(o.field)&&Di(r.value,o.value)})(s,t):s instanceof Mi?(function(r,o){return o instanceof Mi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,g)=>u&&I0(f,o.filters[g])),!0):!1})(s,t):void yt(19439)}function N0(s){return s instanceof Me?(function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`})(s):s instanceof Mi?(function(n){return n.op.toString()+" {"+n.getFilters().map(N0).join(" ,")+"}"})(s):"Filter"}class _w extends Me{constructor(t,n,r){super(t,n,r),this.key=ft.fromName(r.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class vw extends Me{constructor(t,n){super(t,"in",n),this.keys=O0("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class Ew extends Me{constructor(t,n){super(t,"not-in",n),this.keys=O0("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function O0(s,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>ft.fromName(r.referenceValue)))}class Tw extends Me{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return km(n)&&kl(n.arrayValue,this.value)}}class Sw extends Me{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&kl(this.value.arrayValue,n)}}class Aw extends Me{constructor(t,n){super(t,"not-in",n)}matches(t){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kl(this.value.arrayValue,n)}}class bw extends Me{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>kl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,n=null,r=[],o=[],u=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function Rv(s,t=null,n=[],r=[],o=null,u=null,f=null){return new ww(s,t,n,r,o,u,f)}function Pm(s){const t=Tt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>cm(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),vh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>so(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>so(r))).join(",")),t.Te=n}return t.Te}function zm(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!pw(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!I0(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!wv(s.startAt,t.startAt)&&wv(s.endAt,t.endAt)}function hm(s){return ft.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,n=null,r=[],o=[],u=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rw(s,t,n,r,o,u,f,g){return new Th(s,t,n,r,o,u,f,g)}function D0(s){return new Th(s)}function Cv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Cw(s){return s.collectionGroup!==null}function Il(s){const t=Tt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new xe(Ke.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new ih(u,r))})),n.has(Ke.keyField().canonicalString())||t.Ie.push(new ih(Ke.keyField(),r))}return t.Ie}function Ri(s){const t=Tt(s);return t.Ee||(t.Ee=Iw(t,Il(s))),t.Ee}function Iw(s,t){if(s.limitType==="F")return Rv(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new ih(o.field,u)}));const n=s.endAt?new nh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new nh(s.startAt.position,s.startAt.inclusive):null;return Rv(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function fm(s,t,n){return new Th(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function Sh(s,t){return zm(Ri(s),Ri(t))&&s.limitType===t.limitType}function M0(s){return`${Pm(Ri(s))}|lt:${s.limitType}`}function Ga(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>N0(o))).join(", ")}]`),vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>so(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>so(o))).join(",")),`Target(${r})`})(Ri(s))}; limitType=${s.limitType})`}function Ah(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ft.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of Il(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(f,g,p){const _=bv(f,g,p);return f.inclusive?_<=0:_<0})(r.startAt,Il(r),o)||r.endAt&&!(function(f,g,p){const _=bv(f,g,p);return f.inclusive?_>=0:_>0})(r.endAt,Il(r),o))})(s,t)}function Nw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function x0(s){return(t,n)=>{let r=!1;for(const o of Il(s)){const u=Ow(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function Ow(s,t,n){const r=s.field.isKeyField()?ft.comparator(t.key,n.key):(function(u,f,g){const p=f.data.field(u),_=g.data.field(u);return p!==null&&_!==null?io(p,_):yt(42886)})(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return yt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ar(this.inner,((n,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return p0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new ce(ft.comparator);function ss(){return Dw}const V0=new ce(ft.comparator);function bl(...s){let t=V0;for(const n of s)t=t.insert(n.key,n);return t}function U0(s){let t=V0;return s.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Hr(){return Nl()}function L0(){return Nl()}function Nl(){return new Wr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const Mw=new ce(ft.comparator),xw=new xe(ft.comparator);function Vt(...s){let t=xw;for(const n of s)t=t.add(n);return t}const Vw=new xe(xt);function Uw(){return Vw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(t)?"-0":t}}function k0(s){return{integerValue:""+s}}function Lw(s,t){return lw(t)?k0(t):jm(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function kw(s,t,n){return s instanceof sh?(function(o,u){const f={fields:{[v0]:{stringValue:_0},[T0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Lm(u)&&(u=Eh(u)),u&&(f.fields[E0]=u),{mapValue:f}})(n,t):s instanceof Pl?z0(s,t):s instanceof zl?j0(s,t):(function(o,u){const f=P0(o,u),g=Iv(f)+Iv(o.Ae);return um(f)&&um(o.Ae)?k0(g):jm(o.serializer,g)})(s,t)}function Pw(s,t,n){return s instanceof Pl?z0(s,t):s instanceof zl?j0(s,t):n}function P0(s,t){return s instanceof rh?(function(r){return um(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class sh extends bh{}class Pl extends bh{constructor(t){super(),this.elements=t}}function z0(s,t){const n=B0(t);for(const r of s.elements)n.some((o=>Di(o,r)))||n.push(r);return{arrayValue:{values:n}}}class zl extends bh{constructor(t){super(),this.elements=t}}function j0(s,t){let n=B0(t);for(const r of s.elements)n=n.filter((o=>!Di(o,r)));return{arrayValue:{values:n}}}class rh extends bh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Iv(s){return _e(s.integerValue||s.doubleValue)}function B0(s){return km(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function zw(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Pl&&o instanceof Pl||r instanceof zl&&o instanceof zl?no(r.elements,o.elements,Di):r instanceof rh&&o instanceof rh?Di(r.Ae,o.Ae):r instanceof sh&&o instanceof sh})(s.transform,t.transform)}class jw{constructor(t,n){this.version=t,this.transformResults=n}}class ei{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ei}static exists(t){return new ei(void 0,t)}static updateTime(t){return new ei(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Hc(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class wh{}function q0(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Bm(s.key,ei.none()):new Yl(s.key,s.data,ei.none());{const n=s.data,r=dn.empty();let o=new xe(Ke.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new or(s.key,r,new wn(o.toArray()),ei.none())}}function Bw(s,t,n){s instanceof Yl?(function(o,u,f){const g=o.value.clone(),p=Ov(o.fieldTransforms,u,f.transformResults);g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(s,t,n):s instanceof or?(function(o,u,f){if(!Hc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Ov(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(H0(o)),p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,t,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function Ol(s,t,n,r){return s instanceof Yl?(function(u,f,g,p){if(!Hc(u.precondition,f))return g;const _=u.value.clone(),S=Dv(u.fieldTransforms,p,f);return _.setAll(S),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(s,t,n,r):s instanceof or?(function(u,f,g,p){if(!Hc(u.precondition,f))return g;const _=Dv(u.fieldTransforms,p,f),S=f.data;return S.setAll(H0(u)),S.setAll(_),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,t,n,r):(function(u,f,g){return Hc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(s,t,n)}function qw(s,t){let n=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=P0(r.transform,o||null);u!=null&&(n===null&&(n=dn.empty()),n.set(r.field,u))}return n||null}function Nv(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&no(r,o,((u,f)=>zw(u,f)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Yl extends wh{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class or extends wh{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function H0(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}})),t}function Ov(s,t,n){const r=new Map;Ft(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,g=t.data.field(u.field);r.set(u.field,Pw(f,g,n[o]))}return r}function Dv(s,t,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,kw(u,f,t))}return r}class Bm extends wh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw extends wh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&Bw(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ol(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ol(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=L0();return this.mutations.forEach((o=>{const u=t.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const p=q0(f,g);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(vt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&no(this.mutations,t.mutations,((n,r)=>Nv(n,r)))&&no(this.baseMutations,t.baseMutations,((n,r)=>Nv(n,r)))}}class qm{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){Ft(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return Mw})();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new qm(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,kt;function Yw(s){switch(s){case J.OK:return yt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return yt(15467,{code:s})}}function G0(s){if(s===void 0)return is("GRPC error has no .code"),J.UNKNOWN;switch(s){case Ie.OK:return J.OK;case Ie.CANCELLED:return J.CANCELLED;case Ie.UNKNOWN:return J.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return J.INTERNAL;case Ie.UNAVAILABLE:return J.UNAVAILABLE;case Ie.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ie.NOT_FOUND:return J.NOT_FOUND;case Ie.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ie.ABORTED:return J.ABORTED;case Ie.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ie.DATA_LOSS:return J.DATA_LOSS;default:return yt(39323,{code:s})}}(kt=Ie||(Ie={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new $s([4294967295,4294967295],0);function Mv(s){const t=Qw().encode(s),n=new r0;return n.update(t),new Uint8Array(n.digest())}function xv(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new $s([n,r],0),new $s([o,u],0)]}class Hm{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(r<0)throw new wl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=$s.fromNumber(this.ge)}ye(t,n,r){let o=t.add(n.multiply($s.fromNumber(r)));return o.compare(Xw)===1&&(o=new $s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Mv(t),[r,o]=xv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Hm(u,o,n);return r.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const n=Mv(t),[r,o]=xv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,Ql.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Rh(vt.min(),o,new ce(xt),ss(),Vt())}}class Ql{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ql(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n,r,o){this.be=t,this.removedTargetIds=n,this.key=r,this.De=o}}class F0{constructor(t,n){this.targetId=t,this.Ce=n}}class K0{constructor(t,n,r=Qe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Vv{constructor(){this.ve=0,this.Fe=Uv(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),n=Vt(),r=Vt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:yt(38017,{changeType:u})}})),new Ql(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Uv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $w{constructor(t){this.Ge=t,this.ze=new Map,this.je=ss(),this.Je=Uc(),this.He=Uc(),this.Ye=new ce(xt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:yt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,r=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(hm(u))if(r===0){const f=new ft(u.path);this.et(n,f,Ze.newNoDocument(f,vt.min()))}else Ft(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const g=this.ut(t),p=g?this.ct(g,t,f):1;if(p!==0){this.it(n);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=nr(r).toUint8Array()}catch(p){if(p instanceof y0)return eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Hm(f,o,u)}catch(p){return eo(p instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(g)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&hm(g.target)){const p=new ft(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Ze.newNoDocument(p,t))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let r=Vt();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((p=>{const _=this.ot(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const o=new Rh(t,n,this.Ye,this.je,r);return this.je=ss(),this.Je=Uc(),this.He=Uc(),this.Ye=new ce(xt),o}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Vv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new xe(xt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new xe(xt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Vv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Uc(){return new ce(ft.comparator)}function Uv(){return new ce(ft.comparator)}const Jw={asc:"ASCENDING",desc:"DESCENDING"},Zw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ww={and:"AND",or:"OR"};class tR{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function dm(s,t){return s.useProto3Json||vh(t)?t:{value:t}}function ah(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Y0(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function eR(s,t){return ah(s,t.toTimestamp())}function Ci(s){return Ft(!!s,49232),vt.fromTimestamp((function(n){const r=er(n);return new ae(r.seconds,r.nanos)})(s))}function Gm(s,t){return mm(s,t).canonicalString()}function mm(s,t){const n=(function(o){return new re(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?n:n.child(t)}function Q0(s){const t=re.fromString(s);return Ft(W0(t),10190,{key:t.toString()}),t}function gm(s,t){return Gm(s.databaseId,t.path)}function Xd(s,t){const n=Q0(t);if(n.get(1)!==s.databaseId.projectId)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ft($0(n))}function X0(s,t){return Gm(s.databaseId,t)}function nR(s){const t=Q0(s);return t.length===4?re.emptyPath():$0(t)}function pm(s){return new re(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function $0(s){return Ft(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Lv(s,t,n){return{name:gm(s,t),fields:n.value.mapValue.fields}}function iR(s,t){let n;if("targetChange"in t){t.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:yt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(_,S){return _.useProto3Json?(Ft(S===void 0||typeof S=="string",58123),Qe.fromBase64String(S||"")):(Ft(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Qe.fromUint8Array(S||new Uint8Array))})(s,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(_){const S=_.code===void 0?J.UNKNOWN:G0(_.code);return new ut(S,_.message||"")})(f);n=new K0(r,o,u,g||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Xd(s,r.document.name),u=Ci(r.document.updateTime),f=r.document.createTime?Ci(r.document.createTime):vt.min(),g=new dn({mapValue:{fields:r.document.fields}}),p=Ze.newFoundDocument(o,u,f,g),_=r.targetIds||[],S=r.removedTargetIds||[];n=new Gc(_,S,p.key,p)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Xd(s,r.document),u=r.readTime?Ci(r.readTime):vt.min(),f=Ze.newNoDocument(o,u),g=r.removedTargetIds||[];n=new Gc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Xd(s,r.document),u=r.removedTargetIds||[];n=new Gc([],u,o,null)}else{if(!("filter"in t))return yt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new Kw(o,u),g=r.targetId;n=new F0(g,f)}}return n}function sR(s,t){let n;if(t instanceof Yl)n={update:Lv(s,t.key,t.value)};else if(t instanceof Bm)n={delete:gm(s,t.key)};else if(t instanceof or)n={update:Lv(s,t.key,t.data),updateMask:dR(t.fieldMask)};else{if(!(t instanceof Hw))return yt(16599,{Vt:t.type});n={verify:gm(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(u,f){const g=f.transform;if(g instanceof sh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Pl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof zl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof rh)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw yt(20930,{transform:f.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:eR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:yt(27497)})(s,t.precondition)),n}function rR(s,t){return s&&s.length>0?(Ft(t!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?Ci(o.updateTime):Ci(u);return f.isEqual(vt.min())&&(f=Ci(u)),new jw(f,o.transformResults||[])})(n,t)))):[]}function aR(s,t){return{documents:[X0(s,t.path)]}}function oR(s,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X0(s,o);const u=(function(_){if(_.length!==0)return Z0(Mi.create(_,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const f=(function(_){if(_.length!==0)return _.map((S=>(function(I){return{field:Fa(I.field),direction:cR(I.dir)}})(S)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=dm(s,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:n,parent:o}}function lR(s){let t=nR(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ft(r===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:t=t.child(S.collectionId)}let u=[];n.where&&(u=(function(A){const I=J0(A);return I instanceof Mi&&C0(I)?I.getFilters():[I]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((I=>(function($){return new ih(Ka($.field),(function(tt){switch(tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(I)))})(n.orderBy));let g=null;n.limit&&(g=(function(A){let I;return I=typeof A=="object"?A.value:A,vh(I)?null:I})(n.limit));let p=null;n.startAt&&(p=(function(A){const I=!!A.before,k=A.values||[];return new nh(k,I)})(n.startAt));let _=null;return n.endAt&&(_=(function(A){const I=!A.before,k=A.values||[];return new nh(k,I)})(n.endAt)),Rw(t,o,f,u,g,"F",p,_)}function uR(s,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function J0(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ka(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ka(n.unaryFilter.field);return Me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ka(n.unaryFilter.field);return Me.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ka(n.unaryFilter.field);return Me.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Me.create(Ka(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Mi.create(n.compositeFilter.filters.map((r=>J0(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(n.compositeFilter.op))})(s):yt(30097,{filter:s})}function cR(s){return Jw[s]}function hR(s){return Zw[s]}function fR(s){return Ww[s]}function Fa(s){return{fieldPath:s.canonicalString()}}function Ka(s){return Ke.fromServerFormat(s.fieldPath)}function Z0(s){return s instanceof Me?(function(n){if(n.op==="=="){if(Av(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Av(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(n.field),op:hR(n.op),value:n.value}}})(s):s instanceof Mi?(function(n){const r=n.getFilters().map((o=>Z0(o)));return r.length===1?r[0]:{compositeFilter:{op:fR(n.op),filters:r}}})(s):yt(54877,{filter:s})}function dR(s){const t=[];return s.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function W0(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,n,r,o,u=vt.min(),f=vt.min(),g=Qe.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Ks(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.yt=t}}function gR(s){const t=lR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.Cn=new yR}addToCollectionParentIndex(t,n){return this.Cn.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(tr.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(tr.min())}updateCollectionGroup(t,n,r){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class yR{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new xe(re.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new xe(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tT=41943040;class fn{static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(tT,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="LruGarbageCollector",_R=1048576;function zv([s,t],[n,r]){const o=xt(s,n);return o===0?xt(t,r):o}class vR{constructor(t){this.Ir=t,this.buffer=new xe(zv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ER{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(Pv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?rt(Pv,"Ignoring IndexedDB error during garbage collection: ",n):await co(n)}await this.Vr(3e5)}))}}class TR{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return X.resolve(_h.ce);const r=new vR(n);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(kv)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,o,u,f,g,p,_;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(t,o)))).next((A=>(r=A,g=Date.now(),this.removeTargets(t,r,n)))).next((A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(t,r)))).next((A=>(_=Date.now(),Ha()<=Mt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${A} documents in `+(_-p)+`ms
Total Duration: ${_-S}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function SR(s,t){return new TR(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.changes=new Wr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(r!==null&&Ol(r.mutation,o,wn.empty(),ae.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,Vt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=Vt()){const o=Hr();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,r).next((u=>{let f=bl();return u.forEach(((g,p)=>{f=f.insert(g,p.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const r=Hr();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,Vt())))}populateOverlays(t,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(t,n,r,o){let u=ss();const f=Nl(),g=(function(){return Nl()})();return n.forEach(((p,_)=>{const S=r.get(_.key);o.has(_.key)&&(S===void 0||S.mutation instanceof or)?u=u.insert(_.key,_):S!==void 0?(f.set(_.key,S.mutation.getFieldMask()),Ol(S.mutation,_,S.mutation.getFieldMask(),ae.now())):f.set(_.key,wn.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((_,S)=>f.set(_,S))),n.forEach(((_,S)=>g.set(_,new bR(S,f.get(_)??null)))),g)))}recalculateAndSaveOverlays(t,n){const r=Nl();let o=new ce(((f,g)=>f-g)),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const g of f)g.keys().forEach((p=>{const _=n.get(p);if(_===null)return;let S=r.get(p)||wn.empty();S=g.applyToLocalView(_,S),r.set(p,S);const A=(o.get(g.batchId)||Vt()).add(p);o=o.insert(g.batchId,A)}))})).next((()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),_=p.key,S=p.value,A=L0();S.forEach((I=>{if(!u.has(I)){const k=q0(n.get(I),r.get(I));k!==null&&A.set(I,k),u=u.add(I)}})),f.push(this.documentOverlayCache.saveOverlays(t,_,A))}return X.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,o){return(function(f){return ft.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Cw(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):X.resolve(Hr());let g=Vl,p=u;return f.next((_=>X.forEach(_,((S,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),u.get(S)?X.resolve():this.remoteDocumentCache.getEntry(t,S).next((I=>{p=p.insert(S,I)}))))).next((()=>this.populateOverlays(t,_,u))).next((()=>this.computeViews(t,p,_,Vt()))).next((S=>({batchId:g,changes:U0(S)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next((r=>{let o=bl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let f=bl();return this.indexManager.getCollectionParents(t,u).next((g=>X.forEach(g,(p=>{const _=(function(A,I){return new Th(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next((S=>{S.forEach(((A,I)=>{f=f.insert(A,I)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o)))).next((f=>{u.forEach(((p,_)=>{const S=_.getKey();f.get(S)===null&&(f=f.insert(S,Ze.newInvalidDocument(S)))}));let g=bl();return f.forEach(((p,_)=>{const S=u.get(p);S!==void 0&&Ol(S.mutation,_,wn.empty(),ae.now()),Ah(n,_)&&(g=g.insert(p,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ci(o.createTime)}})(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:gR(o.bundledQuery),readTime:Ci(o.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.overlays=new ce(ft.comparator),this.qr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Hr();return X.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((o,u)=>{this.St(t,n,u)})),X.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(t,n,r){const o=Hr(),u=n.length+1,f=new ft(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,_=p.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new ce(((_,S)=>_-S));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>r){let S=u.get(_.largestBatchId);S===null&&(S=Hr(),u=u.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=Hr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=o)););return X.resolve(g)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Fw(n,r));let u=this.qr.get(n);u===void 0&&(u=Vt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Qr=new xe(ke.$r),this.Ur=new xe(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new ke(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new ke(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new ft(new re([])),r=new ke(n,t),o=new ke(n,t+1),u=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new re([])),r=new ke(n,t),o=new ke(n,t+1);let u=Vt();return this.Ur.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(t){const n=new ke(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ke{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||xt(t.Yr,n.Yr)}static Kr(t,n){return xt(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xe(ke.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Gw(u,n,r,o);this.mutationQueue.push(f);for(const g of o)this.Zr=this.Zr.add(new ke(g.key,u)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(f)}lookupMutationBatch(t,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return X.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Um:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ke(n,0),o=new ke(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(f=>{const g=this.Xr(f.Yr);u.push(g)})),X.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new xe(xt);return n.forEach((o=>{const u=new ke(o,0),f=new ke(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{r=r.add(g.Yr)}))})),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;ft.isDocumentKey(u)||(u=u.child(""));const f=new ke(new ft(u),0);let g=new xe(xt);return this.Zr.forEachWhile((p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(g=g.add(p.Yr)),!0)}),f),X.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){Ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(n.mutations,(o=>{const u=new ke(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new ke(n,0),o=this.Zr.firstAfterOrEqual(r);return X.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t){this.ri=t,this.docs=(function(){return new ce(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let r=ss();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Ze.newInvalidDocument(o))})),X.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=ss();const f=n.path,g=new ft(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:_,value:{document:S}}=p.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||sw(iw(S),r)<=0||(o.has(S.key)||Ah(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return X.resolve(u)}getAllFromCollectionGroup(t,n,r,o){yt(9500)}ii(t,n){return X.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new DR(this)}getSize(t){return X.resolve(this.size)}}class DR extends AR{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),X.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(t){this.persistence=t,this.si=new Wr((n=>Pm(n)),zm),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fm,this.targetCount=0,this.ai=ro.ur()}forEachTarget(t,n){return this.si.forEach(((r,o)=>n(o))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),X.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.Pr(n),X.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,g.targetId)),o++)})),X.waitFor(u).next((()=>o))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return X.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),X.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(t,f))})),X.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return X.resolve(r)}containsKey(t,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(t,n){this.ui={},this.overlays={},this.ci=new _h(0),this.li=!1,this.li=!0,this.hi=new IR,this.referenceDelegate=t(this),this.Pi=new MR(this),this.indexManager=new pR,this.remoteDocumentCache=(function(o){return new OR(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new mR(n),this.Ii=new RR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new CR,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new NR(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){rt("MemoryPersistence","Starting transaction:",t);const o=new xR(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return X.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class xR extends aw{constructor(t){super(),this.currentSequenceNumber=t}}class Km{constructor(t){this.persistence=t,this.Ri=new Fm,this.Vi=null}static mi(t){return new Km(t)}get fi(){if(this.Vi)return this.Vi;throw yt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),X.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(r=>{const o=ft.fromPath(r);return this.gi(t,o).next((u=>{u||n.removeEntry(o,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class oh{constructor(t,n){this.persistence=t,this.pi=new Wr((r=>uw(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=SR(this,n)}static mi(t,n){return new oh(t,n)}Ei(){}di(t){return X.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return X.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?X.resolve():n(o)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(f=>this.br(t,f,n).next((g=>{g||(r++,u.removeEntry(f,vt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),X.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),X.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Bc(t.data.value)),n}br(t,n,r){return X.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return X.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=o}static As(t,n){let r=Vt(),o=Vt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ym(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return w1()?8:ow(tn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.ys(t,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new VR;return this.Ss(t,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(t,n,f,g.size)}))})).next((()=>u.result))}bs(t,n,r,o){return r.documentReadCount<this.fs?(Ha()<=Mt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",Ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ha()<=Mt.DEBUG&&rt("QueryEngine","Query:",Ga(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Ha()<=Mt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",Ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ri(n))):X.resolve())}ys(t,n){if(Cv(n))return X.resolve(null);let r=Ri(n);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=fm(n,null,"F"),r=Ri(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const f=Vt(...u);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,r).next((p=>{const _=this.Ds(n,g);return this.Cs(n,_,f,p.readTime)?this.ys(t,fm(n,null,"F")):this.vs(t,_,n,p)}))))})))))}ws(t,n,r,o){return Cv(n)||o.isEqual(vt.min())?X.resolve(null):this.ps.getDocuments(t,r).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?X.resolve(null):(Ha()<=Mt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ga(n)),this.vs(t,f,n,nw(o,Vl)).next((g=>g)))}))}Ds(t,n){let r=new xe(x0(t));return n.forEach(((o,u)=>{Ah(t,u)&&(r=r.add(u))})),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,r){return Ha()<=Mt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",Ga(n)),this.ps.getDocumentsMatchingQuery(t,n,tr.min(),r)}vs(t,n,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="LocalStore",LR=3e8;class kR{constructor(t,n,r,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ce(xt),this.xs=new Wr((u=>Pm(u)),zm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new wR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function PR(s,t,n,r){return new kR(s,t,n,r)}async function nT(s,t){const n=Tt(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],g=[];let p=Vt();for(const _ of o){f.push(_.batchId);for(const S of _.mutations)p=p.add(S.key)}for(const _ of u){g.push(_.batchId);for(const S of _.mutations)p=p.add(S.key)}return n.localDocuments.getDocuments(r,p).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:g})))}))}))}function zR(s,t){const n=Tt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,_,S){const A=_.batch,I=A.keys();let k=X.resolve();return I.forEach(($=>{k=k.next((()=>S.getEntry(p,$))).next((W=>{const tt=_.docVersions.get($);Ft(tt!==null,48541),W.version.compareTo(tt)<0&&(A.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),S.addEntry(W)))}))})),k.next((()=>g.mutationQueue.removeMutationBatch(p,A)))})(n,r,t,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let p=Vt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(p=p.add(g.batch.mutations[_].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function iT(s){const t=Tt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function jR(s,t){const n=Tt(s),r=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];t.targetChanges.forEach(((S,A)=>{const I=o.get(A);if(!I)return;g.push(n.Pi.removeMatchingKeys(u,S.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,S.addedDocuments,A))));let k=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?k=k.withResumeToken(Qe.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):S.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(S.resumeToken,r)),o=o.insert(A,k),(function(W,tt,gt){return W.resumeToken.approximateByteSize()===0||tt.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=LR?!0:gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0})(I,k,S)&&g.push(n.Pi.updateTargetData(u,k))}));let p=ss(),_=Vt();if(t.documentUpdates.forEach((S=>{t.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),g.push(BR(u,f,t.documentUpdates).next((S=>{p=S.ks,_=S.qs}))),!r.isEqual(vt.min())){const S=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));g.push(S)}return X.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,_))).next((()=>p))})).then((u=>(n.Ms=o,u)))}function BR(s,t,n){let r=Vt(),o=Vt();return n.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let f=ss();return n.forEach(((g,p)=>{const _=u.get(g);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(vt.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):rt(Qm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",p.version)})),{ks:f,qs:o}}))}function qR(s,t){const n=Tt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Um),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function HR(s,t){const n=Tt(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,t).next((u=>u?(o=u,X.resolve(o)):n.Pi.allocateTargetId(r).next((f=>(o=new Ks(t,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function ym(s,t,n){const r=Tt(s),o=r.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ho(f))throw f;rt(Qm,`Failed to update sequence numbers for target ${t}: ${f}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function jv(s,t,n){const r=Tt(s);let o=vt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,_,S){const A=Tt(p),I=A.xs.get(S);return I!==void 0?X.resolve(A.Ms.get(I)):A.Pi.getTargetData(_,S)})(r,f,Ri(t)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,g.targetId).next((p=>{u=p}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,t,n?o:vt.min(),n?u:Vt()))).next((g=>(GR(r,Nw(t),g),{documents:g,Qs:u})))))}function GR(s,t,n){let r=s.Os.get(t)||vt.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class Bv{constructor(){this.activeTargetIds=Uw()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class FR{constructor(){this.Mo=new Bv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Bv,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="ConnectivityMonitor";class Hv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(qv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(qv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function _m(){return Lc===null?Lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="RestConnection",YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QR{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,n,r,o,u){const f=_m(),g=this.zo(t,n.toUriEncodedString());rt($d,`Sending RPC '${t}' ${f}:`,g,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:_}=new URL(g),S=oo(_);return this.Jo(t,g,p,r,S).then((A=>(rt($d,`Received RPC '${t}' ${f}: `,A),A)),(A=>{throw eo($d,`RPC '${t}' ${f} failed with error: `,A,"url: ",g,"request:",r),A}))}Ho(t,n,r,o,u,f){return this.Go(t,n,r,o,u)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const r=YR[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e="WebChannelConnection";class $R extends QR{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,u){const f=_m();return new Promise(((g,p)=>{const _=new a0;_.setWithCredentials(!0),_.listenOnce(o0.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case jc.NO_ERROR:const A=_.getResponseJson();rt($e,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(A)),g(A);break;case jc.TIMEOUT:rt($e,`RPC '${t}' ${f} timed out`),p(new ut(J.DEADLINE_EXCEEDED,"Request time out"));break;case jc.HTTP_ERROR:const I=_.getStatus();if(rt($e,`RPC '${t}' ${f} failed with status:`,I,"response text:",_.getResponseText()),I>0){let k=_.getResponseJson();Array.isArray(k)&&(k=k[0]);const $=k==null?void 0:k.error;if($&&$.status&&$.message){const W=(function(gt){const _t=gt.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(_t)>=0?_t:J.UNKNOWN})($.status);p(new ut(W,$.message))}else p(new ut(J.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new ut(J.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{rt($e,`RPC '${t}' ${f} completed.`)}}));const S=JSON.stringify(o);rt($e,`RPC '${t}' ${f} sending request:`,o),_.send(n,"POST",S,r,15)}))}T_(t,n,r){const o=_m(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=c0(),g=u0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const S=u.join("");rt($e,`Creating RPC '${t}' stream ${o}: ${S}`,p);const A=f.createWebChannel(S,p);this.I_(A);let I=!1,k=!1;const $=new XR({Yo:tt=>{k?rt($e,`Not sending because RPC '${t}' stream ${o} is closed:`,tt):(I||(rt($e,`Opening RPC '${t}' stream ${o} transport.`),A.open(),I=!0),rt($e,`RPC '${t}' stream ${o} sending:`,tt),A.send(tt))},Zo:()=>A.close()}),W=(tt,gt,_t)=>{tt.listen(gt,(dt=>{try{_t(dt)}catch(Pt){setTimeout((()=>{throw Pt}),0)}}))};return W(A,Al.EventType.OPEN,(()=>{k||(rt($e,`RPC '${t}' stream ${o} transport opened.`),$.o_())})),W(A,Al.EventType.CLOSE,(()=>{k||(k=!0,rt($e,`RPC '${t}' stream ${o} transport closed`),$.a_(),this.E_(A))})),W(A,Al.EventType.ERROR,(tt=>{k||(k=!0,eo($e,`RPC '${t}' stream ${o} transport errored. Name:`,tt.name,"Message:",tt.message),$.a_(new ut(J.UNAVAILABLE,"The operation could not be completed")))})),W(A,Al.EventType.MESSAGE,(tt=>{var gt;if(!k){const _t=tt.data[0];Ft(!!_t,16349);const dt=_t,Pt=(dt==null?void 0:dt.error)||((gt=dt[0])==null?void 0:gt.error);if(Pt){rt($e,`RPC '${t}' stream ${o} received error:`,Pt);const zt=Pt.status;let Rt=(function(C){const x=Ie[C];if(x!==void 0)return G0(x)})(zt),N=Pt.message;Rt===void 0&&(Rt=J.INTERNAL,N="Unknown error status: "+zt+" with message "+Pt.message),k=!0,$.a_(new ut(Rt,N)),A.close()}else rt($e,`RPC '${t}' stream ${o} received:`,_t),$.u_(_t)}})),W(g,l0.STAT_EVENT,(tt=>{tt.stat===am.PROXY?rt($e,`RPC '${t}' stream ${o} detected buffering proxy`):tt.stat===am.NOPROXY&&rt($e,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(s){return new tR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(t,n,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&rt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class rT{constructor(t,n,r,o,u,f,g,p){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sT(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(is(n.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{t((()=>{const o=new ut(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt(Gv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(rt(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JR extends rT{constructor(t,n,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=iR(this.serializer,t),r=(function(u){if(!("targetChange"in u))return vt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?vt.min():f.readTime?Ci(f.readTime):vt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=pm(this.serializer),n.addTarget=(function(u,f){let g;const p=f.target;if(g=hm(p)?{documents:aR(u,p)}:{query:oR(u,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Y0(u,f.resumeToken);const _=dm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}else if(f.snapshotVersion.compareTo(vt.min())>0){g.readTime=ah(u,f.snapshotVersion.toTimestamp());const _=dm(u,f.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,t);const r=uR(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=pm(this.serializer),n.removeTarget=t,this.q_(n)}}class ZR extends rT{constructor(t,n,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=rR(t.writeResults,t.commitTime),r=Ci(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=pm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>sR(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{}class tC extends WR{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,mm(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ut(J.UNKNOWN,u.toString())}))}Ho(t,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,mm(n,r),o,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ut(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class eC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(n),this.aa=!1):rt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="RemoteStore";class nC{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ta(this)&&(rt(Xr,"Restarting streams for network reachability change."),await(async function(p){const _=Tt(p);_.Ea.add(4),await Xl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Ih(_)})(this))}))})),this.Ra=new eC(r,o)}}async function Ih(s){if(ta(s))for(const t of s.da)await t(!0)}async function Xl(s){for(const t of s.da)await t(!1)}function aT(s,t){const n=Tt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Zm(n)?Jm(n):fo(n).O_()&&$m(n,t))}function Xm(s,t){const n=Tt(s),r=fo(n);n.Ia.delete(t),r.O_()&&oT(n,t),n.Ia.size===0&&(r.O_()?r.L_():ta(n)&&n.Ra.set("Unknown"))}function $m(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fo(s).Y_(t)}function oT(s,t){s.Va.Ue(t),fo(s).Z_(t)}function Jm(s){s.Va=new $w({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),fo(s).start(),s.Ra.ua()}function Zm(s){return ta(s)&&!fo(s).x_()&&s.Ia.size>0}function ta(s){return Tt(s).Ea.size===0}function lT(s){s.Va=void 0}async function iC(s){s.Ra.set("Online")}async function sC(s){s.Ia.forEach(((t,n)=>{$m(s,t)}))}async function rC(s,t){lT(s),Zm(s)?(s.Ra.ha(t),Jm(s)):s.Ra.set("Unknown")}async function aC(s,t,n){if(s.Ra.set("Online"),t instanceof K0&&t.state===2&&t.cause)try{await(async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ia.delete(g),o.Va.removeTarget(g))})(s,t)}catch(r){rt(Xr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await lh(s,r)}else if(t instanceof Gc?s.Va.Ze(t):t instanceof F0?s.Va.st(t):s.Va.tt(t),!n.isEqual(vt.min()))try{const r=await iT(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const S=u.Ia.get(_);S&&u.Ia.set(_,S.withResumeToken(p.resumeToken,f))}})),g.targetMismatches.forEach(((p,_)=>{const S=u.Ia.get(p);if(!S)return;u.Ia.set(p,S.withResumeToken(Qe.EMPTY_BYTE_STRING,S.snapshotVersion)),oT(u,p);const A=new Ks(S.target,p,_,S.sequenceNumber);$m(u,A)})),u.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(r){rt(Xr,"Failed to raise snapshot:",r),await lh(s,r)}}async function lh(s,t,n){if(!ho(t))throw t;s.Ea.add(1),await Xl(s),s.Ra.set("Offline"),n||(n=()=>iT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{rt(Xr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ih(s)}))}function uT(s,t){return t().catch((n=>lh(s,n,t)))}async function Nh(s){const t=Tt(s),n=sr(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Um;for(;oC(t);)try{const o=await qR(t.localStore,r);if(o===null){t.Ta.length===0&&n.L_();break}r=o.batchId,lC(t,o)}catch(o){await lh(t,o)}cT(t)&&hT(t)}function oC(s){return ta(s)&&s.Ta.length<10}function lC(s,t){s.Ta.push(t);const n=sr(s);n.O_()&&n.X_&&n.ea(t.mutations)}function cT(s){return ta(s)&&!sr(s).x_()&&s.Ta.length>0}function hT(s){sr(s).start()}async function uC(s){sr(s).ra()}async function cC(s){const t=sr(s);for(const n of s.Ta)t.ea(n.mutations)}async function hC(s,t,n){const r=s.Ta.shift(),o=qm.from(r,t,n);await uT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Nh(s)}async function fC(s,t){t&&sr(s).X_&&await(async function(r,o){if((function(f){return Yw(f)&&f!==J.ABORTED})(o.code)){const u=r.Ta.shift();sr(r).B_(),await uT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Nh(r)}})(s,t),cT(s)&&hT(s)}async function Fv(s,t){const n=Tt(s);n.asyncQueue.verifyOperationInProgress(),rt(Xr,"RemoteStore received new credentials");const r=ta(n);n.Ea.add(3),await Xl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ih(n)}async function dC(s,t){const n=Tt(s);t?(n.Ea.delete(2),await Ih(n)):t||(n.Ea.add(2),await Xl(n),n.Ra.set("Unknown"))}function fo(s){return s.ma||(s.ma=(function(n,r,o){const u=Tt(n);return u.sa(),new JR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:iC.bind(null,s),t_:sC.bind(null,s),r_:rC.bind(null,s),H_:aC.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Zm(s)?Jm(s):s.Ra.set("Unknown")):(await s.ma.stop(),lT(s))}))),s.ma}function sr(s){return s.fa||(s.fa=(function(n,r,o){const u=Tt(n);return u.sa(),new ZR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:uC.bind(null,s),r_:fC.bind(null,s),ta:cC.bind(null,s),na:hC.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Nh(s)):(await s.fa.stop(),s.Ta.length>0&&(rt(Xr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const f=Date.now()+r,g=new Wm(t,n,f,o,u);return g.start(r),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(s,t){if(is("AsyncQueue",`${t}: ${s}`),ho(s))return new ut(J.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(t){return new Ya(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||ft.comparator(n.key,r.key):(n,r)=>ft.comparator(n.key,r.key),this.keyedMap=bl(),this.sortedSet=new ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ya)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.ga=new ce(ft.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):yt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class ao{constructor(t,n,r,o,u,f,g,p,_){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(t,n,r,o,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new ao(t,n,Ya.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Sh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class gC{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Tt(n),u=o.queries;o.queries=Yv(),u.forEach(((f,g)=>{for(const p of g.Sa)p.onError(r)}))})(this,new ut(J.ABORTED,"Firestore shutting down"))}}function Yv(){return new Wr((s=>M0(s)),Sh)}async function pC(s,t){const n=Tt(s);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new mC,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=tg(f,`Initialization of query '${Ga(t.query)}' failed`);return void t.onError(g)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&eg(n)}async function yC(s,t){const n=Tt(s),r=t.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _C(s,t){const n=Tt(s);let r=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(o)&&(r=!0);f.wa=o}}r&&eg(n)}function vC(s,t,n){const r=Tt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(t)}function eg(s){s.Ca.forEach((t=>{t.next()}))}var vm,Qv;(Qv=vm||(vm={})).Ma="default",Qv.Cache="cache";class EC{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new ao(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ao.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t){this.key=t}}class dT{constructor(t){this.key=t}}class TC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=x0(t),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new Kv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((S,A)=>{const I=o.get(S),k=Ah(this.query,A)?A:null,$=!!I&&this.mutatedKeys.has(I.key),W=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let tt=!1;I&&k?I.data.isEqual(k.data)?$!==W&&(r.track({type:3,doc:k}),tt=!0):this.su(I,k)||(r.track({type:2,doc:k}),tt=!0,(p&&this.eu(k,p)>0||_&&this.eu(k,_)<0)&&(g=!0)):!I&&k?(r.track({type:0,doc:k}),tt=!0):I&&!k&&(r.track({type:1,doc:I}),tt=!0,(p||_)&&(g=!0)),tt&&(k?(f=f.add(k),u=W?u.add(S):u.delete(S)):(f=f.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{tu:f,iu:r,Cs:g,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((S,A)=>(function(k,$){const W=tt=>{switch(tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Rt:tt})}};return W(k)-W($)})(S.type,A.type)||this.eu(S.doc,A.doc))),this.ou(r),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,_=p!==this.Za;return this.Za=p,f.length!==0||_?{snapshot:new ao(this.query,t.tu,u,f,t.mutatedKeys,p===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new dT(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new fT(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=Vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class SC{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class AC{constructor(t){this.key=t,this.hu=!1}}class bC{constructor(t,n,r,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Wr((g=>M0(g)),Sh),this.Iu=new Map,this.Eu=new Set,this.du=new ce(ft.comparator),this.Au=new Map,this.Ru=new Fm,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wC(s,t,n=!0){const r=vT(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await mT(r,t,n,!0),o}async function RC(s,t){const n=vT(s);await mT(n,t,!0,!1)}async function mT(s,t,n,r){const o=await HR(s.localStore,Ri(t)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await CC(s,t,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&aT(s.remoteStore,o),g}async function CC(s,t,n,r,o){s.pu=(A,I,k)=>(async function(W,tt,gt,_t){let dt=tt.view.ru(gt);dt.Cs&&(dt=await jv(W.localStore,tt.query,!1).then((({documents:N})=>tt.view.ru(N,dt))));const Pt=_t&&_t.targetChanges.get(tt.targetId),zt=_t&&_t.targetMismatches.get(tt.targetId)!=null,Rt=tt.view.applyChanges(dt,W.isPrimaryClient,Pt,zt);return $v(W,tt.targetId,Rt.au),Rt.snapshot})(s,A,I,k);const u=await jv(s.localStore,t,!0),f=new TC(t,u.Qs),g=f.ru(u.documents),p=Ql.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),_=f.applyChanges(g,s.isPrimaryClient,p);$v(s,n,_.au);const S=new SC(t,n,f);return s.Tu.set(t,S),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),_.snapshot}async function IC(s,t,n){const r=Tt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!Sh(f,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await ym(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Xm(r.remoteStore,o.targetId),Em(r,o.targetId)})).catch(co)):(Em(r,o.targetId),await ym(r.localStore,o.targetId,!0))}async function NC(s,t){const n=Tt(s),r=n.Tu.get(t),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xm(n.remoteStore,r.targetId))}async function OC(s,t,n){const r=kC(s);try{const o=await(function(f,g){const p=Tt(f),_=ae.now(),S=g.reduce(((k,$)=>k.add($.key)),Vt());let A,I;return p.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let $=ss(),W=Vt();return p.Ns.getEntries(k,S).next((tt=>{$=tt,$.forEach(((gt,_t)=>{_t.isValidDocument()||(W=W.add(gt))}))})).next((()=>p.localDocuments.getOverlayedDocuments(k,$))).next((tt=>{A=tt;const gt=[];for(const _t of g){const dt=qw(_t,A.get(_t.key).overlayedDocument);dt!=null&&gt.push(new or(_t.key,dt,b0(dt.value.mapValue),ei.exists(!0)))}return p.mutationQueue.addMutationBatch(k,_,gt,g)})).next((tt=>{I=tt;const gt=tt.applyToLocalDocumentSet(A,W);return p.documentOverlayCache.saveOverlays(k,tt.batchId,gt)}))})).then((()=>({batchId:I.batchId,changes:U0(A)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(f,g,p){let _=f.Vu[f.currentUser.toKey()];_||(_=new ce(xt)),_=_.insert(g,p),f.Vu[f.currentUser.toKey()]=_})(r,o.batchId,n),await $l(r,o.changes),await Nh(r.remoteStore)}catch(o){const u=tg(o,"Failed to persist write");n.reject(u)}}async function gT(s,t){const n=Tt(s);try{const r=await jR(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ft(f.hu,14607):o.removedDocuments.size>0&&(Ft(f.hu,42227),f.hu=!1))})),await $l(n,r,t)}catch(r){await co(r)}}function Xv(s,t,n){const r=Tt(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const g=f.view.va(t);g.snapshot&&o.push(g.snapshot)})),(function(f,g){const p=Tt(f);p.onlineState=g;let _=!1;p.queries.forEach(((S,A)=>{for(const I of A.Sa)I.va(g)&&(_=!0)})),_&&eg(p)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function DC(s,t,n){const r=Tt(s);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Au.get(t),u=o&&o.key;if(u){let f=new ce(ft.comparator);f=f.insert(u,Ze.newNoDocument(u,vt.min()));const g=Vt().add(u),p=new Rh(vt.min(),new Map,new ce(xt),f,g);await gT(r,p),r.du=r.du.remove(u),r.Au.delete(t),ig(r)}else await ym(r.localStore,t,!1).then((()=>Em(r,t,n))).catch(co)}async function MC(s,t){const n=Tt(s),r=t.batch.batchId;try{const o=await zR(n.localStore,t);yT(n,r,null),pT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $l(n,o)}catch(o){await co(o)}}async function xC(s,t,n){const r=Tt(s);try{const o=await(function(f,g){const p=Tt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return p.mutationQueue.lookupMutationBatch(_,g).next((A=>(Ft(A!==null,37113),S=A.keys(),p.mutationQueue.removeMutationBatch(_,A)))).next((()=>p.mutationQueue.performConsistencyCheck(_))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>p.localDocuments.getDocuments(_,S)))}))})(r.localStore,t);yT(r,t,n),pT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $l(r,o)}catch(o){await co(o)}}function pT(s,t){(s.mu.get(t)||[]).forEach((n=>{n.resolve()})),s.mu.delete(t)}function yT(s,t,n){const r=Tt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function Em(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||_T(s,r)}))}function _T(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(Xm(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),ig(s))}function $v(s,t,n){for(const r of n)r instanceof fT?(s.Ru.addReference(r.key,t),VC(s,r)):r instanceof dT?(rt(ng,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||_T(s,r.key)):yt(19791,{wu:r})}function VC(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(rt(ng,"New document in limbo: "+n),s.Eu.add(r),ig(s))}function ig(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new ft(re.fromString(t)),r=s.fu.next();s.Au.set(r,new AC(n)),s.du=s.du.insert(n,r),aT(s.remoteStore,new Ks(Ri(D0(n.path)),r,"TargetPurposeLimboResolution",_h.ce))}}async function $l(s,t,n){const r=Tt(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,p)=>{f.push(r.pu(p,t,n).then((_=>{var S;if((_||n)&&r.isPrimaryClient){const A=_?!_.fromCache:(S=n==null?void 0:n.targetChanges.get(p.targetId))==null?void 0:S.current;r.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Ym.As(p.targetId,_);u.push(A)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(p,_){const S=Tt(p);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>X.forEach(_,(I=>X.forEach(I.Es,(k=>S.persistence.referenceDelegate.addReference(A,I.targetId,k))).next((()=>X.forEach(I.ds,(k=>S.persistence.referenceDelegate.removeReference(A,I.targetId,k)))))))))}catch(A){if(!ho(A))throw A;rt(Qm,"Failed to update sequence numbers: "+A)}for(const A of _){const I=A.targetId;if(!A.fromCache){const k=S.Ms.get(I),$=k.snapshotVersion,W=k.withLastLimboFreeSnapshotVersion($);S.Ms=S.Ms.insert(I,W)}}})(r.localStore,u))}async function UC(s,t){const n=Tt(s);if(!n.currentUser.isEqual(t)){rt(ng,"User change. New user:",t.toKey());const r=await nT(n.localStore,t);n.currentUser=t,(function(u,f){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new ut(J.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await $l(n,r.Ls)}}function LC(s,t){const n=Tt(s),r=n.Au.get(t);if(r&&r.hu)return Vt().add(r.key);{let o=Vt();const u=n.Iu.get(t);if(!u)return o;for(const f of u){const g=n.Tu.get(f);o=o.unionWith(g.view.nu)}return o}}function vT(s){const t=Tt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=gT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=DC.bind(null,t),t.Pu.H_=_C.bind(null,t.eventManager),t.Pu.yu=vC.bind(null,t.eventManager),t}function kC(s){const t=Tt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=MC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xC.bind(null,t),t}class uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ch(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return PR(this.persistence,new UR,t.initialUser,this.serializer)}Cu(t){return new eT(Km.mi,this.serializer)}Du(t){return new FR}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uh.provider={build:()=>new uh};class PC extends uh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ft(this.persistence.referenceDelegate instanceof oh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ER(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new eT((r=>oh.mi(r,n)),this.serializer)}}class Tm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UC.bind(null,this.syncEngine),await dC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gC})()}createDatastore(t){const n=Ch(t.databaseInfo.databaseId),r=(function(u){return new $R(u)})(t.databaseInfo);return(function(u,f,g,p){return new tC(u,f,g,p)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,o,u,f,g){return new nC(r,o,u,f,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>Xv(this.syncEngine,n,0)),(function(){return Hv.v()?new Hv:new KR})())}createSyncEngine(t,n){return(function(o,u,f,g,p,_,S){const A=new bC(o,u,f,g,p,_);return S&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(o){const u=Tt(o);rt(Xr,"RemoteStore shutting down."),u.Ea.add(5),await Xl(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):is("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="FirestoreClient";class jC{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Je.UNAUTHENTICATED,this.clientId=xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{rt(rr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(rt(rr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=tg(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Zd(s,t){s.asyncQueue.verifyOperationInProgress(),rt(rr,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await nT(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function Jv(s,t){s.asyncQueue.verifyOperationInProgress();const n=await BC(s);rt(rr,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((r=>Fv(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Fv(t.remoteStore,o))),s._onlineComponents=t}async function BC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(rr,"Using user provided OfflineComponentProvider");try{await Zd(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await Zd(s,new uh)}}else rt(rr,"Using default OfflineComponentProvider"),await Zd(s,new PC(void 0));return s._offlineComponents}async function ET(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(rr,"Using user provided OnlineComponentProvider"),await Jv(s,s._uninitializedComponentsProvider._online)):(rt(rr,"Using default OnlineComponentProvider"),await Jv(s,new Tm))),s._onlineComponents}function qC(s){return ET(s).then((t=>t.syncEngine))}async function HC(s){const t=await ET(s),n=t.eventManager;return n.onListen=wC.bind(null,t.syncEngine),n.onUnlisten=IC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=RC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NC.bind(null,t.syncEngine),n}function GC(s,t,n={}){const r=new Js;return s.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,p,_){const S=new zC({next:I=>{S.Nu(),f.enqueueAndForget((()=>yC(u,A))),I.fromCache&&p.source==="server"?_.reject(new ut(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(I)},error:I=>_.reject(I)}),A=new EC(g,S,{includeMetadataChanges:!0,qa:!0});return pC(u,A)})(await HC(s),s.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firestore.googleapis.com",Wv=!0;class tE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ST,this.ssl=Wv}else this.host=t.host,this.ssl=t.ssl??Wv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=tT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_R)throw new ut(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ew("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Oh{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Fb;switch(r.type){case"firstParty":return new Xb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ut(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Zv.get(n);r&&(rt("ComponentProvider","Removing Datastore"),Zv.delete(n),r.terminate())})(this),Promise.resolve()}}function FC(s,t,n,r={}){var _;s=Qr(s,Oh);const o=oo(t),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},g=`${t}:${n}`;o&&(JE(`https://${g}`),ZE("Firestore",!0)),u.host!==ST&&u.host!==g&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:o,emulatorOptions:r};if(!Fr(p,f)&&(s._setSettings(p),r.mockUserToken)){let S,A;if(typeof r.mockUserToken=="string")S=r.mockUserToken,A=Je.MOCK_USER;else{S=p1(r.mockUserToken,(_=s._app)==null?void 0:_.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new ut(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Je(I)}s._authCredentials=new Kb(new f0(S,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Dh(this.firestore,t,this._query)}}class Pe{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pe(this.firestore,t,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Kl(n,Pe._jsonSchema))return new Pe(t,r||null,new ft(re.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:Ne("string",Pe._jsonSchemaVersion),referencePath:Ne("string")};class Zs extends Dh{constructor(t,n,r){super(t,n,D0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pe(this.firestore,null,new ft(t))}withConverter(t){return new Zs(this.firestore,t,this._path)}}function eE(s,t,...n){if(s=Ye(s),d0("collection","path",t),s instanceof Oh){const r=re.fromString(t,...n);return mv(r),new Zs(s,null,r)}{if(!(s instanceof Pe||s instanceof Zs))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(re.fromString(t,...n));return mv(r),new Zs(s.firestore,null,r)}}function Sm(s,t,...n){if(s=Ye(s),arguments.length===1&&(t=xm.newId()),d0("doc","path",t),s instanceof Oh){const r=re.fromString(t,...n);return dv(r),new Pe(s,null,new ft(r))}{if(!(s instanceof Pe||s instanceof Zs))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(re.fromString(t,...n));return dv(r),new Pe(s.firestore,s instanceof Zs?s.converter:null,new ft(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="AsyncQueue";class iE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sT(this,"async_queue_retry"),this._c=()=>{const r=Jd();r&&rt(nE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Js;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ho(t))throw t;rt(nE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",sE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Wm.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&yt(47125,{Pc:sE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function sE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}class Jl extends Oh{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new iE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new iE(t),this._firestoreClient=void 0,await t}}}function KC(s,t){const n=typeof s=="object"?s:n0(),r=typeof s=="string"?s:th,o=Dm(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=m1("firestore");u&&FC(o,...u)}return o}function AT(s){if(s._terminated)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||YC(s),s._firestoreClient}function YC(s){var r,o,u;const t=s._freezeSettings(),n=(function(g,p,_,S){return new fw(g,p,_,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,TT(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new jC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new zn(Qe.fromBase64String(t))}catch(n){throw new ut(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new zn(Qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Kl(t,zn._jsonSchema))return zn.fromBase64String(t.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Ne("string",zn._jsonSchemaVersion),bytes:Ne("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ut(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ut(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ut(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(t){if(Kl(t,Ii._jsonSchema))return new Ii(t.latitude,t.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:Ne("string",Ii._jsonSchemaVersion),latitude:Ne("number"),longitude:Ne("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Kl(t,Ni._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ni(t.vectorValues);throw new ut(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Ne("string",Ni._jsonSchemaVersion),vectorValues:Ne("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=/^__.*__$/;class XC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new or(t,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(t,this.data,n,this.fieldTransforms)}}class bT{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new or(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function wT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ac:s})}}class rg{constructor(t,n,r,o,u,f){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new rg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return ch(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(wT(this.Ac)&&QC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class $C{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Ch(t)}Cc(t,n,r,o=!1){return new rg({Ac:t,methodName:n,Dc:r,path:Ke.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RT(s){const t=s._freezeSettings(),n=Ch(s._databaseId);return new $C(s._databaseId,!!t.ignoreUndefinedProperties,n)}function JC(s,t,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,t,n,o);ag("Data must be an object, but it was:",f,r);const g=CT(r,f);let p,_;if(u.merge)p=new wn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const S=[];for(const A of u.mergeFields){const I=Am(t,A,n);if(!f.contains(I))throw new ut(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);NT(S,I)||S.push(I)}p=new wn(S),_=f.fieldTransforms.filter((A=>p.covers(A.field)))}else p=null,_=f.fieldTransforms;return new XC(new dn(g),p,_)}class xh extends sg{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof xh}}function ZC(s,t,n,r){const o=s.Cc(1,t,n);ag("Data must be an object, but it was:",o,r);const u=[],f=dn.empty();ar(r,((p,_)=>{const S=og(t,p,n);_=Ye(_);const A=o.yc(S);if(_ instanceof xh)u.push(S);else{const I=Vh(_,A);I!=null&&(u.push(S),f.set(S,I))}}));const g=new wn(u);return new bT(f,g,o.fieldTransforms)}function WC(s,t,n,r,o,u){const f=s.Cc(1,t,n),g=[Am(t,r,n)],p=[o];if(u.length%2!=0)throw new ut(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)g.push(Am(t,u[I])),p.push(u[I+1]);const _=[],S=dn.empty();for(let I=g.length-1;I>=0;--I)if(!NT(_,g[I])){const k=g[I];let $=p[I];$=Ye($);const W=f.yc(k);if($ instanceof xh)_.push(k);else{const tt=Vh($,W);tt!=null&&(_.push(k),S.set(k,tt))}}const A=new wn(_);return new bT(S,A,f.fieldTransforms)}function Vh(s,t){if(IT(s=Ye(s)))return ag("Unsupported field value:",t,s),CT(s,t);if(s instanceof sg)return(function(r,o){if(!wT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const g of r){let p=Vh(g,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Lw(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ae.fromDate(r);return{timestampValue:ah(o.serializer,u)}}if(r instanceof ae){const u=new ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ah(o.serializer,u)}}if(r instanceof Ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:Y0(o.serializer,r._byteString)};if(r instanceof Pe){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ni)return(function(f,g){return{mapValue:{fields:{[S0]:{stringValue:A0},[eh]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return jm(g.serializer,_)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Vm(r)}`)})(s,t)}function CT(s,t){const n={};return p0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ar(s,((r,o)=>{const u=Vh(o,t.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function IT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ae||s instanceof Ii||s instanceof zn||s instanceof Pe||s instanceof sg||s instanceof Ni)}function ag(s,t,n){if(!IT(n)||!m0(n)){const r=Vm(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function Am(s,t,n){if((t=Ye(t))instanceof Mh)return t._internalPath;if(typeof t=="string")return og(s,t);throw ch("Field path arguments must be of type string or ",s,!1,void 0,n)}const tI=new RegExp("[~\\*/\\[\\]]");function og(s,t,n){if(t.search(tI)>=0)throw ch(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Mh(...t.split("."))._internalPath}catch{throw ch(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function ch(s,t,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new ut(J.INVALID_ARGUMENT,g+s+p)}function NT(s,t){return s.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(DT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eI extends OT{data(){return super.data()}}function DT(s,t){return typeof t=="string"?og(s,t):t instanceof Mh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ut(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iI{convertValue(t,n="none"){switch(ir(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(nr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw yt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ar(t,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(t){var r,o,u;const n=(u=(o=(r=t.fields)==null?void 0:r[eh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>_e(f.doubleValue)));return new Ni(n)}convertGeoPoint(t){return new Ii(_e(t.latitude),_e(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Eh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ul(t));default:return null}}convertTimestamp(t){const n=er(t);return new ae(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=re.fromString(t);Ft(W0(r),9688,{name:t});const o=new Ll(r.get(1),r.get(3)),u=new ft(r.popFirst(5));return o.isEqual(n)||is(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(s,t,n){let r;return r=s?s.toFirestore(t):t,r}class kc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qa extends OT{constructor(t,n,r,o,u,f){super(t,n,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(DT("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Qa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qa._jsonSchema={type:Ne("string",Qa._jsonSchemaVersion),bundleSource:Ne("string","DocumentSnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class Fc extends Qa{data(t={}){return super.data(t)}}class Xa{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new kc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new kc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ut(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((g=>{const p=new Fc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new kc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new Fc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new kc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,S=-1;return g.type!==0&&(_=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),S=f.indexOf(g.doc.key)),{type:rI(g.type),doc:p,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function rI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:s})}}Xa._jsonSchemaVersion="firestore/querySnapshot/1.0",Xa._jsonSchema={type:Ne("string",Xa._jsonSchemaVersion),bundleSource:Ne("string","QuerySnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class aI extends iI{constructor(t){super(),this.firestore=t}convertBytes(t){return new zn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function oI(s){s=Qr(s,Dh);const t=Qr(s.firestore,Jl),n=AT(t),r=new aI(t);return nI(s._query),GC(n,s._query).then((o=>new Xa(t,r,s,o)))}function lI(s,t,n,...r){s=Qr(s,Pe);const o=Qr(s.firestore,Jl),u=RT(o);let f;return f=typeof(t=Ye(t))=="string"||t instanceof Mh?WC(u,"updateDoc",s._key,t,n,r):ZC(u,"updateDoc",s._key,t),lg(o,[f.toMutation(s._key,ei.exists(!0))])}function uI(s){return lg(Qr(s.firestore,Jl),[new Bm(s._key,ei.none())])}function cI(s,t){const n=Qr(s.firestore,Jl),r=Sm(s),o=sI(s.converter,t);return lg(n,[JC(RT(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,ei.exists(!1))]).then((()=>r))}function lg(s,t){return(function(r,o){const u=new Js;return r.asyncQueue.enqueueAndForget((async()=>OC(await qC(r),o,u))),u.promise})(AT(s),t)}(function(t,n=!0){(function(o){uo=o})(lo),to(new Kr("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new Jl(new Yb(r.getProvider("auth-internal")),new $b(f,r.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ut(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(_.options.projectId,S)})(f,o),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Xs(uv,cv,t),Xs(uv,cv,"esm2020")})();function MT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hI=MT,xT=new Gl("auth","Firebase",MT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Nm("@firebase/auth");function fI(s,...t){hh.logLevel<=Mt.WARN&&hh.warn(`Auth (${lo}): ${s}`,...t)}function Kc(s,...t){hh.logLevel<=Mt.ERROR&&hh.error(`Auth (${lo}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(s,...t){throw cg(s,...t)}function ni(s,...t){return cg(s,...t)}function ug(s,t,n){const r={...hI(),[t]:n};return new Gl("auth","Firebase",r).create(t,{appName:s.name})}function es(s){return ug(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dI(s,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&jn(s,"argument-error"),ug(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cg(s,...t){if(typeof s!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return xT.create(s,...t)}function pt(s,t,...n){if(!s)throw cg(t,...n)}function Wi(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Kc(t),new Error(t)}function rs(s,t){s||Wi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function mI(){return rE()==="http:"||rE()==="https:"}function rE(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mI()||S1()||"connection"in navigator)?navigator.onLine:!0}function pI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(t,n){this.shortDelay=t,this.longDelay=n,rs(n>t,"Short delay should be less than long delay!"),this.isMobile=v1()||A1()}get(){return gI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(s,t){rs(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vI=new Zl(3e4,6e4);function lr(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function ur(s,t,n,r,o={}){return UT(s,o,async()=>{let u={},f={};r&&(t==="GET"?f=r:u={body:JSON.stringify(r)});const g=Fl({key:s.config.apiKey,...f}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const _={method:t,headers:p,...u};return T1()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&oo(s.emulatorConfig.host)&&(_.credentials="include"),VT.fetch()(await LT(s,s.config.apiHost,n,g),_)})}async function UT(s,t,n){s._canInitEmulator=!1;const r={...yI,...t};try{const o=new TI(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Pc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[p,_]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw Pc(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw Pc(s,"user-disabled",f);const S=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw ug(s,S,_);jn(s,S)}}catch(o){if(o instanceof as)throw o;jn(s,"network-request-failed",{message:String(o)})}}async function Wl(s,t,n,r,o={}){const u=await ur(s,t,n,r,o);return"mfaPendingCredential"in u&&jn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function LT(s,t,n,r){const o=`${t}${n}?${r}`,u=s,f=u.config.emulator?hg(s.config,o):`${s.config.apiScheme}://${o}`;return _I.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function EI(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),vI.get())})}}function Pc(s,t,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ni(s,t,r);return o.customData._tokenResponse=n,o}function aE(s){return s!==void 0&&s.enterprise!==void 0}class SI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return EI(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AI(s,t){return ur(s,"GET","/v2/recaptchaConfig",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(s,t){return ur(s,"POST","/v1/accounts:delete",t)}async function fh(s,t){return ur(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function wI(s,t=!1){const n=Ye(s),r=await n.getIdToken(t),o=fg(r);pt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Dl(Wd(o.auth_time)),issuedAtTime:Dl(Wd(o.iat)),expirationTime:Dl(Wd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Wd(s){return Number(s)*1e3}function fg(s){const[t,n,r]=s.split(".");if(t===void 0||n===void 0||r===void 0)return Kc("JWT malformed, contained fewer than 3 sections"),null;try{const o=YE(n);return o?JSON.parse(o):(Kc("Failed to decode base64 JWT payload"),null)}catch(o){return Kc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function oE(s){const t=fg(s);return pt(t,"internal-error"),pt(typeof t.exp<"u","internal-error"),pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(s,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof as&&RI(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function RI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(s){var A;const t=s.auth,n=await s.getIdToken(),r=await jl(s,fh(t,{idToken:n}));pt(r==null?void 0:r.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(A=o.providerUserInfo)!=null&&A.length?kT(o.providerUserInfo):[],f=NI(s.providerData,u),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),_=g?p:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new wm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,S)}async function II(s){const t=Ye(s);await dh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function NI(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function kT(s){return s.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(s,t){const n=await UT(s,{},async()=>{const r=Fl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await LT(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:r};return s.emulatorConfig&&oo(s.emulatorConfig.host)&&(p.credentials="include"),VT.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DI(s,t){return ur(s,"POST","/v2/accounts:revokeToken",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pt(t.idToken,"internal-error"),pt(typeof t.idToken<"u","internal-error"),pt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):oE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){pt(t.length!==0,"internal-error");const n=oE(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await OI(t,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new $a;return r&&(pt(typeof r=="string","internal-error",{appName:t}),f.refreshToken=r),o&&(pt(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(pt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(s,t){pt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ti{constructor({uid:t,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new wm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await jl(this,this.stsTokenManager.getToken(this.auth,t));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return wI(this,t)}reload(){return II(this)}_assign(t){this!==t&&(pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new ti({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(es(this.auth));const t=await this.getIdToken();return await jl(this,bI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,_=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:A,emailVerified:I,isAnonymous:k,providerData:$,stsTokenManager:W}=n;pt(A&&W,t,"internal-error");const tt=$a.fromJSON(this.name,W);pt(typeof A=="string",t,"internal-error"),Bs(r,t.name),Bs(o,t.name),pt(typeof I=="boolean",t,"internal-error"),pt(typeof k=="boolean",t,"internal-error"),Bs(u,t.name),Bs(f,t.name),Bs(g,t.name),Bs(p,t.name),Bs(_,t.name),Bs(S,t.name);const gt=new ti({uid:A,auth:t,email:o,emailVerified:I,displayName:r,isAnonymous:k,photoURL:f,phoneNumber:u,tenantId:g,stsTokenManager:tt,createdAt:_,lastLoginAt:S});return $&&Array.isArray($)&&(gt.providerData=$.map(_t=>({..._t}))),p&&(gt._redirectEventId=p),gt}static async _fromIdTokenResponse(t,n,r=!1){const o=new $a;o.updateFromServerResponse(n);const u=new ti({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await dh(u),u}static async _fromGetAccountInfoResponse(t,n,r){const o=n.users[0];pt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?kT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new $a;g.updateFromIdToken(r);const p=new ti({uid:o.localId,auth:t,stsTokenManager:g,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new wm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,_),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=new Map;function ts(s){rs(s instanceof Function,"Expected a class definition");let t=lE.get(s);return t?(rs(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,lE.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}PT.type="NONE";const uE=PT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(s,t,n){return`firebase:${s}:${t}:${n}`}class Ja{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Yc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Yc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await fh(this.auth,{idToken:t}).catch(()=>{});return n?ti._fromGetAccountInfoResponse(this.auth,n,t):null}return ti._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ja(ts(uE),t,r);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||ts(uE);const f=Yc(r,t.config.apiKey,t.name);let g=null;for(const _ of n)try{const S=await _._get(f);if(S){let A;if(typeof S=="string"){const I=await fh(t,{idToken:S}).catch(()=>{});if(!I)break;A=await ti._fromGetAccountInfoResponse(t,I,S)}else A=ti._fromJSON(t,S);_!==u&&(g=A),u=_;break}}catch{}const p=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ja(u,t,r):(u=p[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new Ja(u,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(GT(t))return"Blackberry";if(FT(t))return"Webos";if(jT(t))return"Safari";if((t.includes("chrome/")||BT(t))&&!t.includes("edge/"))return"Chrome";if(HT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zT(s=tn()){return/firefox\//i.test(s)}function jT(s=tn()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function BT(s=tn()){return/crios\//i.test(s)}function qT(s=tn()){return/iemobile/i.test(s)}function HT(s=tn()){return/android/i.test(s)}function GT(s=tn()){return/blackberry/i.test(s)}function FT(s=tn()){return/webos/i.test(s)}function dg(s=tn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function MI(s=tn()){var t;return dg(s)&&!!((t=window.navigator)!=null&&t.standalone)}function xI(){return b1()&&document.documentMode===10}function KT(s=tn()){return dg(s)||HT(s)||FT(s)||GT(s)||/windows phone/i.test(s)||qT(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(s,t=[]){let n;switch(s){case"Browser":n=cE(tn());break;case"Worker":n=`${cE(tn())}-${s}`;break;default:n=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=u=>new Promise((f,g)=>{try{const p=t(u);f(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(s,t={}){return ur(s,"GET","/v2/passwordPolicy",lr(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=6;class kI{constructor(t){var r;const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=t.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(t,n,r,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hE(this),this.idTokenSubscription=new hE(this),this.beforeStateQueue=new VI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ts(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,t),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await fh(this,{idToken:t}),r=await ti._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var u;if(bn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,g=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(t);(!f||f===g)&&(p!=null&&p.user)&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await dh(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=pI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(bn(this.app))return Promise.reject(es(this));const n=t?Ye(t):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return bn(this.app)?Promise.reject(es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ts(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await UI(this),n=new kI(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gl("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DI(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ts(t)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[ts(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=t.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var n;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return t!=null&&t.error&&fI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function cr(s){return Ye(s)}class hE{constructor(t){this.auth=t,this.observer=null,this.addObserver=M1(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zI(s){Uh=s}function QT(s){return Uh.loadJS(s)}function jI(){return Uh.recaptchaEnterpriseScript}function BI(){return Uh.gapiScript}function qI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class HI{constructor(){this.enterprise=new GI}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class GI{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const FI="recaptcha-enterprise",XT="NO_RECAPTCHA";class KI{constructor(t){this.type=FI,this.auth=cr(t)}async verify(t="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{AI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new SI(p);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(p=>{g(p)})})}function o(u,f,g){const p=window.grecaptcha;aE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(XT)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(g=>{if(!n&&aE(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=jI();p.length!==0&&(p+=g),QT(p).then(()=>{o(g,u,f)}).catch(_=>{f(_)})}}).catch(g=>{f(g)})})}}async function fE(s,t,n,r=!1,o=!1){const u=new KI(s);let f;if(o)f=XT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Rm(s,t,n,r,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await fE(s,t,n,n==="getOobCode");return r(s,f)}else return r(s,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await fE(s,t,n,n==="getOobCode");return r(s,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(s,t){const n=Dm(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Fr(u,t??{}))return o;jn(o,"already-initialized")}return n.initialize({options:t})}function QI(s,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ts);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function XI(s,t,n){const r=cr(s);pt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=$T(t),{host:f,port:g}=$I(t),p=g===null?"":`:${g}`,_={url:`${u}//${f}${p}/`},S=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pt(Fr(_,r.config.emulator)&&Fr(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,oo(f)?(JE(`${u}//${f}${p}`),ZE("Auth",!0)):JI()}function $T(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function $I(s){const t=$T(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:dE(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:dE(f)}}}function dE(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function JI(){function s(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(t){return Wi("not implemented")}_linkToIdToken(t,n){return Wi("not implemented")}_getReauthenticationResolver(t){return Wi("not implemented")}}async function ZI(s,t){return ur(s,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(s,t){return Wl(s,"POST","/v1/accounts:signInWithPassword",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(s,t){return Wl(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,t))}async function e2(s,t){return Wl(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends mg{constructor(t,n,r,o=null){super("password",r),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Bl(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Bl(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(t,n,"signInWithPassword",WI);case"emailLink":return t2(t,{email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(t,r,"signUpPassword",ZI);case"emailLink":return e2(t,{idToken:n,email:this._email,oobCode:this._password});default:jn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(s,t){return Wl(s,"POST","/v1/accounts:signInWithIdp",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="http://localhost";class $r extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new $r(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new $r(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return Za(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Za(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Za(t,n)}buildRequest(){const t={requestUri:n2,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Fl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s2(s){const t=Tl(Sl(s)).link,n=t?Tl(Sl(t)).deep_link_id:null,r=Tl(Sl(s)).deep_link_id;return(r?Tl(Sl(r)).link:null)||r||n||t||s}class gg{constructor(t){const n=Tl(Sl(t)),r=n.apiKey??null,o=n.oobCode??null,u=i2(n.mode??null);pt(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=s2(t);try{return new gg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(t,n){return Bl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=gg.parseLink(n);return pt(r,"argument-error"),Bl._fromEmailAndCode(t,r.code,r.tenantId)}}mo.PROVIDER_ID="password";mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends pg{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends tu{constructor(){super("facebook.com")}static credential(t){return $r._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hs.credentialFromTaggedObject(t)}static credentialFromError(t){return Hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hs.credential(t.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return $r._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Zi.credentialFromTaggedObject(t)}static credentialFromError(t){return Zi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Zi.credential(n,r)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends tu{constructor(){super("github.com")}static credential(t){return $r._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gs.credentialFromTaggedObject(t)}static credentialFromError(t){return Gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gs.credential(t.oauthAccessToken)}catch{return null}}}Gs.GITHUB_SIGN_IN_METHOD="github.com";Gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends tu{constructor(){super("twitter.com")}static credential(t,n){return $r._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Fs.credentialFromTaggedObject(t)}static credentialFromError(t){return Fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fs.credential(n,r)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(s,t){return Wl(s,"POST","/v1/accounts:signUp",lr(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,o=!1){const u=await ti._fromIdTokenResponse(t,r,o),f=mE(r);return new Jr({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const o=mE(r);return new Jr({user:t,providerId:o,_tokenResponse:r,operationType:n})}}function mE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends as{constructor(t,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,o){return new mh(t,n,r,o)}}function JT(s,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(s,u,t,r):u})}async function a2(s,t,n=!1){const r=await jl(s,t._linkToIdToken(s.auth,await s.getIdToken()),n);return Jr._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(s,t,n=!1){const{auth:r}=s;if(bn(r.app))return Promise.reject(es(r));const o="reauthenticate";try{const u=await jl(s,JT(r,o,t,s),n);pt(u.idToken,r,"internal-error");const f=fg(u.idToken);pt(f,r,"internal-error");const{sub:g}=f;return pt(s.uid===g,r,"user-mismatch"),Jr._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(s,t,n=!1){if(bn(s.app))return Promise.reject(es(s));const r="signIn",o=await JT(s,r,t),u=await Jr._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function l2(s,t){return ZT(cr(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(s){const t=cr(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function u2(s,t,n){if(bn(s.app))return Promise.reject(es(s));const r=cr(s),f=await Rm(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&WT(s),p}),g=await Jr._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function c2(s,t,n){return bn(s.app)?Promise.reject(es(s)):l2(Ye(s),mo.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&WT(s),r})}function h2(s,t,n,r){return Ye(s).onIdTokenChanged(t,n,r)}function f2(s,t,n){return Ye(s).beforeAuthStateChanged(t,n)}function d2(s,t,n,r){return Ye(s).onAuthStateChanged(t,n,r)}function m2(s){return Ye(s).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1e3,p2=10;class eS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&t(n,o,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const r=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);xI()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,p2):o()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}eS.type="LOCAL";const y2=eS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}nS.type="SESSION";const iS=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const r=new Lh(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async _=>_(n.origin,u)),p=await _2(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(s="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,p)=>{const _=yg("",20);o.port1.start();const S=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(A){const I=A;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(I.data.response);break;default:clearTimeout(S),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function E2(s){Oi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function T2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S2(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function A2(){return sS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebaseLocalStorageDb",b2=1,ph="firebaseLocalStorage",aS="fbase_key";class eu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kh(s,t){return s.transaction([ph],t?"readwrite":"readonly").objectStore(ph)}function w2(){const s=indexedDB.deleteDatabase(rS);return new eu(s).toPromise()}function Cm(){const s=indexedDB.open(rS,b2);return new Promise((t,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ph,{keyPath:aS})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ph)?t(r):(r.close(),await w2(),t(await Cm()))})})}async function gE(s,t,n){const r=kh(s,!0).put({[aS]:t,value:n});return new eu(r).toPromise()}async function R2(s,t){const n=kh(s,!1).get(t),r=await new eu(n).toPromise();return r===void 0?null:r.value}function pE(s,t){const n=kh(s,!0).delete(t);return new eu(n).toPromise()}const C2=800,I2=3;class oS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>I2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(A2()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await T2(),!this.activeServiceWorker)return;this.sender=new v2(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(n=t[0])!=null&&n.fulfilled&&(r=t[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||S2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Cm();return await gE(t,gh,"1"),await pE(t,gh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gE(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>R2(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=kh(o,!1).getAll();return new eu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oS.type="LOCAL";const N2=oS;new Zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(s,t){return t?ts(t):(pt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends mg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Za(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Za(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Za(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function O2(s){return ZT(s.auth,new _g(s),s.bypassAuthState)}function D2(s){const{auth:t,user:n}=s;return pt(n,t,"internal-error"),o2(n,new _g(s),s.bypassAuthState)}async function M2(s){const{auth:t,user:n}=s;return pt(n,t,"internal-error"),a2(n,new _g(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(t,n,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=t;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return O2;case"linkViaPopup":case"linkViaRedirect":return M2;case"reauthViaPopup":case"reauthViaRedirect":return D2;default:jn(this.auth,"internal-error")}}resolve(t){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Zl(2e3,1e4);async function V2(s,t,n){if(bn(s.app))return Promise.reject(ni(s,"operation-not-supported-in-this-environment"));const r=cr(s);dI(s,t,pg);const o=lS(r,n);return new Gr(r,"signInViaPopup",t,o).executeNotNull()}class Gr extends uS{constructor(t,n,r,o,u){super(t,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Gr.currentPopupAction&&Gr.currentPopupAction.cancel(),Gr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pt(t,this.auth,"internal-error"),t}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const t=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,x2.get())};t()}}Gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="pendingRedirect",Qc=new Map;class L2 extends uS{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Qc.get(this.auth._key());if(!t){try{const r=await k2(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Qc.set(this.auth._key(),t)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k2(s,t){const n=j2(t),r=z2(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function P2(s,t){Qc.set(s._key(),t)}function z2(s){return ts(s._redirectPersistence)}function j2(s){return Yc(U2,s.config.apiKey,s.name)}async function B2(s,t,n=!1){if(bn(s.app))return Promise.reject(es(s));const r=cr(s),o=lS(r,t),f=await new L2(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=600*1e3;class H2{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!G2(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!cS(t)){const o=((r=t.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=q2&&this.cachedEventUids.clear(),this.cachedEventUids.has(yE(t))}saveEventToCache(t){this.cachedEventUids.add(yE(t)),this.lastProcessedEventTime=Date.now()}}function yE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function cS({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function G2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(s,t={}){return ur(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y2=/^https?/;async function Q2(s){if(s.config.emulator)return;const{authorizedDomains:t}=await F2(s);for(const n of t)try{if(X2(n))return}catch{}jn(s,"unauthorized-domain")}function X2(s){const t=bm(),{protocol:n,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!Y2.test(n))return!1;if(K2.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new Zl(3e4,6e4);function _E(){const s=Oi().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function J2(s){return new Promise((t,n)=>{var o,u,f;function r(){_E(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_E(),n(ni(s,"network-request-failed"))},timeout:$2.get()})}if((u=(o=Oi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)t(gapi.iframes.getContext());else if((f=Oi().gapi)!=null&&f.load)r();else{const g=qI("iframefcb");return Oi()[g]=()=>{gapi.load?r():n(ni(s,"network-request-failed"))},QT(`${BI()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw Xc=null,t})}let Xc=null;function Z2(s){return Xc=Xc||J2(s),Xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new Zl(5e3,15e3),tN="__/auth/iframe",eN="emulator/auth/iframe",nN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sN(s){const t=s.config;pt(t.authDomain,s,"auth-domain-config-required");const n=t.emulator?hg(t,eN):`https://${s.config.authDomain}/${tN}`,r={apiKey:t.apiKey,appName:s.name,v:lo},o=iN.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Fl(r).slice(1)}`}async function rN(s){const t=await Z2(s),n=Oi().gapi;return pt(n,s,"internal-error"),t.open({where:document.body,url:sN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nN,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ni(s,"network-request-failed"),g=Oi().setTimeout(()=>{u(f)},W2.get());function p(){Oi().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oN=500,lN=600,uN="_blank",cN="http://localhost";class vE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hN(s,t,n,r=oN,o=lN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p={...aN,width:r.toString(),height:o.toString(),top:u,left:f},_=tn().toLowerCase();n&&(g=BT(_)?uN:n),zT(_)&&(t=t||cN,p.scrollbars="yes");const S=Object.entries(p).reduce((I,[k,$])=>`${I}${k}=${$},`,"");if(MI(_)&&g!=="_self")return fN(t||"",g),new vE(null);const A=window.open(t||"",g,S);pt(A,s,"popup-blocked");try{A.focus()}catch{}return new vE(A)}function fN(s,t){const n=document.createElement("a");n.href=s,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="__/auth/handler",mN="emulator/auth/handler",gN=encodeURIComponent("fac");async function EE(s,t,n,r,o,u){pt(s.config.authDomain,s,"auth-domain-config-required"),pt(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:lo,eventId:o};if(t instanceof pg){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",D1(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(t instanceof tu){const S=t.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const p=await s._getAppCheckToken(),_=p?`#${gN}=${encodeURIComponent(p)}`:"";return`${pN(s)}?${Fl(g).slice(1)}${_}`}function pN({config:s}){return s.emulator?hg(s,mN):`https://${s.authDomain}/${dN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class yN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iS,this._completeRedirectFn=B2,this._overrideRedirectResult=P2}async _openPopup(t,n,r,o){var f;rs((f=this.eventManagers[t._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await EE(t,n,r,bm(),o);return hN(t,u,yg())}async _openRedirect(t,n,r,o){await this._originValidation(t);const u=await EE(t,n,r,bm(),o);return E2(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(rs(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await rN(t),r=new H2(t);return n.register("authEvent",o=>(pt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(tm,{type:tm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[tm];u!==void 0&&n(!!u),jn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q2(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return KT()||jT()||dg()}}const _N=yN;var TE="@firebase/auth",SE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TN(s){to(new Kr("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;pt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YT(s)},_=new PI(r,o,u,p);return QI(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),to(new Kr("auth-internal",t=>{const n=cr(t.getProvider("auth").getImmediate());return(r=>new vN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xs(TE,SE,EN(s)),Xs(TE,SE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=300,AN=$E("authIdTokenMaxAge")||SN;let AE=null;const bN=s=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AN)return;const o=n==null?void 0:n.token;AE!==o&&(AE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function wN(s=n0()){const t=Dm(s,"auth");if(t.isInitialized())return t.getImmediate();const n=YI(s,{popupRedirectResolver:_N,persistence:[N2,y2,iS]}),r=$E("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=bN(u.toString());f2(n,f,()=>f(n.currentUser)),h2(n,g=>f(g))}}const o=QE("auth");return o&&XI(n,`http://${o}`),n}function RN(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}zI({loadJS(s){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=ni("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",RN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TN("Browser");const CN={apiKey:"AIzaSyBTKe-UFvyoDRdLTUz0NlYSxpFAscID_eA",authDomain:"wine-journal-app-60460.firebaseapp.com",projectId:"wine-journal-app-60460",storageBucket:"wine-journal-app-60460.firebasestorage.app",messagingSenderId:"798398457167",appId:"1:798398457167:web:f68b817df6c3ed33ca513a"},hS=e0(CN),zc=KC(hS),El=wN(hS);var bE;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(bE||(bE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(wE||(wE={}));var RE;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(RE||(RE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=["user","model","function","system"];var IE;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(IE||(IE={}));var NE;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(NE||(NE={}));var OE;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(OE||(OE={}));var DE;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(DE||(DE={}));var Ml;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(Ml||(Ml={}));var ME;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(ME||(ME={}));var xE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(xE||(xE={}));var VE;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(VE||(VE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class qa extends We{constructor(t,n){super(t),this.response=n}}class fS extends We{constructor(t,n,r,o){super(t),this.status=n,this.statusText=r,this.errorDetails=o}}class Ws extends We{}class dS extends We{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="https://generativelanguage.googleapis.com",NN="v1beta",ON="0.24.1",DN="genai-js";var Zr;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Zr||(Zr={}));class MN{constructor(t,n,r,o,u){this.model=t,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=u}toString(){var t,n;const r=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||NN;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||IN}/${r}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function xN(s){const t=[];return s!=null&&s.apiClient&&t.push(s.apiClient),t.push(`${DN}/${ON}`),t.join(" ")}async function VN(s){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",xN(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(t=s.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ws(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,u]of r.entries()){if(o==="x-goog-api-key")throw new Ws(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ws(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function UN(s,t,n,r,o,u){const f=new MN(s,t,n,r,u);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},zN(u)),{method:"POST",headers:await VN(f),body:o})}}async function nu(s,t,n,r,o,u={},f=fetch){const{url:g,fetchOptions:p}=await UN(s,t,n,r,o,u);return LN(g,p,f)}async function LN(s,t,n=fetch){let r;try{r=await n(s,t)}catch(o){kN(o,s)}return r.ok||await PN(r,s),r}function kN(s,t){let n=s;throw n.name==="AbortError"?(n=new dS(`Request aborted when fetching ${t.toString()}: ${s.message}`),n.stack=s.stack):s instanceof fS||s instanceof Ws||(n=new We(`Error fetching from ${t.toString()}: ${s.message}`),n.stack=s.stack),n}async function PN(s,t){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new fS(`Error fetching from ${t.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function zN(s){const t={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(s.candidates[0]))throw new qa(`${qs(s)}`,s);return jN(s)}else if(s.promptFeedback)throw new qa(`Text not available. ${qs(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(s.candidates[0]))throw new qa(`${qs(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),UE(s)[0]}else if(s.promptFeedback)throw new qa(`Function call not available. ${qs(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$c(s.candidates[0]))throw new qa(`${qs(s)}`,s);return UE(s)}else if(s.promptFeedback)throw new qa(`Function call not available. ${qs(s)}`,s)},s}function jN(s){var t,n,r,o;const u=[];if(!((n=(t=s.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.text&&u.push(f.text),f.executableCode&&u.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&u.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function UE(s){var t,n,r,o;const u=[];if(!((n=(t=s.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.functionCall&&u.push(f.functionCall);if(u.length>0)return u}const BN=[Ml.RECITATION,Ml.SAFETY,Ml.LANGUAGE];function $c(s){return!!s.finishReason&&BN.includes(s.finishReason)}function qs(s){var t,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((t=s.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const u=s.candidates[0];$c(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function ql(s){return this instanceof ql?(this.v=s,this):new ql(s)}function qN(s,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,t||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(I){r[I]&&(o[I]=function(k){return new Promise(function($,W){u.push([I,k,$,W])>1||g(I,k)})})}function g(I,k){try{p(r[I](k))}catch($){A(u[0][3],$)}}function p(I){I.value instanceof ql?Promise.resolve(I.value.v).then(_,S):A(u[0][2],I)}function _(I){g("next",I)}function S(I){g("throw",I)}function A(I,k){I(k),u.shift(),u.length&&g(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function HN(s){const t=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=KN(t),[r,o]=n.tee();return{stream:FN(r),response:GN(o)}}async function GN(s){const t=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return vg(YN(t));t.push(o)}}function FN(s){return qN(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield ql(n.read());if(o)break;yield yield ql(vg(r))}})}function KN(s){const t=s.getReader();return new ReadableStream({start(r){let o="";return u();function u(){return t.read().then(({value:f,done:g})=>{if(g){if(o.trim()){r.error(new We("Failed to parse stream"));return}r.close();return}o+=f;let p=o.match(LE),_;for(;p;){try{_=JSON.parse(p[1])}catch{r.error(new We(`Error parsing JSON response: "${p[1]}"`));return}r.enqueue(_),o=o.substring(p[0].length),p=o.match(LE)}return u()}).catch(f=>{let g=f;throw g.stack=f.stack,g.name==="AbortError"?g=new dS("Request aborted when reading from the stream"):g=new We("Error reading from the stream"),g})}}})}function YN(s){const t=s[s.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const u of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const f={};for(const g of u.content.parts)g.text&&(f.text=g.text),g.functionCall&&(f.functionCall=g.functionCall),g.executableCode&&(f.executableCode=g.executableCode),g.codeExecutionResult&&(f.codeExecutionResult=g.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),n.candidates[o].content.parts.push(f)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(s,t,n,r){const o=await nu(t,Zr.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return HN(o)}async function gS(s,t,n,r){const u=await(await nu(t,Zr.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:vg(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function Hl(s){let t=[];if(typeof s=="string")t=[{text:s}];else for(const n of s)typeof n=="string"?t.push({text:n}):t.push(n);return QN(t)}function QN(s){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const u of s)"functionResponse"in u?(n.parts.push(u),o=!0):(t.parts.push(u),r=!0);if(r&&o)throw new We("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new We("No content is provided for sending chat message.");return r?t:n}function XN(s,t){var n;let r={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new Ws("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const u=Hl(s);r.contents=[u]}return{generateContentRequest:r}}function kE(s){let t;return s.contents?t=s:t={contents:[Hl(s)]},s.systemInstruction&&(t.systemInstruction=pS(s.systemInstruction)),t}function $N(s){return typeof s=="string"||Array.isArray(s)?{content:Hl(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],JN={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ZN(s){let t=!1;for(const n of s){const{role:r,parts:o}=n;if(!t&&r!=="user")throw new We(`First content should be with role 'user', got ${r}`);if(!CE.includes(r))throw new We(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(CE)}`);if(!Array.isArray(o))throw new We("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new We("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const g of o)for(const p of PE)p in g&&(u[p]+=1);const f=JN[r];for(const g of PE)if(!f.includes(g)&&u[g]>0)throw new We(`Content with role '${r}' can't contain '${g}' part`);t=!0}}function zE(s){var t;if(s.candidates===void 0||s.candidates.length===0)return!1;const n=(t=s.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="SILENT_ERROR";class WN{constructor(t,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(ZN(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var r,o,u,f,g,p;await this._sendPromise;const _=Hl(t),S={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,_]},A=Object.assign(Object.assign({},this._requestOptions),n);let I;return this._sendPromise=this._sendPromise.then(()=>gS(this._apiKey,this.model,S,A)).then(k=>{var $;if(zE(k.response)){this._history.push(_);const W=Object.assign({parts:[],role:"model"},($=k.response.candidates)===null||$===void 0?void 0:$[0].content);this._history.push(W)}else{const W=qs(k.response);W&&console.warn(`sendMessage() was unsuccessful. ${W}. Inspect response object for details.`)}I=k}).catch(k=>{throw this._sendPromise=Promise.resolve(),k}),await this._sendPromise,I}async sendMessageStream(t,n={}){var r,o,u,f,g,p;await this._sendPromise;const _=Hl(t),S={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(g=this.params)===null||g===void 0?void 0:g.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,_]},A=Object.assign(Object.assign({},this._requestOptions),n),I=mS(this._apiKey,this.model,S,A);return this._sendPromise=this._sendPromise.then(()=>I).catch(k=>{throw new Error(jE)}).then(k=>k.response).then(k=>{if(zE(k)){this._history.push(_);const $=Object.assign({},k.candidates[0].content);$.role||($.role="model"),this._history.push($)}else{const $=qs(k);$&&console.warn(`sendMessageStream() was unsuccessful. ${$}. Inspect response object for details.`)}}).catch(k=>{k.message!==jE&&console.error(k)}),I}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(s,t,n,r){return(await nu(t,Zr.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(s,t,n,r){return(await nu(t,Zr.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function nO(s,t,n,r){const o=n.requests.map(f=>Object.assign(Object.assign({},f),{model:t}));return(await nu(t,Zr.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t,n,r={}){this.apiKey=t,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=pS(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var r;const o=kE(t),u=Object.assign(Object.assign({},this._requestOptions),n);return gS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}async generateContentStream(t,n={}){var r;const o=kE(t),u=Object.assign(Object.assign({},this._requestOptions),n);return mS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}startChat(t){var n;return new WN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const r=XN(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return tO(this.apiKey,this.model,r,o)}async embedContent(t,n={}){const r=$N(t),o=Object.assign(Object.assign({},this._requestOptions),n);return eO(this.apiKey,this.model,r,o)}async batchEmbedContents(t,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return nO(this.apiKey,this.model,t,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new We("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new BE(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,r){if(!t.name)throw new Ws("Cached content must contain a `name` field.");if(!t.model)throw new Ws("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const f of o)if(n!=null&&n[f]&&t[f]&&(n==null?void 0:n[f])!==t[f]){if(f==="model"){const g=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,p=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(g===p)continue}throw new Ws(`Different value for "${f}" specified in modelParams (${n[f]}) and cachedContent (${t[f]})`)}const u=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new BE(this.apiKey,u,r)}}const qE=s=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...s,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Eg=s=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...s,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),sO=({user:s,rightContent:t,searchTerm:n,onSearchChange:r})=>{const[o,u]=se.useState(!1),g=s?(p=>p.displayName?p.displayName.split(" ")[0]:p.email?p.email.split("@")[0]:"User")(s):null;return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"bg-gray-50",children:V.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g&&V.jsxs("p",{className:"text-sm font-medium text-gray-600",children:["Welcome, ",g]}),t]})}),V.jsxs("div",{className:"sticky top-0 bg-gray-50 z-40",children:[V.jsx("div",{className:"h-px bg-gray-200 mt-2 mb-3 w-24"}),V.jsx("div",{className:"flex items-center pb-2",children:o?V.jsxs("div",{className:"relative flex-grow",children:[V.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:V.jsx(qE,{className:"h-5 w-5 text-gray-400"})}),V.jsx("input",{type:"search",placeholder:"Search wines...",value:n,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent transition-shadow",autoFocus:!0}),V.jsx("button",{onClick:()=>u(!1),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":"Close search",children:V.jsx(Eg,{className:"w-5 h-5"})})]}):V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("h1",{className:"text-2xl font-medium text-black tracking-tight",children:"My Wines"}),V.jsx("button",{onClick:()=>u(!0),className:"p-1.5 text-gray-500 hover:text-red-800 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Search wines",children:V.jsx(qE,{className:"w-5 h-5"})})]})})]})]})},rO=s=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...s,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Wa=s=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:V.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.116 3.986 1.24 5.383c.246 1.065-.914 1.898-1.82 1.325L12 18.344l-4.646 2.893c-.906.573-2.066-.26-1.82-1.325l1.24-5.383-4.116-3.986c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.007z",clipRule:"evenodd"})}),aO=({wine:s,onDelete:t,onEdit:n})=>{const[r,o]=se.useState(!1),u=s.notes.length>60?`${s.notes.substring(0,60)}...`:s.notes,f=k=>{k.stopPropagation(),o(!0)},g=()=>{t(s.id),o(!1)},p=()=>{o(!1)},_=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(k),[S,A]=se.useState(s.imageUrl||"https://i.postimg.cc/xdvXnqyP/Wine-bottle.jpg"),I=k=>{k.currentTarget.onerror=null,S.startsWith("data:")||A("https://i.postimg.cc/xdvXnqyP/Wine-bottle.jpg")};return V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300 ease-in-out cursor-pointer",onClick:()=>n(s),role:"button",tabIndex:0,onKeyDown:k=>(k.key==="Enter"||k.key===" ")&&n(s),"aria-label":`Edit details for ${s.name}`,children:V.jsxs("div",{className:"flex",children:[V.jsx("div",{className:"flex-shrink-0",children:V.jsx("img",{className:"h-24 w-16 object-cover",src:S,alt:`Bottle of ${s.name}`,onError:I})}),V.jsxs("div",{className:"relative p-3 flex-grow",children:[V.jsxs("div",{className:"flex justify-between items-start",children:[V.jsxs("div",{className:"pr-3 flex-grow",children:[V.jsx("div",{className:"uppercase tracking-wide text-xs text-red-800 font-semibold",children:s.varietal}),V.jsx("p",{className:"block text-sm leading-tight font-bold text-black",children:s.name}),V.jsxs("div",{className:"flex items-center text-xs text-gray-500 space-x-2",children:[V.jsx("span",{children:s.vintage>0?s.vintage:"N/V"}),V.jsx("span",{children:""}),V.jsx("span",{children:s.country}),s.price>0&&V.jsxs(V.Fragment,{children:[V.jsx("span",{children:""}),V.jsx("span",{className:"font-bold text-black",children:_(s.price)})]})]}),s.publicRating&&s.publicRating>0&&V.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[V.jsx(Wa,{className:"w-3 h-3 text-gray-400 mr-1"}),V.jsx("span",{className:"font-medium",children:s.publicRating.toFixed(1)}),V.jsxs("span",{className:"ml-1 text-xs",children:["(",new Intl.NumberFormat().format(s.reviewCount||0)," on ",s.ratingSource,")"]})]})]}),V.jsxs("div",{className:"flex-shrink-0 pl-4 flex flex-col items-center justify-center text-center",children:[V.jsx("p",{className:"text-xs text-gray-500 -mb-1 uppercase font-semibold",children:"My Rating"}),V.jsx("div",{className:"flex items-center mt-1 gap-0.5",children:[1,2,3,4,5].map(k=>{const $=k-.5===Math.floor(s.rating*2)/2,W=k<=s.rating;return V.jsxs("div",{className:"relative w-5 h-5",children:[V.jsx(Wa,{className:"absolute inset-0 w-5 h-5 text-gray-300","aria-label":`${k} star${k===1?"":"s"}`}),V.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{clipPath:$?"inset(0 50% 0 0)":void 0,width:W||$?"100%":"0%"},children:V.jsx(Wa,{className:"w-5 h-5 fill-current text-red-800"})})]},k)})})]})]}),V.jsxs("p",{className:"mt-2 text-gray-600 text-xs italic pr-12",children:['"',u,'"']}),V.jsx("button",{onClick:f,className:"absolute bottom-4 right-4 p-1 rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors z-10","aria-label":`Delete ${s.name}`,children:V.jsx(rO,{className:"w-5 h-5"})})]})]})}),r&&V.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:p,"aria-modal":"true",role:"dialog",children:V.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",onClick:k=>k.stopPropagation(),children:[V.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Confirm Deletion"}),V.jsxs("p",{className:"mt-4 text-gray-600",children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']}),V.jsxs("div",{className:"mt-6 flex justify-center space-x-4",children:[V.jsx("button",{onClick:p,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 focus:outline-none",children:"Cancel"}),V.jsx("button",{onClick:g,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-600",children:"Delete"})]})]})})]})},oO=({rating:s,onRatingChange:t})=>{const n=r=>{const o=r-.5===s,u=r<=s;return V.jsx("button",{className:"relative focus:outline-none transition-colors duration-200 w-8",onClick:f=>{f.preventDefault(),f.stopPropagation(),t(r===s?r-.5:r)},onMouseEnter:f=>{const g=f.currentTarget.getBoundingClientRect();f.clientX-g.left<g.width/2?f.currentTarget.setAttribute("data-half","true"):f.currentTarget.setAttribute("data-half","false")},"aria-label":`Rate ${r} star${r===1?"":"s"}`,children:V.jsxs("div",{className:"relative w-8 h-8",children:[V.jsx(Wa,{className:"absolute inset-0 w-8 h-8 text-gray-300"}),V.jsx("div",{className:"absolute inset-0 overflow-hidden",style:{clipPath:o?"inset(0 50% 0 0)":void 0,width:u||o?"100%":"0%"},children:V.jsx(Wa,{className:"w-8 h-8 fill-current text-red-800"})})]})},r)};return V.jsx("div",{className:"w-full",children:V.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(r=>n(r))})})},lO=s=>V.jsxs("svg",{className:"animate-spin h-12 w-12 text-red-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...s,children:[V.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),V.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),uO=({onResearch:s,onClose:t,apiError:n})=>{const[r,o]=se.useState(""),[u,f]=se.useState(null),[g,p]=se.useState(null),_=I=>{I.preventDefault(),(u||r.trim())&&s(r.trim(),u||void 0)},S=I=>{var $;const k=($=I.target.files)==null?void 0:$[0];if(k){f(k);const W=URL.createObjectURL(k);p(W)}},A=()=>{f(null),g&&(URL.revokeObjectURL(g),p(null))};return V.jsxs(V.Fragment,{children:[V.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Add a New Wine"}),n&&V.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4 text-sm",children:n}),V.jsxs("form",{onSubmit:_,className:"space-y-6",children:[V.jsx("div",{children:V.jsx("input",{type:"text",placeholder:"e.g. Leroy Musigny Grand Cru",value:r,onChange:I=>o(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent",required:!u,autoFocus:!0})}),V.jsx("div",{children:g?V.jsxs("div",{className:"relative w-32 h-48 mx-auto",children:[V.jsx("img",{src:g,alt:"Wine preview",className:"w-full h-full object-cover rounded-lg shadow-md"}),V.jsx("button",{type:"button",onClick:A,className:"absolute -top-2 -right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700 focus:outline-none",children:V.jsx(Eg,{className:"w-4 h-4"})})]}):V.jsx("div",{className:"flex flex-col items-center",children:V.jsxs("div",{className:"flex space-x-4",children:[V.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-red-800 text-white hover:bg-red-900 rounded-full flex items-center justify-center transition-colors",children:[V.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Open Camera",V.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:S,className:"hidden"})]}),V.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-colors",children:[V.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Choose File",V.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden"})]})]})})}),V.jsxs("div",{className:"flex justify-end pt-6",children:[V.jsx("button",{type:"button",onClick:t,className:"mr-2 px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 focus:outline-none",children:"Cancel"}),V.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800",children:"Search"})]})]})]})},cO=()=>V.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[V.jsx(lO,{}),V.jsx("h2",{className:"text-xl font-semibold text-gray-800 mt-4",children:"Researching..."}),V.jsx("p",{className:"text-gray-600 mt-2",children:"Finding details for your wine."})]}),HE=({initialData:s,onSave:t,onClose:n,isEditing:r})=>{const[o,u]=se.useState("rating"in s?Math.min(s.rating,5):3),[f,g]=se.useState(s.notes??""),p=A=>{A.preventDefault(),t(r?{...s,rating:o,notes:f}:{name:s.name||"",vintage:s.vintage||new Date().getFullYear(),varietal:s.varietal||"",country:s.country||"",imageUrl:s.imageUrl||"",description:s.description||"",publicRating:s.publicRating||0,reviewCount:s.reviewCount||0,ratingSource:s.ratingSource||"",price:s.price||0,rating:o,notes:f})},_=r?"Edit Your Wine":"Review Your Wine",S=r?"Update Entry":"Save to Journal";return V.jsxs(V.Fragment,{children:[V.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:_}),V.jsxs("div",{className:"text-center",children:[s.imageUrl&&V.jsx("img",{src:s.imageUrl,alt:`Bottle of ${s.name}`,className:"w-24 h-36 object-cover mx-auto mb-4 rounded-md shadow-lg",referrerPolicy:"no-referrer"}),V.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s.name}),V.jsxs("p",{className:"text-sm text-gray-500",children:[s.vintage>0?s.vintage:"N/V","  ",s.country]}),s.price&&s.price>0&&V.jsxs("p",{className:"text-lg font-semibold text-gray-700 mt-2",children:["$",s.price.toFixed(2)]}),s.publicRating&&s.publicRating>0&&V.jsxs("div",{className:"flex items-center justify-center mt-2 text-sm text-gray-600 bg-gray-100 p-2 rounded-lg",children:[V.jsx(Wa,{className:"w-4 h-4 text-yellow-500 mr-1.5"}),V.jsx("span",{className:"font-bold",children:s.publicRating.toFixed(1)}),V.jsx("span",{className:"mx-1",children:"/"}),V.jsxs("span",{children:[new Intl.NumberFormat().format(s.reviewCount||0)," ratings on ",s.ratingSource]})]}),V.jsxs("p",{className:"mt-4 text-sm text-gray-700 text-left italic",children:['"',s.description,'"']})]}),V.jsx("hr",{className:"my-6"}),V.jsxs("form",{onSubmit:p,className:"space-y-4",children:[V.jsxs("div",{className:"flex flex-col items-center w-full px-4 mb-12",children:[V.jsx("label",{className:"text-gray-800 font-semibold mb-2",children:"Your Personal Rating"}),V.jsx(oO,{rating:o,onRatingChange:u})]}),V.jsx("div",{children:V.jsx("textarea",{name:"notes",value:f,onChange:A=>g(A.target.value),placeholder:"Add your personal tasting notes...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent"})}),V.jsxs("div",{className:"flex justify-end pt-4",children:[V.jsx("button",{type:"button",onClick:n,className:"mr-2 px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 focus:outline-none",children:"Cancel"}),V.jsx("button",{type:"submit",className:"px-6 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800",children:S})]})]})]})},hO=({modalState:s,onClose:t,onAddWine:n,onUpdateWine:r,onResearch:o,researchedData:u,editingWine:f,apiError:g})=>s==="closed"?null:V.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:t,"aria-modal":"true",role:"dialog",children:V.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative transform transition-all max-h-[90vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:[V.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close modal",children:V.jsx(Eg,{className:"w-6 h-6"})}),s==="asking"&&V.jsx(uO,{onResearch:o,onClose:t,apiError:g}),s==="loading"&&V.jsx(cO,{}),s==="confirming"&&V.jsx(HE,{initialData:u,onSave:n,onClose:t,isEditing:!1}),s==="editing"&&f&&V.jsx(HE,{initialData:f,onSave:r,onClose:t,isEditing:!0})]})}),fO=s=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...s,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),dO=({searchTerm:s,onSearchChange:t,onAddClick:n})=>V.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-200 z-30",children:V.jsx("div",{className:"container mx-auto max-w-4xl p-3 sm:p-4",children:V.jsx("div",{className:"flex justify-end",children:V.jsx("button",{onClick:n,className:"flex-shrink-0 flex items-center justify-center w-14 h-14 bg-red-800 text-white rounded-full shadow-md hover:bg-red-900 transition-colors duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-800","aria-label":"Add new wine",children:V.jsx(fO,{className:"w-8 h-8"})})})})}),mO=()=>{const[s,t]=se.useState(null),[n,r]=se.useState(null),[o,u]=se.useState(!1),[f,g]=se.useState(!1),[p,_]=se.useState(""),[S,A]=se.useState(""),[I,k]=se.useState(""),[$,W]=se.useState([]);se.useEffect(()=>{const z=d2(El,Z=>{t(Z)});return()=>z()},[]);const tt=async z=>{if(z.preventDefault(),r(null),S!==I){r("Passwords do not match");return}try{await u2(El,p,S),u(!1),dt()}catch(Z){r(Z.message||"Sign up failed")}},gt=async z=>{z.preventDefault(),r(null);try{await c2(El,p,S),u(!1),dt()}catch(Z){r(Z.message||"Login failed")}},_t=async()=>{await m2(El)},dt=()=>{_(""),A(""),k(""),r(null)},Pt=async()=>{r(null);try{const z=new Zi;await V2(El,z),u(!1),dt()}catch(z){r(z.message||"Google sign in failed")}};se.useEffect(()=>{(async()=>{const nt=(await oI(eE(zc,"wines"))).docs.map(lt=>{const st=lt.data();return{id:lt.id,name:st.name||"",vintage:st.vintage||0,varietal:st.varietal||"",country:st.country||"",description:st.description||"",imageUrl:st.imageUrl||"",publicRating:st.publicRating||0,reviewCount:st.reviewCount||0,ratingSource:st.ratingSource||"",price:st.price||0,rating:st.rating||0,notes:st.notes||"",dateAdded:st.dateAdded||""}});W(nt)})()},[]);const[zt,Rt]=se.useState(""),[N,b]=se.useState("closed"),[C,x]=se.useState({}),[D,L]=se.useState(null),[w,Lt]=se.useState(null),de=async(z,Z)=>{b("loading"),Lt(null);const nt="AIzaSyDTJauq2xflOMpBhIhSayGWD5p3MHyHs8I";let lt=null;if(Z)try{lt={inlineData:{data:(await new Promise((Kt,Yt)=>{const mn=new FileReader;mn.onload=()=>Kt(mn.result),mn.onerror=Yt,mn.readAsDataURL(Z)})).split(",")[1],mimeType:Z.type}}}catch(st){console.error("Error processing image:",st),Lt("Failed to process the image. Please try again."),b("asking");return}try{let st="";Z&&(st=URL.createObjectURL(Z));const Kt=new iO(nt).getGenerativeModel({model:"gemini-2.5-flash"}),Yt=`${Z?"Analyze this wine label image":`Research the wine${z?` "${z}"`:""}`} and provide detailed information. ${Z?"Extract all visible information from the label, then ":""}use Google Search to find details and ratings from reputable sources like Vivino.
    
     Return a single, minified JSON object with these keys:
     - "name" (string): the full, correct wine name
     - "vintage" (number): the year, use current year if not specified, 0 for non-vintage
     - "varietal" (string): the grape variety or blend
     - "country" (string): country of origin
     - "description" (string): a brief, professional tasting note
     - "publicRating" (number): rating from 1-5, can be float, 0 if not found
     - "reviewCount" (number): total number of reviews
     - "ratingSource" (string): website providing the rating (e.g., "Vivino")
     - "price" (number): latest estimated price in USD, 0 if not found
     - "imageUrl" (string): direct, public URL to bottle image
    
     If any value cannot be found, use empty string for strings or 0 for numbers.`,Bn=(lt?await Kt.generateContent([Yt,lt]):await Kt.generateContent(Yt)).response;if(console.log("Gemini API response:",Bn),!Bn||!Bn.text()){Lt("No response from Gemini API. Please try again later."),b("asking");return}const ii=Bn.text();if(!ii){Lt("No details found for this wine. Try a different name or add manually."),b("asking");return}let os=ii.replace(/^```json\s*/,"").replace(/```$/,""),oe;try{oe=JSON.parse(os)}catch(hr){console.error("Failed to parse Gemini response as JSON:",ii,hr),Lt("Could not parse wine details. Try a different name or add manually."),b("asking");return}if(!oe.name||!oe.description){Lt("Wine details incomplete or not found. Try a different name or add manually."),b("asking");return}x({name:oe.name||z,vintage:oe.vintage||new Date().getFullYear(),varietal:oe.varietal||"",country:oe.country||"",description:oe.description||"",imageUrl:Z?URL.createObjectURL(Z):oe.imageUrl||"https://i.postimg.cc/xdvXnqyP/Wine-bottle.jpg",publicRating:oe.publicRating||0,reviewCount:oe.reviewCount||0,ratingSource:oe.ratingSource||"",price:oe.price||0}),b("confirming")}catch(st){console.error("API call failed or unexpected error:",st),Lt("Sorry, something went wrong with the wine research. Please try again or add manually."),b("asking")}},F=z=>{(async()=>{var nt;try{const lt=(nt=z.imageUrl)!=null&&nt.startsWith("data:")?z.imageUrl:z.imageUrl||"https://i.postimg.cc/xdvXnqyP/Wine-bottle.jpg";console.log("Saving wine to Firestore:",z);const st={...z,imageUrl:lt,dateAdded:new Date().toISOString()},wt=await cI(eE(zc,"wines"),st);W(Kt=>[{...st,id:wt.id},...Kt]),Ct()}catch(lt){console.error("Error saving wine to Firestore:",lt),Lt("Failed to save wine. Please check your connection and Firebase setup.")}})()},it=z=>{(async()=>{const nt=Sm(zc,"wines",String(z.id)),{id:lt,...st}=z;await lI(nt,st),W(wt=>wt.map(Kt=>Kt.id===z.id?z:Kt)),Ct()})()},ct=z=>{L(z),b("editing")},Ct=()=>{b("closed"),x({}),L(null),Lt(null)},qt=z=>{(async()=>{const nt=Sm(zc,"wines",String(z));await uI(nt),W(lt=>lt.filter(st=>st.id!==z))})()},M=se.useMemo(()=>{let z=[...$];return zt&&(z=z.filter(Z=>Z.name.toLowerCase().includes(zt.toLowerCase())||Z.notes.toLowerCase().includes(zt.toLowerCase())||Z.varietal.toLowerCase().includes(zt.toLowerCase()))),z.sort((Z,nt)=>new Date(nt.dateAdded).getTime()-new Date(Z.dateAdded).getTime()),z},[$,zt]);return V.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-800",children:[V.jsxs("div",{className:"container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 pb-28",children:[V.jsx("div",{className:"pt-4 sm:pt-6 lg:pt-8",children:V.jsx(sO,{user:s,rightContent:s?V.jsx("button",{onClick:_t,className:"text-sm text-gray-600 hover:text-red-800 hover:underline font-medium transition-colors",children:"Logout"}):V.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900",children:"Sign in"}),searchTerm:zt,onSearchChange:Rt})}),o&&V.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4","aria-modal":"true",role:"dialog",children:V.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 relative",children:[V.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close auth modal",children:""}),V.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:f?"Sign Up":"Login"}),n&&V.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4 text-sm",children:n}),V.jsxs("form",{onSubmit:f?tt:gt,className:"space-y-4",children:[V.jsx("input",{type:"email",value:p,onChange:z=>_(z.target.value),placeholder:"Email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent"}),V.jsx("input",{type:"password",value:S,onChange:z=>A(z.target.value),placeholder:"Password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent"}),f&&V.jsx("input",{type:"password",value:I,onChange:z=>k(z.target.value),placeholder:"Confirm Password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-red-800 focus:border-transparent"}),V.jsx("button",{type:"submit",className:"w-full px-6 py-2 bg-red-800 text-white rounded-lg hover:bg-red-900",children:f?"Sign Up":"Login"}),V.jsxs("div",{className:"relative my-6 text-center",children:[V.jsx("div",{className:"absolute inset-0 flex items-center",children:V.jsx("div",{className:"w-full border-t border-gray-300"})}),V.jsx("div",{className:"relative flex justify-center text-sm",children:V.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),V.jsxs("button",{type:"button",onClick:Pt,className:"w-full px-6 py-2 bg-[#4285f4] hover:bg-[#357ABD] text-white rounded-lg flex items-center justify-center space-x-2 relative overflow-hidden",children:[V.jsx("div",{className:"absolute left-1 bg-white p-2 rounded",children:V.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[V.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),V.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),V.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),V.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),V.jsx("span",{className:"ml-8",children:"Sign in with Google"})]}),V.jsx("div",{className:"text-center mt-4",children:V.jsx("button",{type:"button",onClick:()=>{g(!f),dt()},className:"text-red-800 hover:text-red-900",children:f?"Already have an account? Login":"Need an account? Sign Up"})})]})]})}),V.jsx("main",{className:"mt-8",children:M.length>0?V.jsx("div",{className:"mt-8 grid grid-cols-1 gap-6",children:M.map(z=>V.jsx(aO,{wine:z,onDelete:qt,onEdit:ct},z.id))}):V.jsxs("div",{className:"mt-16 text-center text-gray-500",children:[V.jsx("p",{className:"text-xl",children:"No wines found."}),V.jsx("p",{className:"mt-2",children:"Try adjusting your search."})]})})]}),V.jsx(dO,{searchTerm:zt,onSearchChange:Rt,onAddClick:()=>b("asking")}),V.jsx(hO,{modalState:N,onClose:Ct,onAddWine:F,onUpdateWine:it,onResearch:de,researchedData:C,editingWine:D,apiError:w})]})},yS=document.getElementById("root");if(!yS)throw new Error("Could not find root element to mount to");const gO=r1.createRoot(yS);gO.render(V.jsx(JA.StrictMode,{children:V.jsx(mO,{})}));
